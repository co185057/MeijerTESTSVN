<?xml version="1.0" encoding="utf-8"?>

<!-- edited with XMLSpy v2005 sp2 U (http://www.altova.com) by Developer (NCR Corporation) -->

<!-- CHANGE HISTORY: 	-->
<!-- CRD 557225 Name: CJ Estrada Date: Mar 4, 2021 -->
<!-- CRD 554916 Name: CJ Estrada Date: Feb 9, 2021 -->
<!-- CRD 554915 Name: CJ Estrada Date: Feb 8, 2021 -->
<!-- CRD 547452 Name: CJ Estrada Date: Jan 13, 2021 -->
<!-- VSTS526835 Name:Clyden Ortillo  Date:November 10, 2020 -->
<!-- VSTS137989 Work Request:79417 Name:Alex Bronola  Date:April 19, 2018 -->
<!-- POS335706 Work Request:79417 Name:Alex Bronola  Date:Jan 29, 2018 -->
<!-- POS328559 Work Request:79417 Name: Aparna Tunuguntla   Date:Aug 29, 2017 -->
<!-- POS324301 Work Request:76936 Name: Alex Bronola   Date:May 15, 2017 -->
<!-- POS323946 Work Request:76936 Name: Alex Bronola   Date:May 11, 2017 -->
<!-- POS323036 Work Request:76936 Name: Alex Bronola   Date:May 04, 2017 -->
<!-- POS320628/321023 Work Request:76936 Name: Alex Bronola   Date:Apr. 26, 2017 -->
<!-- POS320628 Work Request:76936 Name: Alex Bronola   Date:Apr. 13, 2017 -->
<!-- POS320135 Work Request:76936 Name: Alex Bronola   Date:Apr. 03, 2017 -->
<!-- POS317422 Work Request:77937 Name: Alex Bronola   Date:Mar. 03, 2017 -->
<!-- POS312463 Work Request:77937 Name: Alex Bronola   Date:Feb. 07, 2017 -->                                                        
<!-- POS222763 Work request:76936 Name:Saiprasad Srihasam Date:December 23,2016 -->
<!-- POS297522 Work request:76936 Name:Jangala Sunny Date:December 16,2016 -->
<!-- POS303376 Work Request:76936 Name: Veerasekhara,D  Date:December 16, 2016 -->
<!-- POS296302 Work Request:76936 Name: Alex Bronola   Date:Dec 15, 2015 -->
<!-- POS291625 Work Request:76936 Name:Alex Bronola Date:Dec 05, 2016    -->
<!-- POS296865 Work Request:76936 Name:Veerasekhara,D Date:Dec 01, 2016    -->
<!-- POS296290 Work Request:76936 Name:Alex Bronola Date:Oct 19, 2016    -->
<!-- POS296369 Work Request:76936 Name:Alex Bronola Date:Oct 12, 2016    -->
<!-- POS295122 Work Request:73595 Name:Robert Susanto Date:Sept 30, 2016 -->
<!-- POS294602/POS294487 Work Request:73595 Name:Alexander Bronola Date:Sept 27, 2016 -->
<!-- POS293857/273125/291972 Work Request:73595 Name:Alex Bronola Date: Sept 21, 2016 -->											
<!-- POS294724 Work Request:76936 Name:Alex Bronola Date: September 28, 2016 		-->
<!-- POS222763 Work Request:73595 Name:Aparna Tunuguntla Date: September 20,2016 -->
<!-- POS293706 Work Request:76936 Name:Robert Susanto Date: September 19, 2016 		-->
<!-- POS293087 Work Request:76936 Name:Alex Bronola Date: September 14, 2016 		-->
<!-- POS278563 Work Request:76936 Name:Alex Bronola Date: September 13, 2016 		-->
<!-- POS291972 Work Request:77950 Name:Robert Susanto Date: September 12, 2016 		-->
<!-- POS252892 Work Request:73595 Name:Jangala Sunny Date: August 26, 2015 		-->
<!-- POS290538 Work Request:73594 Name:Robert Susanto Date:August 4, 2016					-->
<!-- POS287468 Work Request:73594 Name:Robert Susanto Date:August 4, 2016					-->
<!-- POS273548 Work Request:73594 Name:Robert Susanto Date:July 1, 2016					-->
<!-- POS272079 Work Request:68941 Name:Robert Susanto Date:June 7, 2016					-->
<!-- POS266877 Work Request:68941 Name:Jangala Sunny  Date:May 30, 2016					-->
<!-- POS258550 Work Request:68941 Name:Robert Susanto Date:May 25, 2016					-->
<!-- POS265169 Work Request:68941 Name:Robert Susanto Date:May 11, 2016					-->
<!-- POS264936 Work Request:68941 Name:Robert Susanto Date:May 9, 2016					-->
<!-- POS259199-264013 Work Request:68941 Name:Robert Susanto Date:May 4, 2016					-->
<!-- POS259997 Work Request:68941 Name:Aparna Tunuguntla Date:April 20, 2016					-->
<!-- POS223750 Work Request:68941 Name:Robert Susanto Date:Jan 11, 2016					-->
<!-- POS208800 Work Request:68940 Name:Robert Susanto Date: Sept 14, 2015          -->
<!-- POS214059 Work Request:68940 Name:Robert Susanto Date: August 5, 2015          -->
<!-- POS214025 Work Request:68237 Name:Saiprasad Srihasam Date: August 07, 2015      -->
<!-- POS207283 Work Request:68940 Name:Robert Susanto Date: July 10, 2015          -->
<!-- POS192746 Work Request:68237 Name:Kranthi Kumari Cherugondi Date: May 19, 2015          -->
<!-- POS198270 Work Request:68237 Name:Saiprasad Srihasam Date: May 06, 2015          -->
<!-- POS192736 Work Request:68237 Name:Saiprasad Srihasam Date: April 15, 2015          -->
<!-- POS192618 Work Request:68237 Name:Robert Susanto Date: April 14, 2015          -->
<!-- POS189696 Work Request:68237 Name:Saiprasad Srihasam Date: April 14, 2015          -->
<!-- POS189114 Work Request:66559 Name:Robert Susanto Date:March 23, 2015  		-->	
<!-- POS138637 Work Request:66559 Name:Kranthi Kumari Cherugondi Date:March 3, 2015  	-->	
<!-- POS180969  Work Request:66559 Name:Robert Susanto Date:February 10, 2015		-->
<!-- POS154789 Work Request:66559 Name:Saiprasad Srihasam    Date:January 30, 2015  		-->	
<!-- POS154826 Work Request:66559 Name:Saiprasad Srihasam    Date:January 22, 2015  		-->	
<!-- POS138840  Work Request:66559 Name:Robert Susanto Date:January 15, 2015		-->
<!-- POS149583 Work Request:66559 Name:Saiprasad Srihasam Date:January 08,2015                            -->
<!-- POS138630 Work Request:66559 Name:Saiprasad Srihasam    Date:December 04, 2014			   -->
<!-- POS101707 Work Request:65347 Name:Saiprasad Srihasam Date:September 29, 2014                             -->
<!-- POS96746 Work Request:65347 Name:Robert Susanto Date:August 29, 2014                             -->
<!-- POS112107 Work Request:65347 Name:Saiprasad Srihasam Date:August 18, 2014                             -->
<!-- POS106936 Work Request:61232 Name:Robert Susanto    Date:July 22, 2014			   -->
<!-- POS93791 Work Request:61232 Name:Robert Susanto    Date:April 2, 2014			   -->
<!-- POS85378 Work Request:59313 Name:Matt Condra    Date:January 10, 2014			   -->
<!-- POS84328/80904 Work Request:59313 Name:Robert Susanto Date:December 13, 2013	-->
<!-- POS78133 Work Request:58657 Name:Matt Condra    Date:October 7, 2013			   -->
<!-- POS77770/71132 Work Request:58657 Name:Robert Susanto    Date:September 26, 2013	-->
<!-- POS77584/71132 Work Request:58657 Name:Robert Susanto    Date:September 26, 2013	-->
<!-- POS48277/71132 Work Request:58657 Name:Robert Susanto    Date:September 6, 2013	-->
<!-- POS74992 Work Request:58657 Name:Robert Susanto    Date:August 30, 2013			-->
<!-- POS73196/71821 Work Request:58657 Name:Robert Susanto    Date:August 8, 2013			-->
<!-- POS64823 Work Request:56285 Name:Robert Susanto    Date:July 15, 2013			-->
<!-- POS70546 Work Request:56285 Name:Robert Susanto    Date:July 11, 2013			-->
<!-- POS68773 Work Request:56285 Name:Robert Susanto    Date:June 25, 2013			-->
<!-- POS65023 Work Request:56285 Name:Matt Condra    Date:June 15, 2013			-->
<!-- POS65108/6300 Work Request:56285 Name:Robert Susanto    Date:May 23, 2013			-->
<!-- POS62550 Work Request:54416 Name:Robert Susanto    Date:May 7, 2013				-->
<!-- POS61842 Work Request:54416 Name:Robert Susanto    Date:April 19, 2013				-->
<!-- POS55714 Work Request:54416 Name:Robert Susanto    Date:March 25 , 2013			-->
<!-- POS55609 Work Request:54416 Name:Matt Condra    Date:March 26, 2013			-->
<!-- POS41473 Work Request:54416 Name:Matt Condra    Date:March 6, 2013			-->
<!-- POS56079 Work Request:54416 Name:Robert Susanto    Date:February , 2013			-->
<!-- POS39476/POS52217 Work Request:52635 Name:Robert Susanto    Date:January 8, 2013			-->
<!-- POS53849 Work Request:52635 Name:Sandy Reedy    Date:January 23, 2013		 		-->
<!-- POS52017 Work Request:52635 Name:Matt Condra    Date:January 11, 2013		 		-->
<!-- POS50538 Work Request:52635 Name:Robert Susanto    Date:December 11, 2012			-->
<!-- POS50102 Work Request:52635 Name:Matt Condra    Date:December 6, 2012		 		-->
<!-- POS33020 Work Request:52635 Name:Matt Condra    Date:November 16, 2012			-->
<!-- POS39475 Work Request:52635 Name:Matt Condra    Date:November 10, 2012			-->
<!-- POS30981/POS37397 Work Request:52635 Name:Robert Susanto Date:October 24 2012  		-->
<!-- POS36905/POS42533 Work Request:52635 Name:Robert Susanto Date:October 17, 2012	-->
<!-- POS39158 Work Request:50865 Name:Robert Susanto Date:September 5 2012		   	-->
<!-- POS40289 Work Request:50865 Name:Robert Susanto Date:September 5 2012		   	-->
<!-- POS36318 Work Request:50865 Name:Robert Susanto Date:August 24, 2012			-->
<!-- POS36319 Work Request:50864 Name:Robert Susanto Date:June 20, 2012				-->
<!-- POS36317 Work Request:19114 Name:Robert Susanto Date:June 11, 2012				-->
<!-- POS30981/POS31051 Work Request:50864 Name:Robert Susanto Date:May 21 2012 		-->
<!-- POS30981/POS31051 Work Request:50864 Name:Robert Susanto Date:May 7 2012  		-->
<!-- POS33561 Work Request:19114 Name:Robert Susanto Date:April 26, 2012			-->
<!-- POS30981/POS31050 Work Request:50864 Name:Robert Susanto Date:April 24 2012 	-->
<!-- POS33297 Work Request:19114 Name:Robert Susanto Date:April 25, 2012			-->
<!-- POS32142 Work Request:16656 Name:Robert Susanto Date:March 29, 2012			-->
<!-- POS24632 Work Request:19114 Name:Robert Susanto Date:March 22 2012  			-->
<!-- POS27359 Work Request:19114 Name:Matt Condra    Date:February 22 2012 			-->
<!-- POS28644 Work Request:16656 Name:Robert Susanto Date:January 26 2012  			-->
<!-- POS27783 Work Request:16656 Name:Matt Condra    Date:January 19 2012 			-->
<!-- POS17261 Work Request:16656 Name:Matt Condra    Date:January 13 2012 			-->
<!-- POS17261 Work Request:16656 Name:Matt Condra    Date:January 10 2012 			-->
<!-- POS25997 Work Request:16656 Name:Matt Condra    Date:January 3 2012  			-->
<!-- POS24909 Work Request:16656 Name:Matt Condra    Date:December 7 2011  			-->
<!-- POS20561 Work Request:16656 Name:Robert Susanto Date:December 2 2011  			-->
<!-- POS19072 Work Request:16656 Name:Matt Condra    Date:November 29 2011 		    -->
<!-- POS17261 Work Request:16656 Name:Matt Condra    Date:October 27 2011 			-->
<!-- POS19073 Work Request:16656 Name:Matt Condra    Date:October 14 2011 			-->
<!-- POS20084 Work Request:16632 Name:Robert Susanto Date:September 27 2011  			-->
<!-- POS18049 Work Request:16656 Name:Robert Susanto September 16 2011  			-->
<!-- POS18539 Work Request:16656 Name:Robert Susanto September 15 2011  			-->
<!-- POS11024 Work Request:16632 Name:Sandeep Shenoy Date:October 25, 2011 	    	-->
<!-- POS11024 Work Request:16632 Name:Sandeep Shenoy Date:October 20, 2011 	    	-->
<!-- POS11024 Work Request:16632 Name:Sandeep Shenoy Date:October 7, 2011  	    	-->
<!-- POS11024 Work Request:16632 Name:Sandy Reedy Date:September 29, 2011  	    	-->
<!-- POS20084 Work Request:16632 Name:Robert Susanto Date:September 27 2011  		-->
<!-- POS11024 Work Request:16632 Name:Sandy Reedy Date:September 27, 2011  	    	-->
<!-- POS15745 Work Request:16632 Name:Robert Susanto Date:August 11 2011  			-->
<!-- POS11024 Work Request:16632 Name:Sandeep Shenoy Date:August 26, 2011  	    	-->
<!-- POS11024 Work Request:16632 Name:Sandeep Shenoy Date:August 23, 2011  	    	-->
<!-- POS11024 Work Request:16632 Name:Sandy Reedy Date:July 20, 2011  		    	-->
<!-- POS11024 Work Request:16632 Name:Sandy Reedy Date:July 14, 2011  		    	-->
<!-- POS11024 Work Request:16632 Name:Sandeep Shenoy Date:Jul  7, 2011  			-->
<!-- POS15989 Work Request:15196 Name:Robert Susanto Date:July 20 2011  			-->
<!-- POS15769 Work Request:15196 Name:Robert Susanto Date:July  8 2011  			-->
<!-- POS15434 Work Request:15196 Name:Robert Susanto Date:June 28 2011  			-->
<!-- POS15386 Work Request:15196 Name:Robert Susanto Date:June 27 2011  			-->
<!-- POS14806 Work Request:15196 Name:Robert Susanto Date:June 10 2011  			-->
<!-- POS6135 Work Request:15196 Name:Robert Susanto Date:April 28 2011  			-->
<!-- POS10275 Work Request:15196 Name:Robert Susanto Date:April 20 2011  			-->
<!-- POS12376 Work Request:15196 Name:Sandeep Shenoy Date:May 31 2011				-->

<MapEntries name="MHDisplay" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="C:\scot\Config\TBMsgMap.xsd">
    <MapEntry> 
        <TBCurrentInProgress>TERM_INIT_LANE_OPEN</TBCurrentInProgress>
        <POSMessage>INVALID_OPER_NUM</POSMessage>
        <TBNewInProgress>CRITICAL_ERROR</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9001;9002; ;0;0</MethodParam>
    </MapEntry>
    <MapEntry> 
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>TENDER_VOIDED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>***ALL TENDERS VOIDED***;0</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>NEGATIVE_MEDIA</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
         <TriggerMethod>msgSendReturnStatusMsgs</TriggerMethod>
        <MethodParam>TB_LOG_NEGATIVE_MEDIA</MethodParam>
    </MapEntry>
   <MapEntry>       
        <TBCurrentInProgress>ASSISTMODE_TENDER</TBCurrentInProgress>
        <POSMessage>FOOD_STAMP_CHANGE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>   
	<TriggerMethod>msgFSChange</TriggerMethod>
    </MapEntry>
    <MapEntry> 
        <TBCurrentInProgress>ASSISTMODE_TENDER</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<MapEntry> 
        <TBCurrentInProgress>ASSISTMODE_TENDER</TBCurrentInProgress>
        <POSMessage>TRXMENU_DK1</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	
	<MapEntry> 
        <TBCurrentInProgress>ASSISTMODE_TENDER</TBCurrentInProgress>
        <POSMessage>MISCMENU_DK1</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry> 
        <TBCurrentInProgress>ASSISTMODE_TENDER</TBCurrentInProgress>
        <POSMessage>TENDER_VOIDED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>***ALL TENDERS VOIDED***;0</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_VOID</TBCurrentInProgress>
        <POSMessage>ALL_TENDERS_VOIDED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_TENDERVOIDED</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>*** ALL TENDERS VOIDED ***;0</MethodParam>         
    </MapEntry>    
   <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_TENDER</TBCurrentInProgress>
        <POSMessage>NEGATIVE_MEDIA_AT_PAYMENT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
         <TriggerMethod>msgSendReturnStatusMsgs</TriggerMethod>
        <MethodParam>TB_LOG_NEGATIVE_MEDIA</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>SALE_RESTRICTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
      	<TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
        <MethodParam>SaleRestricted;9106</MethodParam>        
    </MapEntry>
    <!--POS12624:Added new state for Linked item-->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>SALE_RESTRICTED_LINK</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
      	<TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
        <MethodParam>SaleRestrictedLink;9106</MethodParam>        
    </MapEntry>

<!-- SOTF8380 - O2S - RRS -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_ORDER_TO_STORE_ITEM</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_ORDER_TO_STORE_ITEM_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>STORE_2_GO</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
      	<TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>        
    </MapEntry>

<!-- POS68773 -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>CARD_SALE_RESTRICTED</POSMessage>
        <TBNewInProgress>ITEMIZATION_PHONE_GIFT</TBNewInProgress>
         <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgBuildGreenDotDataNeeded</TriggerMethod>
    </MapEntry>

    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT</TBCurrentInProgress>
        <POSMessage>CARD_SALE_RESTRICTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
         <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgBuildGreenDotDataNeeded</TriggerMethod>
    </MapEntry>

      <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT_RETDN_cAssistModeGreenDotItem</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT_RETDN_cReturnGreenDotItem</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_CANCEL_ITEM</TBReturnCode>
        <TriggerMethod>msgSendKeyIfNotInAssist</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>       
    </MapEntry>
<!-- e POS68773 -->

    <!-- SOTF 8946 RRS -->
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>STORE_2_GO</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
      	<TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>        
    </MapEntry>
    <!-- E SOTF 8946 RRS -->

    <!-- SOTF 9034  RRS -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>SIGNATURE_VERIFY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
	<TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>  
    <!-- E SOTF 9034  RRS -->

    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>SIGNATURE_VERIFY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMCardProcessing</MethodParam>
    </MapEntry>   

    <!-- SOTF 8947 RRS -->
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>SIGNATURE_VERIFY</POSMessage>
        <TBNewInProgress>TB_ORDERSTORE_SIGNATURE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMCardProcessing</MethodParam>
    </MapEntry>  
    <MapEntry>
        <TBCurrentInProgress>TB_ORDERSTORE_SIGNATURE</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>
    </MapEntry>
    <!-- E SOTF 8947 RRS -->
 
<!-- E - SOTF8380 - O2S - RRS -->

	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>UNMATCH_COUPON</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
      	<TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>        
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>NEED_SECOND_BARCODE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
      	<TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>        
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>TB_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>NEED_SECOND_BARCODE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
      	<TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>        
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>SVCARD_LEGAL_TENDER</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
      	<TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>PSEUDOPHEDRINE_LIMIT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_ITEM_QUANTITY_RESTRICTED</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>

    <!-- 8851 rrs -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>PSEUDOPHEDRINE_NOT_ALLOWED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
        <MethodParam>PseudophedrineLimit;9121</MethodParam> 
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>PSEUDOPHEDRINE_NOT_ALLOWED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_CANCEL_ITEM</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>  
   </MapEntry>
    <!-- 8851 rrs -->

    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_AFTER_SKIPBAGGING</TBCurrentInProgress>
        <POSMessage>CM_PROMO_LINKEDITEM</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>CMPromoLinked;;SUMMARYINSTRUCTION=[[CMPromoLinked_LTT1]]\n\nWould you like to include this item in your purchase?;</MethodParam>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>CM_PROMO_LINKEDITEM</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
	<!-- +POS303376-->
	<MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>MESSAGE_300</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgMessage300</TriggerMethod>
    </MapEntry>
	<!-- -POS303376-->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_AFTER_SKIPBAGGING</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT</TBCurrentInProgress>
        <POSMessage>VOID_GIFT_CARD</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
	<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_cYES</TBCurrentInProgress>
        <POSMessage>CM_PROMO_LINKEDITEM</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam> 		
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_cNO</TBCurrentInProgress>
        <POSMessage>CM_PROMO_LINKEDITEM</POSMessage>
        <TBNewInProgress>ITEMIZATION_IP</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
	<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
	
    <!-- POS295122 rrs  -->
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_cYES</TBCurrentInProgress>
        <POSMessage>DO_YOU_WANT_MPERKS</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>		
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_cNO</TBCurrentInProgress>
        <POSMessage>DO_YOU_WANT_MPERKS</POSMessage>
        <TBNewInProgress>ITEMIZATION_IP</TBNewInProgress>        
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>        
    </MapEntry>
	<!-- e POS295122 rrs -->
	<!-- +POS321023 -->
    <MapEntry>       
	    <TBCurrentInProgress>ITEMIZATION_AFTER_SKIPBAGGING</TBCurrentInProgress>
        <POSMessage>DO_YOU_WANT_MPERKS</POSMessage>
        <TBNewInProgress>TB_DIGITAL_COUPON_PROMPT</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>MPerksPrompt;;SUMMARYINSTRUCTION=[[OG_Guidance_Prop]];</MethodParam>      
    </MapEntry>
	<!-- -POS321023 -->
	<MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_OUT_RETDN_cYES</TBCurrentInProgress>
        <POSMessage>CM_PROMO_LINKEDITEM</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
	<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_OUT_RETDN_cNO</TBCurrentInProgress>
        <POSMessage>CM_PROMO_LINKEDITEM</POSMessage>
        <TBNewInProgress>ITEMIZATION_IP</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
	<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
    <!-- SSCOI 47406 -->
	<!-- Start CRD 269544 -->
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>MEP_AVAILABLE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>	
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_AFTER_SKIPBAGGING</TBCurrentInProgress>
        <POSMessage>MEP_AVAILABLE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgMEPAvailable</TriggerMethod>
    </MapEntry>	
	<MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_OUT</TBCurrentInProgress>
        <POSMessage>MEP_AVAILABLE</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<!-- End CRD 269544 -->
	<!-- Start CRD 231416 -->
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>MEP_AVAILABLE_MOBILE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgMEPMobileAvailable</TriggerMethod>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_SR_MEP_YES</TBCurrentInProgress>
        <POSMessage>MEP_AVAILABLE_MOBILE</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_SR_MEP_NO</TBCurrentInProgress>
        <POSMessage>MEP_AVAILABLE_MOBILE</POSMessage>
       <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
	<TriggerMethod>msgSetFLState</TriggerMethod>	<!-- CRD 263529 -->
        <MethodParam>SMScanAndBag</MethodParam>
    </MapEntry>
	<!-- End CRD 231416 -->
    <!-- <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_AFTER_SKIPBAGGING</TBCurrentInProgress>
        <POSMessage>MEP_AVAILABLE</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgMEPAvailable</TriggerMethod>
    </MapEntry> -->
     <!-- SSCOI 47406 -->
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_MEP_YES</TBCurrentInProgress>
        <POSMessage>MEP_AVAILABLE</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
	<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <!-- CRD 269544 reimplemented SIMPLR Warranty prompts  POS 10649 RRS 
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_MEP_YES</TBCurrentInProgress>
        <POSMessage>MEP_AVAILABLE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>Prop_Last_DK_label_asa_7;1;1</MethodParam>
    </MapEntry>-->
    <!-- POS 10649 RRS -->

    <!-- POS85378: Added mappings for the MEP_AVAILABLE_NON_BAG POS state to support MEP in MobilePayStation -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>MEP_AVAILABLE_NON_BAG</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_AFTER_SKIPBAGGING</TBCurrentInProgress>
        <POSMessage>MEP_AVAILABLE_NON_BAG</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgMEPAvailable</TriggerMethod>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_OUT</TBCurrentInProgress>
        <POSMessage>MEP_AVAILABLE_NON_BAG</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_MEP_YES</TBCurrentInProgress>
        <POSMessage>MEP_AVAILABLE_NON_BAG</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam> 
    </MapEntry>

  <!--  CRD 269544 reimplemented SIMPLR Warranty prompts 
  <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_MEP_YES</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
      POS236819, SSCOI-41165 -abb      
	    <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F7}</MethodParam>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>Prop_Last_DK_label_asa_7;1;1</MethodParam>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam> 
    </MapEntry> --> 
  
    <!-- POS138840 rrs 
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_MEP_YES</TBCurrentInProgress>
        <POSMessage>MEP_AVAILABLE</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
	   <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>  SSCOI 47406
    </MapEntry>-->
    <!-- e POS138840 rrs -->

    <!-- POS 10649 RRS -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_MEP_NO</TBCurrentInProgress>
        <POSMessage>MEP_AVAILABLE</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>  
    </MapEntry>
    <!-- CRD 269544 reimplemented SIMPLR Warranty prompts 
	POS 10649 RRS
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_MEP_NO</TBCurrentInProgress>
        <POSMessage>MEP_AVAILABLE</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>  
    </MapEntry>    -->

   <!-- POS138840 rrs 
   <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_MEP_NO</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>Prop_Last_DK_label_asa_7;1;1</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_MEP_NO</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>  
    </MapEntry>   -->
   <!-- e POS138840 rrs -->
   <!-- SOTF 7726 -->
   <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>SALE_RESTRICTED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_CANCEL_ITEM</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>  
   </MapEntry>
   <!-- SOTF 7726 -->
   <!--POS12624:Handle the cancel button on POS for linked item-->
   <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>SALE_RESTRICTED_LINK</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_CANCEL_ITEM</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>  
   </MapEntry>
   <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>PROCESSING</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>          
   </MapEntry>
   <!-- Start CRD 547452 -->
   <MapEntry>
        <TBCurrentInProgress>CITI_APP_WEB_ERROR</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>CitiWebAppError;</MethodParam>      
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>CITI_APP_WEB_ERROR_RETDN_cOK</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam> 		
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>CITI_APP_WEB_ERROR_RETDN_cOK</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam> 		
    </MapEntry>
	<!-- End CRD 547452 -->
	<!-- Start CRD 554915 --> 
	<MapEntry>
        <TBCurrentInProgress>ACCOUNT_LOOKUP_PROCESS_ITEMIZATION</TBCurrentInProgress>
        <POSMessage>ACCOUNT_LOOKUP_SUCCESS</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>	
		<TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ACCOUNT_LOOKUP_PROCESS_PAYMENT</TBCurrentInProgress>
        <POSMessage>ACCOUNT_LOOKUP_SUCCESS</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>		
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ACCOUNT_LOOKUP_PROCESS_ITEMIZATION</TBCurrentInProgress>
        <POSMessage>ACCOUNT_LOOKUP_FAIL</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>	
	    <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>
	    <TriggerMethod>msgAccountLookupFailedIntervention</TriggerMethod>	<!-- CRD 554916 -->
		<MethodParam>AccountLookUpFailed</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ACCOUNT_LOOKUP_PROCESS_PAYMENT</TBCurrentInProgress>
        <POSMessage>ACCOUNT_LOOKUP_FAIL</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>	
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ACCOUNT_LOOKUP_PROCESS_ITEMIZATION</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>	
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ACCOUNT_LOOKUP_PROCESS_PAYMENT</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>	
    </MapEntry>
	<!-- End CRD 554915 -->
	<!-- Start CRD 557225 -->
	<MapEntry>
        <TBCurrentInProgress>GET_ACCOUNT_DETAILS_FAILED</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>	
	    <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>
	    <TriggerMethod>msgAccountLookupFailedIntervention</TriggerMethod>
		<MethodParam>GetAccountDetailsFailed</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>GET_ACCOUNT_DETAILS_FAILED</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>	
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>GET_ACCOUNT_DETAILS_FAILED</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>	
    </MapEntry>
	<!-- End CRD 557225 -->
    <MapEntry> 
        <TBCurrentInProgress>TERM_LANE_OPEN_PASSWORD</TBCurrentInProgress>
        <POSMessage>INVALID_PASSWORD</POSMessage>
        <TBNewInProgress>CRITICAL_ERROR</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9001;9002; ;0;0</MethodParam>
    </MapEntry>
<!--    <MapEntry>
        <TBCurrentInProgress>TERM_INIT_LANE_OPEN</TBCurrentInProgress>
        <POSMessage>INVALID_OPER_NUM</POSMessage>
        <TBNewInProgress>TERM_INIT_READY</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry> -->
    <MapEntry> 
        <TBCurrentInProgress>TERM_INIT_DISCONNECTED</TBCurrentInProgress>
        <POSMessage>DUPLICATE_LOGIN</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry> 
        <TBCurrentInProgress>TERM_INIT_DISCONNECTED</TBCurrentInProgress>
        <POSMessage>PROCESSING</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry> 
        <TBCurrentInProgress>TERM_INIT_DISCONNECTED</TBCurrentInProgress>
        <POSMessage>DUPLICATE_LOGIN_REMAIN_SIGNEDON</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry> 
        <TBCurrentInProgress>TERM_LANE_OPEN_PASSWORD</TBCurrentInProgress>
        <POSMessage>DUPLICATE_LOGIN_ALLOW</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry> 
        <TBCurrentInProgress>TERM_LANE_OPEN_PASSWORD</TBCurrentInProgress>
        <POSMessage>DUPLICATE_LOGIN</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry> 
        <TBCurrentInProgress>TERM_LANE_OPEN_PASSWORD</TBCurrentInProgress>
        <POSMessage>DUPLICATE_LOGIN_REMAIN_SIGNEDON</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>TERM_INIT</TBCurrentInProgress>
        <POSMessage>DISCONNECTED</POSMessage>
        <TBNewInProgress>TERM_INIT_DISCONNECTED</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgTermDisconnected</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TERM_INIT_DISCONNECTED</TBCurrentInProgress>
        <POSMessage>DISCONNECTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgTermDisconnected</TriggerMethod>
    </MapEntry>    
    <MapEntry>
        <TBCurrentInProgress>TERM_INIT_DISCONNECTED</TBCurrentInProgress>
        <POSMessage>CONNECTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TERM_INIT</TBCurrentInProgress>
        <POSMessage>CONNECTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>SALES_TRAINING_ON</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_ENTEREDTRAINING</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>SALES_TRAINING_OFF</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_LEFTTRAINING</TBReturnCode>
    </MapEntry>

<!-- POS61842 -->
     <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>DYNAFRAME_NOT_FOUND</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode> 
    </MapEntry>    
<!-- e POS61842 rrs -->

    <MapEntry>
        <TBCurrentInProgress>TERM_INIT_DISCONNECTED</TBCurrentInProgress>
        <POSMessage>SIGNIN_MENU</POSMessage>
        <TBNewInProgress>TERM_INIT_READY</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_CLOSELANE</TBCurrentInProgress>
        <POSMessage>CONNECTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_FINISH_FLAPI</TBCurrentInProgress>
        <POSMessage>SIGNIN_MENU</POSMessage>
        <TBNewInProgress>TB_CLOSELANE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry> 
        <TBCurrentInProgress>TB_FINISH_FLAPI</TBCurrentInProgress>
        <POSMessage>DUPLICATE_LOGIN</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry> 
        <TBCurrentInProgress>TB_FINISH_FLAPI</TBCurrentInProgress>
        <POSMessage>DUPLICATE_LOGIN_REMAIN_SIGNEDON</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>  
    <MapEntry>
        <TBCurrentInProgress>TB_CLOSELANE</TBCurrentInProgress>
        <POSMessage>SIGNIN_MENU</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_CLOSELANE</TBCurrentInProgress>
        <POSMessage>SIGNIN_MENU_TRAINING</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_CLOSELANE</TBCurrentInProgress>
        <POSMessage>PRICEINQUIRY_MENU</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_CLOSELANE</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>TERM_INIT_LANE_CLOSED</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{MISC}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TERM_INIT_LANE_CLOSED</TBCurrentInProgress>
        <POSMessage>MISCMENU_DK1</POSMessage>
        <TBNewInProgress>SIGNOUT_COMPLETE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>

    <MapEntry>
        <TBCurrentInProgress>DUPLICATE_RECEIPT_PRNT</TBCurrentInProgress>
        <POSMessage>MISCMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F7}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>DUPLICATE_RECEIPT_PRNT</TBCurrentInProgress>
        <POSMessage>MISCMENU_DUPL_RCPT</POSMessage>
        <TBNewInProgress>DUPLICATE_RECEIPT_PRNT_IP</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>DUPLICATE_RECEIPT_PRNT_IP</TBCurrentInProgress>
        <POSMessage>MISCMENU_DUPL_RCPT_NUM</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>DUPLICATE_RECEIPT_PRNT_IP</TBCurrentInProgress>
        <POSMessage>NEW_ITEM_PROMPT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
   <MapEntry>
        <TBCurrentInProgress>DUPLICATE_RECEIPT_PRNT_IP</TBCurrentInProgress>
        <POSMessage>MISCMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_COMPLETEPRINTANDCUT</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
    </MapEntry>
   <MapEntry>
        <TBCurrentInProgress>DUPLICATE_RECEIPT_PRNT_IP</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMAttract</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>WIC_BALANCE_EXCEEDED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgHandleWicBalanceExceeded</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_cYES</TBCurrentInProgress>
        <POSMessage>WIC_BALANCE_EXCEEDED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[Cancel]</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_cNO</TBCurrentInProgress>
        <POSMessage>WIC_BALANCE_EXCEEDED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>WIC_INVALID_ITEM</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>WIC_INVALID_ITEM</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9170;9018; ;1;1</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>WIC_START</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>WIC_PROCESSING</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{TRANS}</MethodParam>
    </MapEntry>
    <!-- POS 138637 Start -->
    <MapEntry>
        <TBCurrentInProgress>FINISH_WIC_START</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>WIC_PROCESSING</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F8}{F4}</MethodParam>
    </MapEntry>
    <!-- POS 138637 End -->
<!-- +POS310004 -->
    <MapEntry>
        <TBCurrentInProgress>FINISH_WIC_START</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_SMART_WIC_ENABLE</POSMessage>
        <TBNewInProgress>WIC_PROCESSING</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
		<MethodParam>{F4}</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>FINISH_WIC_START</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_SMART_WIC_DISABLE</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
		<TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9199;9198; ;0;0</MethodParam>
        <TriggerMethod>msgSendSequence</TriggerMethod>
		<MethodParam>{PAYMENT}</MethodParam>
    </MapEntry>
	<!-- (+)POS328559 -->	
	<MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>NO_WIC_INTRX</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
		<TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9199;9198; ;0;0</MethodParam>
		<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
	<!-- (-)POS328559 -->
    <!-- -POS310004 -->	
 <MapEntry>
        <TBCurrentInProgress>WIC_PROCESSING</TBCurrentInProgress>
        <POSMessage>WIC_ACCOUNT_ENTRY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMCardProcessing</MethodParam>
    </MapEntry>
    <!-- SOTF5842 Start -->
    <MapEntry>
        <TBCurrentInProgress>WIC_START_PENDING</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <!-- SOTF5842 End -->
    <MapEntry>
        <TBCurrentInProgress>WIC_PROCESSING</TBCurrentInProgress>
        <POSMessage>TRXMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F8}{F4}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>WIC_PROCESSING</TBCurrentInProgress>
        <POSMessage>TRXMENU_DK2</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>WIC_PROCESSING</TBCurrentInProgress>
        <POSMessage>ACCOUNT_NUMBER_ENTRY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMCardProcessing</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>WIC_CANCEL</TBCurrentInProgress>
        <POSMessage>ACCOUNT_NUMBER_ENTRY</POSMessage>
        <TBNewInProgress>WIC_PROCESSING</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
    </MapEntry>
    <!-- Start Bonifacio FIX TAR366405-->
    <MapEntry>
        <TBCurrentInProgress>WIC_PROCESSING</TBCurrentInProgress>
        <POSMessage>MESSAGE_300</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <!-- End Bonifacio FIX-->
    <MapEntry>
        <TBCurrentInProgress>WIC_PROCESSING</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>
    </MapEntry>

<!--  (+) For Smart WIC processing -->
<!-- (+) POS189696 -->
<MapEntry>
        <TBCurrentInProgress>SMART_WIC_START</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>SMART_WIC_PROCESSING</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{TRANS}</MethodParam>
    </MapEntry>
<MapEntry>
        <TBCurrentInProgress>SMART_WIC_PROCESSING</TBCurrentInProgress>
        <POSMessage>TRXMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F8}{F5}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>SMART_WIC_PROCESSING</TBCurrentInProgress>
        <POSMessage>TRXMENU_DK2</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>SMART_WIC_PROCESSING</TBCurrentInProgress>
        <POSMessage>WIC_ACCOUNT_ENTRY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMCardProcessing</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>WIC_CANCEL</TBCurrentInProgress>
        <POSMessage>ACCOUNT_NUMBER_ENTRY</POSMessage>
        <TBNewInProgress>SMART_WIC_PROCESSING</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
    </MapEntry>
    <!-- Start Bonifacio FIX TAR366405-->
    <MapEntry>
        <TBCurrentInProgress>SMART_WIC_PROCESSING</TBCurrentInProgress>
        <POSMessage>MESSAGE_300</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <!-- End Bonifacio FIX-->
    <MapEntry>
        <TBCurrentInProgress>SMART_WIC_PROCESSING</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>
    </MapEntry>
	<!-- (+) POS222763 -->
    <MapEntry>
        <TBCurrentInProgress>WIC_CANCEL</TBCurrentInProgress>
        <POSMessage>WIC_ACCOUNT_ENTRY</POSMessage>
        <TBNewInProgress>SMART_WIC_PROCESSING</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>WIC_ACCOUNT_ENTRY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>

    <!-- (-) POS222763 -->

<!-- (-) POS189696 -->
<!-- (-) For Smart WIC processing -->

    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>WIC_TENDER_INVALID</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <!-- POS won't allow tendering empty WIC transaction with .00 value, it must be cancelled -->
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>WIC_PAYMENT_NOITEMS</POSMessage>
        <TBNewInProgress>TRANSACTION_CANCEL</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{TRANS}{F3}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>WIC_PAYMENT</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>WIC_PAYMENT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>    
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>WIC_PAYMENT_NOITEMS</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>

<!-- POS20561 - ignore the WIC PAYMENT while in the AM rrs -->
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_TENDER</TBCurrentInProgress>
        <POSMessage>WIC_PAYMENT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>    
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_TENDER</TBCurrentInProgress>
        <POSMessage>WIC_PAYMENT_NOITEMS</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
<!-- e POS20561 - ignore the WIC PAYMENT while in the AM rrs -->

    <MapEntry>
        <TBCurrentInProgress>SIGNOUT_COMPLETE</TBCurrentInProgress>
        <POSMessage>SIGNIN_MENU</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMLaneClosed</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_OPENLANE</TBCurrentInProgress>
        <POSMessage>SIGNIN_MENU</POSMessage>
        <TBNewInProgress>TERM_INIT_LANE_OPEN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[OPERATOR]{ENTER}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_OPENLANE</TBCurrentInProgress>
        <POSMessage>CONNECTED</POSMessage>
        <TBNewInProgress>TERM_INIT_LANE_OPEN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[OPERATOR]{ENTER}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_OPENLANE</TBCurrentInProgress>
        <POSMessage>PRICEINQUIRY_MENU</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TERM_INIT_LANE_OPEN</TBCurrentInProgress>
        <POSMessage>ENTER_PASSWORD</POSMessage>
        <TBNewInProgress>TERM_LANE_OPEN_PASSWORD</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[PASSWORD]{ENTER}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TERM_INIT_LANE_OPEN</TBCurrentInProgress>
        <POSMessage>NEW_PASSWORD</POSMessage>
        <TBNewInProgress>TERM_LANE_OPEN_PASSWORD</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[PASSWORD]{ENTER}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TERM_LANE_OPEN_PASSWORD</TBCurrentInProgress>
        <POSMessage>CONFIRM_PASSWORD</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[PASSWORD]{ENTER}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TERM_LANE_OPEN_PASSWORD</TBCurrentInProgress>
        <POSMessage>SCANNER_DEVICE_ERROR</POSMessage>
        <TBNewInProgress>CRITICAL_ERROR</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9019;9020; ;0;0</MethodParam>
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>SIGNIN_MENU</POSMessage>
        <TBNewInProgress>TERM_INIT_LANE_OPEN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[OPERATOR]{ENTER}</MethodParam>
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
     </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TERM_LANE_OPEN_PASSWORD</TBCurrentInProgress>
        <POSMessage>UPDATE_FLSCREEN_FROM_INVPASS</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
     </MapEntry>	 
    <MapEntry>       
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>PROCESSING</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TERM_LANE_OPEN_PASSWORD</TBCurrentInProgress>
        <POSMessage>POS_SIGNEDON</POSMessage>
        <TBNewInProgress>SIGNON_COMPLETE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
     <MapEntry>
        <TBCurrentInProgress>SIGNON_COMPLETE</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_COMPLETEPRINTANDCUT</TBReturnCode>
    </MapEntry>
    <!-- NOT REQUIRED ANYMORE - as of 575p DG31, ACS sends us the WICEBT value
    <MapEntry>
        <TBCurrentInProgress>SIGNON_COMPLETE</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>CHECK_WIC_EBT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
	<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{TRANS}</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>CHECK_WIC_EBT</TBCurrentInProgress>
        <POSMessage>TRXMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F8}</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>CHECK_WIC_EBT</TBCurrentInProgress>
        <POSMessage>TRXMENU_DK2</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
	<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
    </MapEntry>
    -->
    <MapEntry>
        <!-- TB_ENTERITEM_FLAPI state is set by TBEnterItem before a manual TriggerMsgMap
             You may have several handlers for this state to get the POS into a 
             "ready to sell" itemization state. Then the handler should call
             msgAPI_EnterItem -->
        <TBCurrentInProgress>TB_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
    <MapEntry>        
        <TBCurrentInProgress>TB_ENTERITEM_FLAPI</TBCurrentInProgress>       
        <POSMessage>PROCESSING</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
    <MapEntry>        
        <TBCurrentInProgress>TB_ENTERITEM_FLAPI</TBCurrentInProgress>       
        <POSMessage>LINKED_ITEM</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>TB_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>DUMMY_DISPLAY_AFTER_NSC4</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
    <!-- +SOTF 8147 -->
    <MapEntry>        
        <TBCurrentInProgress>TB_ENTERITEM_FLAPI</TBCurrentInProgress>       
        <POSMessage>TRXMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSendSequence</TriggerMethod>
		<MethodParam>{ITEM}</MethodParam>	
    </MapEntry>
    <!-- -SOTF 8147 -->
    <!-- TAR345688 begin_fix-->
    <MapEntry>        
        <TBCurrentInProgress>TB_ENTERITEM_FLAPI</TBCurrentInProgress>       
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgScannedItemInSMFinish</TriggerMethod>
		<MethodParam>{ITEM}</MethodParam>	
    </MapEntry>
    <MapEntry>        
        <TBCurrentInProgress>TB_ENTERITEM_FLAPI</TBCurrentInProgress>       
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
    </MapEntry>    



<!-- (+) POS214025 -->

    <MapEntry>
        <TBCurrentInProgress>TB_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON_ACTIVE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>

<!-- (-) POS214025 -->



    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_OUT</TBCurrentInProgress>
        <POSMessage>GUEST_CARD_SCANNED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>TB_LOYALTY_IN_FINISH_FLAPI</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>        
    </MapEntry>	
    <!-- TAR345688 end_fix-->		
    <MapEntry>       
        <TBCurrentInProgress>TB_FINISH_FLAPI</TBCurrentInProgress>
        <POSMessage>ITEM_NEEDQTY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <!-- TB_ENTERTENDERSTATE_IN state is set by TBEnterTenderState before a manual TriggerMsgMap -->
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>MISCMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>
    </MapEntry>
    <MapEntry>
        <!-- TB_ENTERTENDERSTATE_IN state is set by TBEnterTenderState before a manual TriggerMsgMap -->
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>LINKED_ITEM</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>
    </MapEntry>
    <MapEntry>
        <!-- TB_ENTERTENDERSTATE_IN state is set by TBEnterTenderState before a manual TriggerMsgMap -->
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>
    </MapEntry>
    <MapEntry>
        <!-- TB_ENTERTENDERSTATE_IN state is set by TBEnterTenderState before a manual TriggerMsgMap -->
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>DUMMY_DISPLAY_AFTER_NSC4</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>
    </MapEntry>
    <MapEntry>
        <!-- TB_ENTERTENDERSTATE_IN state is set by TBEnterTenderState before a manual TriggerMsgMap -->
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>PROCESSING</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>
    </MapEntry> 

<!-- SOTF 9411 rrs -->
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>NSC4_SCANNED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>[[NSC4Mnemonic]] -- [[NSC4Account]];0</MethodParam>	
    </MapEntry>
<!-- E SOTF 9411 rrs -->

    <MapEntry>       
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>NSC4_SCANNED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>
    </MapEntry>


    <MapEntry>       
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>TENDER_ACCEPTED</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_TENDERACCEPTED</TBReturnCode>
        <TriggerMethod>msgDecideIfTenderAccepted</TriggerMethod>
    </MapEntry>
	<MapEntry>       
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>

<!-- POS70546 rrs -->
    <MapEntry>       
        <TBCurrentInProgress>TENDER_GIFTCARD</TBCurrentInProgress>
        <POSMessage>GIFTCARD_FOODONLY_NOITEM</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry> 
   <MapEntry>
        <TBCurrentInProgress>TENDER_SELECTED_GIFTCARD</TBCurrentInProgress>
        <POSMessage>GIFTCARD_FOODONLY_NOITEM</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>FOOD_ONLY_GC</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
       <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>       
    </MapEntry>   
<!-- POS70546 rrs -->

    <MapEntry>       
        <TBCurrentInProgress>TENDER_GIFTCARD</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
		<TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F7}</MethodParam>
    </MapEntry> 
    <MapEntry>       
        <TBCurrentInProgress>TENDER_DEBIT</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgCMTenderingAmount</TriggerMethod>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>TENDER_DEBIT</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgEnterTenderedAmount</TriggerMethod>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>TENDER_CREDIT</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgCMTenderingAmount</TriggerMethod>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>TENDER_CREDIT</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgEnterTenderedAmount</TriggerMethod>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>TENDER_FOODSTAMPS</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgCMTenderingAmount</TriggerMethod>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>TENDER_FOODSTAMPS</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgEnterTenderedAmount</TriggerMethod>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>TENDER_EBT</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgCMTenderingAmount</TriggerMethod>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>TENDER_EBT</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgEnterTenderedAmount</TriggerMethod>
    </MapEntry>
	<MapEntry>
       <TBCurrentInProgress>TENDER_PAYMENT_EBT</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsReSwipeEBTCard;0;0</MethodParam>
    </MapEntry>
    <MapEntry>
       <TBCurrentInProgress>TENDER_PAYMENT_EBT</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>   
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgEnterTenderedAmount</TriggerMethod>
    </MapEntry>
	
    <!-- POS15989 -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT_EBTFOOD_ZERO_TOTAL</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <!-- POS15989 -->

<!-- POS18049 -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_SELECTED</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT_EBTFOOD_ZERO_TOTAL</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>706;1247; ;0;0</MethodParam>     
    </MapEntry>
<!-- e POS18049 -->

<!-- POS62550 -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_PIP_GENERIC</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT_EBTFOOD_ZERO_TOTAL</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>706;1247; ;0;0</MethodParam>     
    </MapEntry>
<!-- e POS62550 -->

<!-- sotf 9203 rrs -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT</TBCurrentInProgress>
        <POSMessage>ZERO_AMT_ILLEGAL</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>

    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT</TBCurrentInProgress>
        <POSMessage>ZERO_AMT_ILLEGAL</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>EnterEBTRemainingBalance;</MethodParam>
    </MapEntry>
<!-- sotf 9203 rrs -->
	
    <MapEntry>       
        <TBCurrentInProgress>PAYMENT_AMOUNT_NO_CASHBACK</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>PAYMENT_AMOUNT_NO_CASHBACK</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT1</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>PAYMENT_AMOUNT_NO_CASHBACK</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT_EBTFOOD</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>PAYMENT_AMOUNT_NO_CASHBACK</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT_EBTCASH</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>PAYMENT_AMOUNT_NO_CASHBACK</TBCurrentInProgress>
        <POSMessage>SET_REQUEST_FOR_CREDIT1</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>PAYMENT_AMOUNT_NO_CASHBACK</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_NEGATIVE_ITEM</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
		<TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress>
        <POSMessage>NEGATIVE_MEDIA_AT_PAYMENT</POSMessage>
        <TBNewInProgress>TENDER_NEGATIVE_ITEM</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress>
        <POSMessage>NEGATIVE_MEDIA_AT_PAYMENT</POSMessage>
		<TBNewInProgress>TENDER_NEGATIVE_ITEM</TBNewInProgress>
		<TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
        <MethodParam>NegativeMedia;9070</MethodParam>            
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress>
        <POSMessage>NEGATIVE_MEDIA_AT_PAYMENT</POSMessage>
        <TBNewInProgress>TENDER_NEGATIVE_ITEM</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSayPhrase</TriggerMethod>
        <MethodParam>TakeCheckRefundsSlipsToCashier.wma</MethodParam>           
    </MapEntry>
    <!-- SOTF 8105 -->
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>NEGATIVE_MEDIA</POSMessage>
		<TBNewInProgress>TENDER_NEGATIVE_ITEM</TBNewInProgress>
		<TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
        <MethodParam>NegativeMedia;9070</MethodParam>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
        <TriggerMethod>msgSayPhrase</TriggerMethod>
        <MethodParam>TakeCheckRefundsSlipsToCashier.wma</MethodParam>        
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>NEGATIVE_MEDIA_AT_PAYMENT</POSMessage>
		<TBNewInProgress>TENDER_NEGATIVE_ITEM</TBNewInProgress>
		<TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
        <MethodParam>NegativeMedia;9070</MethodParam>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
        <TriggerMethod>msgSayPhrase</TriggerMethod>
        <MethodParam>TakeCheckRefundsSlipsToCashier.wma</MethodParam>        
    </MapEntry>    
    <!--
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>NEGATIVE_MEDIA_AT_PAYMENT</POSMessage>
        <TBNewInProgress>TENDER_NEGATIVE_ITEM</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>NEGATIVE_MEDIA_AT_PAYMENT</POSMessage>
        <TBNewInProgress>TENDER_NEGATIVE_ITEM</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSayPhrase</TriggerMethod>
        <MethodParam>TakeCheckRefundsSlipsToCashier.wma</MethodParam>           
    </MapEntry>
     end sotf 8105 -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_NEGATIVE_ITEM_IP1</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>TENDER_NEGATIVE_ITEM</TBNewInProgress>
		<TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
        <MethodParam>NegativeMedia;9070</MethodParam>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_NEGATIVE_ITEM_IP1</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>TENDER_NEGATIVE_ITEM</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSayPhrase</TriggerMethod>
        <MethodParam>TakeCheckRefundsSlipsToCashier.wma</MethodParam>        
    </MapEntry> 
     <MapEntry>
        <TBCurrentInProgress>TENDER_NEGATIVE_ITEM_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_NEGATIVE_ITEM_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>NEGATIVE_MEDIA_AT_PAYMENT</POSMessage> 
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>TENDER_NEGATIVE_ITEM_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_NEGATIVE_ITEM_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_NEGATIVE_ITEM_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>INVALID_CARD_NUMBER</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F7}</MethodParam>        
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>TENDER_NEGATIVE_ITEM_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>INVALID_CARD_NUMBER</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>
    </MapEntry>  
    <MapEntry>
        <TBCurrentInProgress>TENDER_NEGATIVE_ITEM_RETDN</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
		<TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
        <!-- pos 11273 <TriggerMethod>msgSendSequence</TriggerMethod> -->
        <TriggerMethod>msgCheckedIfDataIsScannedSequence</TriggerMethod>
        <MethodParam>[DATANEEDED_VALUE]{ENTER}</MethodParam>
    </MapEntry>   
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>NEGATIVE_MEDIA_AT_PAYMENT</POSMessage>
        <TBNewInProgress>TENDER_NEGATIVE_ITEM_IP1</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>        
    </MapEntry> 

    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>INVALID_RECEIPT_OG</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>COUPON_ONLY_TRX</POSMessage>
        <TBNewInProgress>COUPON_ONLY_TRX_IP</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>COUPON_ONLY_TRX_IP</TBCurrentInProgress>
        <POSMessage>COUPON_ONLY_TRX</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>        
    </MapEntry>    
    <MapEntry>
        <TBCurrentInProgress>COUPON_ONLY_TRX_IP</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>        
    </MapEntry>    
    <MapEntry>
        <TBCurrentInProgress>COUPON_ONLY_TRX_IP</TBCurrentInProgress>
        <POSMessage>ITEMMENU</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
        <MethodParam>CouponOnlyTrx;9046</MethodParam>
    </MapEntry>
    
    <MapEntry>
        <TBCurrentInProgress>COUPON_ONLY_TRX_IP_RETDN_cAssistMode</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>SUPERVISOR_OPERATOR_MESSAGE</POSMessage>
        <TBNewInProgress>SUPERVISOR_NEEDED</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>SupervisorApproval;</MethodParam>
	<TriggerMethod>msgSetHookProperty</TriggerMethod>   <!-- POS37397 - rrs -->
        <MethodParam>PropMobShopOrderPrompt;0</MethodParam>	<!-- POS37397 - rrs -->
    </MapEntry>
	<!-- start CRD 418158 -->
	<!-- Level 1 (11), press OK to dismiss -->
	<MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>COUPON_CUSTOMER_OVERRIDE_MESSAGE_LVL1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>	
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>COUPON_CUSTOMER_OVERRIDE_MESSAGE_LVL1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>CouponCustomerOverride;;SUMMARYINSTRUCTION=$Custom_[[OG_MsgNum_Prop]]$</MethodParam>    	
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_cOK</TBCurrentInProgress>
        <POSMessage>COUPON_CUSTOMER_OVERRIDE_MESSAGE_LVL1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
		<TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
		<TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>
    </MapEntry>
	<!-- Level 2 to 5 (12 to 15), press CANCEL to dismiss -->
	<MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>COUPON_CUSTOMER_OVERRIDE_MESSAGE_LVL2TO5</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>	
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>COUPON_CUSTOMER_OVERRIDE_MESSAGE_LVL2TO5</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>CouponCustomerOverride;;SUMMARYINSTRUCTION=$Custom_[[OG_MsgNum_Prop]]$</MethodParam>    	
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_cOK</TBCurrentInProgress>
        <POSMessage>COUPON_CUSTOMER_OVERRIDE_MESSAGE_LVL2TO5</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
		<TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
		<TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>
    </MapEntry>
	<!-- Level 7 to 8 (17 to 18), press CANCEL and CLEAR to dismiss -->
	<MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>COUPON_CUSTOMER_OVERRIDE_MESSAGE_LVL7TO8</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>	
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>COUPON_CUSTOMER_OVERRIDE_MESSAGE_LVL7TO8</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>CouponCustomerOverride;;SUMMARYINSTRUCTION=$Custom_[[OG_MsgNum_Prop]]$</MethodParam>    	
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_cOK</TBCurrentInProgress>
        <POSMessage>COUPON_CUSTOMER_OVERRIDE_MESSAGE_LVL7TO8</POSMessage>
        <TBNewInProgress>ITEMIZATION_CLEAR_SUP_PRCSNG</TBNewInProgress>
		<TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}{CLEAR}</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_CLEAR_SUP_PRCSNG</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
		<TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_CLEAR_SUP_PRCSNG</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
		<TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<!-- end CRD 418158 -->	
    <MapEntry>        
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>FREQ_BUYER</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_LOYALTYCARD</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>FREQ_BUYER_ACTIVE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>             
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9010;9011; ;1;1</MethodParam>
    </MapEntry>     
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>FREQ_BUYER_ACTIVE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>             
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9010;9011; ;1;1</MethodParam>           
    </MapEntry>     
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>TM_DISCOUNT_ACTIVE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>             
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9125;9126; ;1;1</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>TM_DISCOUNT_ACTIVE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>             
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9125;9126; ;1;1</MethodParam>
    </MapEntry>    
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>PRICEINQUIRY_MENU</POSMessage>
        <TBNewInProgress>PRICE_INQUIRY_STATE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>PriceInquiry;</MethodParam>        
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>PRICEINQUIRY_MENU</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsPriceInquiryState;1;0</MethodParam>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE_RETDN</TBCurrentInProgress>
        <POSMessage>PRICEINQUIRY_MENU</POSMessage>
        <TBNewInProgress>PRICE_INQUIRY_STATE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE_RETDN</TBCurrentInProgress>
        <POSMessage>PRICEINQUIRY_MENU</POSMessage>
        <TBNewInProgress>PRICE_INQUIRY_STATE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[DATANEEDED_VALUE]{ENTER}</MethodParam>
</MapEntry>



<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE_RETDN</TBCurrentInProgress>
        <POSMessage>PRICE_INQUIRY_DISPLAY</POSMessage>
        <TBNewInProgress>PRICE_INQUIRY_STATE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
</MapEntry>

<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE_RETDN</TBCurrentInProgress>
        <POSMessage>PRICE_INQUIRY_DISPLAY</POSMessage>
        <TBNewInProgress>PRICE_INQUIRY_STATE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[DATANEEDED_VALUE]{ENTER}</MethodParam>
</MapEntry>
<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE_RETDN</TBCurrentInProgress>
        <POSMessage>PRICE_INQUIRY_PRICE_REQ</POSMessage>
        <TBNewInProgress>PRICE_INQUIRY_STATE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
</MapEntry>
<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE_RETDN</TBCurrentInProgress>
        <POSMessage>PRICE_INQUIRY_PRICE_REQ</POSMessage>
        <TBNewInProgress>PRICE_INQUIRY_STATE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[DATANEEDED_VALUE]{ENTER}</MethodParam>
</MapEntry>
<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE_RETDN</TBCurrentInProgress>
        <POSMessage>INVALID_ITEM</POSMessage>
        <TBNewInProgress>PRICE_INQUIRY_STATE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
</MapEntry>
<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE_RETDN</TBCurrentInProgress>
        <POSMessage>INVALID_ITEM</POSMessage>
        <TBNewInProgress>PRICE_INQUIRY_STATE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[DATANEEDED_VALUE]{ENTER}</MethodParam>
</MapEntry>
<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE</TBCurrentInProgress>
        <POSMessage>PRICE_INQUIRY_PRICE_REQ</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>PriceInquiry;;SUMMARYINSTRUCTION=[[PriceInq_Desc_Price_req]]         Price Req. item;</MethodParam>        <!-- POS39476 remove the LF -->
</MapEntry>


<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE</TBCurrentInProgress>
        <POSMessage>PRICE_INQUIRY_DISPLAY</POSMessage>
        <TBNewInProgress>PRICE_INQUIRY_FORMAT_PRICE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgFormatPriceInquiry</TriggerMethod>        
</MapEntry>

<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE</TBCurrentInProgress>
        <POSMessage>PRICE_INQUIRY_DISPLAY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsPriceInquiry;1;0</MethodParam>        
</MapEntry>

<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_FORMAT_PRICE</TBCurrentInProgress>
        <POSMessage>PRICE_INQUIRY_DISPLAY</POSMessage>
        <TBNewInProgress>PRICE_INQUIRY_STATE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>PriceInquiry;;SUMMARYINSTRUCTION=[[PriceInq_Desc]]             [[PriceInq_Price]];</MethodParam>      <!-- POS39476 remove the LF -->  
</MapEntry>


<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE_RETDN_cDone</TBCurrentInProgress>
        <POSMessage>PRICE_INQUIRY_PRICE_REQ</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>       
</MapEntry> 
  
<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE_RETDN_cDone</TBCurrentInProgress>
        <POSMessage>PRICE_INQUIRY_DISPLAY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>       
</MapEntry> 
<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE_RETDN_cDone</TBCurrentInProgress>
        <POSMessage>PRICEINQUIRY_MENU</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>        
</MapEntry> 

<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE_RETDN_cDone</TBCurrentInProgress>
        <POSMessage>PRICEINQUIRY_MENU</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMAttract</MethodParam>        
</MapEntry> 
<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE_RETDN_cDone</TBCurrentInProgress>
        <POSMessage>PRICE_INQUIRY_DISPLAY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMProcessing</MethodParam>        
</MapEntry> 
<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE_RETDN_cDone</TBCurrentInProgress>
        <POSMessage>PRICE_INQUIRY_PRICE_REQ</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMProcessing</MethodParam>        
</MapEntry> 

<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE</TBCurrentInProgress>
        <POSMessage>PRICEINQUIRY_MENU</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>       
</MapEntry> 

<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE</TBCurrentInProgress>
        <POSMessage>INVALID_DEPT_NUM</POSMessage>
        <TBNewInProgress>PRICE_INQUIRY_UNKNOWN</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>PriceInquiry_Unknown;</MethodParam>         
</MapEntry>

<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE</TBCurrentInProgress>
        <POSMessage>INVALID_DEPT_NUM</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>          
</MapEntry>

<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_UNKNOWN</TBCurrentInProgress>
        <POSMessage>DEPARTMENT_NUMBER</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PRICE}{F2}</MethodParam>        
</MapEntry>
<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE</TBCurrentInProgress>
        <POSMessage>DEPARTMENT_NUMBER</POSMessage>
        <TBNewInProgress>PRICE_INQUIRY_UNKNOWN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PRICE}{F2}</MethodParam>        
</MapEntry>

<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE</TBCurrentInProgress>
        <POSMessage>ITEM_UNKNOWN</POSMessage>
        <TBNewInProgress>PRICE_INQUIRY_UNKNOWN</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>PriceInquiry_Unknown;</MethodParam>         
</MapEntry>

<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE</TBCurrentInProgress>
        <POSMessage>ITEM_UNKNOWN</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>          
</MapEntry>

<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE</TBCurrentInProgress>
        <POSMessage>INVALID_ITEM</POSMessage>
        <TBNewInProgress>PRICE_INQUIRY_UNKNOWN</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>PriceInquiry_Unknown;</MethodParam>         
</MapEntry>

<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE</TBCurrentInProgress>
        <POSMessage>INVALID_ITEM</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>          
</MapEntry>

<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_UNKNOWN</TBCurrentInProgress>
        <POSMessage>PRICEINQUIRY_MENU</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>         
</MapEntry>

<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_UNKNOWN_RETDN_cOk</TBCurrentInProgress>
        <POSMessage>PRICEINQUIRY_MENU</POSMessage>
        <TBNewInProgress>PRICE_INQUIRY_STATE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>PriceInquiry;</MethodParam>         
</MapEntry>
<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_UNKNOWN_RETDN_cOk</TBCurrentInProgress>
        <POSMessage>INVALID_ITEM</POSMessage>
        <TBNewInProgress>PRICE_INQUIRY_STATE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>PriceInquiry;</MethodParam>       
</MapEntry>
<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE_RETDN_cDone</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsPriceInquiryState;0;0</MethodParam>        
</MapEntry>
<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE_RETDN_cDone</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMAttract</MethodParam>      
</MapEntry> 

<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_UNKNOWN</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMAttract</MethodParam>        
</MapEntry> 

<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE</TBCurrentInProgress>
        <POSMessage>NEW_ITEM_PROMPT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>    <!-- POS73196/71821 change the return code from TB_COMPLETE_PRINTANDCUT to not print anything -->    
        <TriggerMethod>msgPurgeAllReceipts</TriggerMethod> <!-- POS74992 clean up receipt -->
</MapEntry>

<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE_RETDN_cDone</TBCurrentInProgress>
        <POSMessage>NEW_ITEM_PROMPT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>    <!-- POS73196/71821 change the return code from TB_COMPLETE_PRINTANDCUT to not print anything -->    
        <TriggerMethod>msgPurgeAllReceipts</TriggerMethod>    <!-- POS74992 clean up receipt -->
</MapEntry>

<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMAttract</MethodParam>        
</MapEntry> 

<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_UNKNOWN</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsPriceInquiryState;0;0</MethodParam>       
</MapEntry> 

<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsPriceInquiryState;0;0</MethodParam>        
</MapEntry> 

<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE_RETDN_cDone</TBCurrentInProgress>
        <POSMessage>NO_SALE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>        
</MapEntry>

<MapEntry>
        <TBCurrentInProgress>PRICE_INQUIRY_STATE_RETDN_cDone_RETDN_cDone</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMAttract</MethodParam>             
</MapEntry>

<MapEntry> 
<!--Madz 377685-->
	<TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
	<POSMessage>CASHIER_COUPON_OVERRIDE</POSMessage>
	<TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
	<TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
</MapEntry>
<!-- End -->

    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>GIFT_PHONE_CARD_SALE</POSMessage>
        <TBNewInProgress>ITEMIZATION_PHONE_GIFT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry> 
    <!--SOTF 7044 -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT</TBCurrentInProgress>
        <POSMessage>DUPLICATE_ACTIVATED_CARD</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9266;9026; ;1;1</MethodParam>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>    
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PROCESSING_PHONE_GIFT</TBCurrentInProgress>
        <POSMessage>DUPLICATE_ACTIVATED_CARD</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9266;9026; ;1;1</MethodParam>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>    
    </MapEntry>
    <!-- end 7044 -->
    <!-- SOTF 7701 -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT</TBCurrentInProgress>
        <POSMessage>PRICE_REQUIRED_RETRY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgGiftPhonePriceRetry</TriggerMethod>
        <MethodParam></MethodParam>      
    </MapEntry>
     
    <!-- SOTF 7042 Reloadable Mall Card -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT</TBCurrentInProgress>
        <POSMessage>PRICE_REQUIRED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgGiftPhonePriceEntrySetup</TriggerMethod>     
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT</TBCurrentInProgress>
        <POSMessage>CARD_NEEDS_REACTIVATION</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>     
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>CARD_NEEDS_REACTIVATION</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>     
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT</TBCurrentInProgress>
        <POSMessage>RESUME_GIFT_CARD</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>       
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT_RETDN</TBCurrentInProgress>
        <POSMessage>PRICE_REQUIRED</POSMessage>
        <TBNewInProgress>ITEMIZATION_PHONE_GIFT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[DATANEEDED_VALUE]{ENTER}</MethodParam>
    </MapEntry>
    <!-- POS65108/6300 cell phone 2 step rs -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT</TBCurrentInProgress>
        <POSMessage>CELL_PHONE_2_STEP</POSMessage>
        <TBNewInProgress>ITEMIZATION_CELLPHONE_ASSISTANCE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
        <MethodParam>CellphoneAssistance;9349</MethodParam> 
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_CELLPHONE_ASSISTANCE</TBCurrentInProgress>
        <POSMessage>CELL_PHONE_2_STEP</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_CELLPHONE_ASSISTANCE_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>CELL_PHONE_2_STEP</POSMessage>
        <TBNewInProgress>ITEMIZATION_PHONE_GIFT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>      
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>  
    </MapEntry>

 <!-- POS64823: Added CELL_PHONE_2_STEP so that RAP cashier can scan hard-to-scan activation barcode in assist mode -->
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>CELL_PHONE_2_STEP</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>

    <!-- e POS6300 cell phone 2 step rs -->

    <!-- SOTF 7042 -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT_RETDN_cButton1</TBCurrentInProgress>
        <POSMessage>PRICE_REQUIRED</POSMessage>
        <TBNewInProgress>ITEMIZATION_PHONE_GIFT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
     <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT_RETDN_cButton2</TBCurrentInProgress>
        <POSMessage>PRICE_REQUIRED</POSMessage>
        <TBNewInProgress>ITEMIZATION_PHONE_GIFT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
     <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT_RETDN_cButton3</TBCurrentInProgress>
        <POSMessage>PRICE_REQUIRED</POSMessage>
        <TBNewInProgress>ITEMIZATION_PHONE_GIFT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F3}</MethodParam>
    </MapEntry>
     <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT_RETDN_cButton4</TBCurrentInProgress>
        <POSMessage>PRICE_REQUIRED</POSMessage>
        <TBNewInProgress>ITEMIZATION_PHONE_GIFT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F4}</MethodParam>
    </MapEntry>
     <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT_RETDN_cButton5</TBCurrentInProgress>
        <POSMessage>PRICE_REQUIRED</POSMessage>
        <TBNewInProgress>ITEMIZATION_PHONE_GIFT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F5}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT_RETDN_cGoBack</TBCurrentInProgress>
        <POSMessage>PRICE_REQUIRED</POSMessage>
        <TBNewInProgress>ITEMIZATION_PHONE_GIFT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
    </MapEntry>
    <!-- sotf 7042 -->

    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT</TBCurrentInProgress>
        <POSMessage>PRICE_REQUIRED_INVALID</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>GiftPhonePrice;</MethodParam>      
	</MapEntry>       
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT</TBCurrentInProgress>
        <POSMessage>SWIPE_VOID_CARD_ON_PINPAD</POSMessage>
        <TBNewInProgress>VOIDING_PHONE_GIFT_CARD</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMSwipeCardAsItem</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>SWIPE_VOID_CARD_ON_PINPAD</POSMessage>
        <TBNewInProgress>VOIDING_PHONE_GIFT_CARD</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMSwipeCardAsItem</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>VOIDING_PHONE_GIFT_CARD</TBCurrentInProgress>
        <POSMessage>PROCESSING</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMProcessing</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>VOIDING_PHONE_GIFT_CARD</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>  
    </MapEntry>
<!-- BEGIN PRICE VISUAL VERIFY -->	
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>PRICE_VISUAL_VALIDATE</POSMessage>
	<TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
<!--         
	<TBNewInProgress>PRICE_VERIFY_STATE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
        <MethodParam>PriceVerify;9163</MethodParam>        
-->
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>PRICE_VERIFY_STATE</TBCurrentInProgress>
        <POSMessage>PRICE_VISUAL_VALIDATE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>PRICE_VERIFY_STATE_RETDN_cOK</TBCurrentInProgress>
        <POSMessage>PRICE_VISUAL_VALIDATE</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F8}</MethodParam>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>PRICE_VERIFY_STATE_RETDN_cBTN1</TBCurrentInProgress>
        <POSMessage>PRICE_VISUAL_VALIDATE</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>PRICE_VERIFY_STATE_RETDN_cBTN2</TBCurrentInProgress>
        <POSMessage>PRICE_VISUAL_VALIDATE</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>        
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_AGE</TBCurrentInProgress>
        <POSMessage>PRICE_VISUAL_VALIDATE</POSMessage>
        <TBNewInProgress>PRICE_VERIFY_STATE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
        <MethodParam>PriceVerify;9163</MethodParam>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_cOK</TBCurrentInProgress>
        <POSMessage>PRICE_VISUAL_VALIDATE</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F8}</MethodParam>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_cBTN1</TBCurrentInProgress>
        <POSMessage>PRICE_VISUAL_VALIDATE</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_cBTN2</TBCurrentInProgress>
        <POSMessage>PRICE_VISUAL_VALIDATE</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>        
    </MapEntry>
<!-- END PRICE VISUAL VERIFY -->
    <MapEntry><!--TAR 367322-->
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>DELAYED_OVERRIDE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
        <TriggerMethod>msgDontReturnTBNeedAsstIfInAsst</TriggerMethod>
    </MapEntry>
    <!-- POS41473: Added SERIAL_NUMBER_ENTRY so that RAP cashier can enter hard-to-scan Apple product serial number in assist mode -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>SERIAL_NUMBER_ENTRY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <!-- POS52017: Added PRICE_REQUIRED_COUPON so that cashier can enter coupon amount in assist mode -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>PRICE_REQUIRED_COUPON</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>PRICE_REQUIRED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <!-- Even though we return TB_NEEDPRICE, SSF passes the buck to RapDataNeeded -->
        <!-- So we expect to pick up using the Data Needed handler -->
        <TBReturnCode>TB_NEEDPRICE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_AGE</TBCurrentInProgress>
        <POSMessage>PRICE_REQUIRED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_NEEDPRICE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>PRICE_REQUIRED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_NEEDPRICE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN</TBCurrentInProgress>
        <POSMessage>PRICE_REQUIRED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[DATANEEDED_VALUE]{ENTER}</MethodParam>
    </MapEntry>
	<!--Start TAR392765-->
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<!--TAR392765 End-->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>PRICE_REQUIRED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_cGoBack</TBCurrentInProgress>
        <POSMessage>PRICE_REQUIRED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_NEEDPRICE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>PRICE_REQUIRED_INVALID</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>OVER_MAXIMUM_CARD_RECHARGE_AMOUNT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>SWIPED_PHONE_GIFT_EXIT</TBCurrentInProgress>
        <POSMessage>SWIPE_CARD_ON_PINPAD</POSMessage>
        <TBNewInProgress>ITEMIZATION_WAIT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>

<!-- POS20084 rrs -->
    <MapEntry>
        <TBCurrentInProgress>SWIPED_PHONE_GIFT_EXIT</TBCurrentInProgress>
        <POSMessage>SWIPE_VOID_CARD_ON_PINPAD</POSMessage>
        <TBNewInProgress>ITEMIZATION_WAIT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
<!-- e POS20084 rrs -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_WAIT</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT</TBCurrentInProgress>
        <POSMessage>SWIPE_CARD_ON_PINPAD</POSMessage>
        <TBNewInProgress>ITEMIZATION_SWIPE_NEEDED</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMSwipeCardAsItem</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>SWIPE_CARD_ON_PINPAD</POSMessage>
        <TBNewInProgress>ITEMIZATION_SWIPE_NEEDED</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMSwipeCardAsItem</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_SWIPE_NEEDED</TBCurrentInProgress>
        <POSMessage>PHONE_GIFT_CARD_SWIPED</POSMessage>
        <TBNewInProgress>ITEMIZATION_PROCESSING_PHONE_GIFT</TBNewInProgress>
        <!-- POS 15769 -->
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>CardProcessing;</MethodParam>
    </MapEntry>

<!-- POS 15769 -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PROCESSING_PHONE_GIFT</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
	<TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>
    </MapEntry>
<!-- e POS 15769 -->

    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_SWIPE_NEEDED</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_SWIPE_NEEDED</TBCurrentInProgress>
        <POSMessage>SWIPE_CARD_ON_PINPAD</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>VOIDING_PHONE_GIFT_CARD</TBCurrentInProgress>
        <POSMessage>SWIPE_CARD_ON_PINPAD</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>		
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PROCESSING_PHONE_GIFT</TBCurrentInProgress>
        <POSMessage>PROCESSING</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PROCESSING_PHONE_GIFT</TBCurrentInProgress>
        <POSMessage>MESSAGE_300_DENIED</POSMessage>
        <TBNewInProgress>ITEMIZATION_PHONE_GIFT_DENIED</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgMessage300</TriggerMethod>
        <MethodParam>1</MethodParam>
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>MESSAGE_300</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
	</MapEntry>	
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>EBT_ENDORSEMENT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgEBTSlipPrint</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>EBT_ENDORSEMENT</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgEBTSlipPrint</TriggerMethod>
    </MapEntry>
    <!-- SOTF 7261 -->
   <!-- <MapEntry> this has been replaced by new DL scanning implementation below
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>AGE_DELAY_STOP_GAP</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[Cancel]</MethodParam>
    </MapEntry> -->
	<MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>AGE_DELAY_STOP_GAP</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
      	<TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>RESTRICTED_ITEM_AGE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgResendDOB</TriggerMethod>        
    </MapEntry>
    <!--sotf -->
	<MapEntry> <!-- TAR346246-->
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>EBT_ENDORSEMENT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgEBTSlipPrint</TriggerMethod>
    </MapEntry>
	<MapEntry> <!-- TAR346246-->
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>EBT_ENDORSEMENT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgEBTSlipPrint</TriggerMethod>
    </MapEntry>

  
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>MESSAGE_300_DENIED</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgMessage300</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress>
        <POSMessage>MESSAGE_300_DENIED</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
   <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>MESSAGE_8_5_ABOVE_LIMIT</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_TENDERDECLINED</TBReturnCode>
        <TriggerMethod>msgMessage300</TriggerMethod>
    </MapEntry>

<!-- POS 42533 RRS -->
   <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>MESSAGE_300_2_OTC_DENIED</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_TENDERDECLINED</TBReturnCode>
        <TriggerMethod>msgMessage300</TriggerMethod>
    </MapEntry>
   <MapEntry>
        <TBCurrentInProgress>TENDER_SELECTED</TBCurrentInProgress>
        <POSMessage>MESSAGE_300_2_OTC_DENIED</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_TENDERDECLINED</TBReturnCode>
        <TriggerMethod>msgMessage300</TriggerMethod>
    </MapEntry>
<!--  E POS42533 -->

	<!-- start TAR324150 -->
   <MapEntry>
        <TBCurrentInProgress>TENDER_SIG_TIMEOUT</TBCurrentInProgress>
        <POSMessage>VERIFY_SIGNATURE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>TENDER_CREDIT</TBCurrentInProgress>
        <POSMessage>VERIFY_SIGNATURE</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<!-- end TAR324150 -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>VERIFY_SIGNATURE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
	<!-- <TriggerMethod>msgSetFLState</TriggerMethod> 
        <MethodParam>SMCardProcessing</MethodParam> -->  <!-- this is necessary for streamline elect pmt -->
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_CUSTOMER_REQUESTED_CREDIT</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[[ForStreamlineEPaymentCredit]]</MethodParam>
    </MapEntry>
    <!-- <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_CREDIT_IP</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry> -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_CUSTOMER_REQUESTED_CREDIT</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F6}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_CUSTOMER_REQUESTED_CREDIT</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
	<TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsRequestForCredit;1;0</MethodParam>       
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_CUSTOMER_REQUESTED_CREDIT</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
	<TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>       
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_CREDIT_IP</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F3}</MethodParam>
    </MapEntry>
    <!-- +SOTF6714
    <MapEntry>
        <TBCurrentInProgress>TENDER_SELECTED</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsRequestForCredit;1;0</MethodParam> 
    </MapEntry>	
    <MapEntry>
        <TBCurrentInProgress>TENDER_SELECTED</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
       	<TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>  
    </MapEntry>	
    -SOTF6714 -->
    <MapEntry> 
        <TBCurrentInProgress>TENDER_SELECTED</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
	<TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_CREDIT_IP</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>	
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PROCESSING_PHONE_GIFT</TBCurrentInProgress>
        <POSMessage>MESSAGE_300_APPROVED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PROCESSING_PHONE_GIFT</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT_DELAY</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9035;9026; ;1;1</MethodParam>
    </MapEntry>
		<!--TAR391233 start-->
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT_DELAY</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>	
		<!--TAR391233 end-->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PROCESSING_PHONE_GIFT</TBCurrentInProgress>
        <POSMessage>MESSAGE_300_2_APPROVED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PROCESSING_PHONE_GIFT</TBCurrentInProgress>
        <POSMessage>MESSAGE_300_2_APPROVED</POSMessage>
        <TBNewInProgress>ITEMIZATION_PHONE_GIFT_DELAY</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>

    <!--Since this has no EFT code is not a message_300_approved then assume it's a denial -->  
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PROCESSING_PHONE_GIFT</TBCurrentInProgress>
        <POSMessage>MESSAGE_300</POSMessage>
        <TBNewInProgress>ITEMIZATION_PHONE_GIFT_DENIED</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgMessage300</TriggerMethod>
        <MethodParam>1</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT_DENIED</TBCurrentInProgress>
        <POSMessage>SUPERVISOR_ID</POSMessage>
        <TBNewInProgress>ITEMIZATION_PHONE_GIFT_FINISHED</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>PhoneGiftAproval;</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT_FINISHED_RETDN_cAssistMode</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT_DENIED</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT_DENIED</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9023;9018; ;1;1</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ON_RESUME_DISPLAY_REBATE</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgOnRebateItem</TriggerMethod>
        <MethodParam>1</MethodParam>
    </MapEntry> 	
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>PRICE_DIFF_OVER_LIMIT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>NEED_BIRTH_DATE_16</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>ITEM_NEEDQTY</POSMessage>
        <TBNewInProgress>ITEMIZATION_QTY</TBNewInProgress>
        <TBReturnCode>TB_NEEDQUANTITY</TBReturnCode>
    </MapEntry>
   <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_QTY</TBCurrentInProgress>
        <POSMessage>ITEM_NEEDQTY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <!--<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[ItemQty]{ENTER}</MethodParam>-->
    </MapEntry>
    <!-- SOTF8078+ -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_QTY</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <!-- SOTF8078- -->
	<!-- start CRD140001 -->
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>ITEM_NEEDQTY</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequenceWithWaits</TriggerMethod>
        <MethodParam>0;[ItemQty]{ENTER};0</MethodParam>
    </MapEntry>
	<!-- end CRD140001 -->	
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_QTY_SMScanAndBag</TBCurrentInProgress>
        <POSMessage>ITEM_NEEDQTY</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
    </MapEntry>
	 <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_WEIGHTITEM_NA</TBCurrentInProgress>
        <POSMessage>WEIGHT_REQUIRED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
		<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
		<TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9393;9394; ;1;1</MethodParam>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>WEIGHT_REQUIRED</POSMessage>
        <TBNewInProgress>ITEMIZATION_WEIGHT</TBNewInProgress>
        <TBReturnCode>TB_NEEDWEIGHT</TBReturnCode>
    </MapEntry>  
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_AGE</TBCurrentInProgress>
        <POSMessage>WEIGHT_REQUIRED</POSMessage>
        <TBNewInProgress>ITEMIZATION_WEIGHT</TBNewInProgress>
        <TBReturnCode>TB_NEEDWEIGHT</TBReturnCode>
    </MapEntry>    
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>WEIGHT_REQUIRED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendWeight</TriggerMethod>
        <MethodParam>[ItemWeight]</MethodParam>
    </MapEntry>
    
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>TARE_REQUIRED</POSMessage>
        <TBNewInProgress>ITEMIZATION_TARE</TBNewInProgress>
        <TBReturnCode>TB_NEEDTARE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>TARE_REQUIRED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[ItemTare]{ENTER}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>VOID_ITEM_WEIGHT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
     <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>ELECTRONIC_WARRANTY_REQUIRED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
        <!--<TriggerMethod>msgDataNeeded</TriggerMethod>
            <MethodParam>WarrantySerialNum</MethodParam>-->
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_WEIGHT_SMScanAndBag</TBCurrentInProgress>
        <POSMessage>WEIGHT_REQUIRED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequenceWithWaits</TriggerMethod>
        <MethodParam>0;{ITEM};250</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_WEIGHT</TBCurrentInProgress>
        <POSMessage>WEIGHT_OUT_OF_RANGE</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>

<!-- POS15745 -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>WEIGHT_OUT_OF_RANGE</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
<!-- e POS15745 -->

    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>ERROR_CONTEXT_CLEAR</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{CLEAR}</MethodParam>
    </MapEntry>   
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>ERROR_CONTEXT_CLEAR</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgResetToLastPOSState</TriggerMethod>
    </MapEntry>   
    <!-- ************************************************************************ -->
    <!-- FULL IMPLEMENTATION OF TB_ENTERTENDERSTATE_IN_DRIVE_FL (START ) -->
    <!-- ************************************************************************ -->
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>CM_PROMO_LINKEDITEM</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>MISCMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>LINKED_ITEM</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>
    </MapEntry>    
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>DUMMY_DISPLAY_AFTER_NSC4</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>PROCESSING</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>
    </MapEntry> 
    <MapEntry>       
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>TENDER_ACCEPTED</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>NEGATIVE_MEDIA_AT_PAYMENT</POSMessage>
        <TBNewInProgress>TENDER_NEGATIVE_ITEM</TBNewInProgress>
		<TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
        <MethodParam>NegativeMedia;9070</MethodParam>        
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>NEGATIVE_MEDIA_AT_PAYMENT</POSMessage>
        <TBNewInProgress>TENDER_NEGATIVE_ITEM</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>        
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>FREQ_BUYER_ACTIVE</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>             
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9010;9011; ;1;1</MethodParam>
    </MapEntry>     
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>TM_DISCOUNT_ACTIVE</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>        
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9125;9126; ;1;1</MethodParam>
    </MapEntry>     
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>EBT_ENDORSEMENT</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgEBTSlipPrint</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>
    </MapEntry>
<!-- sotf 8908 tracfone -->
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>INVALID_CARD_NUMBER</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F3}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>INVALID_CARD_NUMBER2</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
    <MethodParam>{F2}</MethodParam>
    </MapEntry>
     <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>INVALID_CARD_NUMBER2</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9044;9043; ;0;0</MethodParam>
    </MapEntry>
<!-- E sotf 8908 tracfone -->
<!--
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>INVALID_CARD_NUMBER</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9044;9043; ;0;0</MethodParam>
    </MapEntry>
-->
    <MapEntry>       
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>INVALID_TENDER_2</POSMessage>
        <TBNewInProgress>TENDER_RESET</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>EFT_DENIED_DFLT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
    <!-- Start CRD 354157 ACS bug fixed and will now go to ITEMMENU_DK1 after TMD_CARD_SCANNED
				Old Comment : (bug in acs will not send DK after both TMD & Guest card have been scanned - 
                leaving us stuck in GUEST_CARD_SCANNED or TMD_CARD_SCANNED instead of 
                ITEMMENU_DK1) -->
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>TMD_CARD_SCANNED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>  
    </MapEntry>
	<!-- End CRD 354157 -->
    
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>SPENT_DISPLAY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
	</MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>ERROR_PIN_INPUT</POSMessage>
        <TBNewInProgress>TENDER_ERR_PIN</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>ErrorPin;</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>WIC_BALANCE_EXCEEDED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgHandleWicBalanceExceeded</TriggerMethod>
    </MapEntry>
	<!-- start 106622 TMD not displayed on ereceipt -->
	<MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>TMD_DISCOUNT_PERCENT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>Team Member Discount Accepted. Rate=[[TMDDiscountPercent]]%%
		[[TMDMemberName]]     ACCT# [[TMDMemberNumber]]</MethodParam>        
    </MapEntry>	
	<!-- end 106622 TMD not displayed on ereceipt -->	
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL_RETDN_cYES</TBCurrentInProgress>
        <POSMessage>WIC_BALANCE_EXCEEDED</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[Cancel]</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL_RETDN_cNO</TBCurrentInProgress>
        <POSMessage>WIC_BALANCE_EXCEEDED</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <!-- ************************************************************************ -->
    <!-- FULL IMPLEMENTATION OF TB_ENTERTENDERSTATE_IN_DRIVE_FL (END)       -->
    <!-- ************************************************************************ -->
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK2</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>INVALID_CARD_NUMBER</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
    <MethodParam>{F7}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>INVALID_CARD_NUMBER</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9044;9043; ;0;0</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>POS_TRXEND</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_OUT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_OUT</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_OUT</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_OUT</TBCurrentInProgress>
        <POSMessage>POS_TRXEND</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_OUT</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_OUT</TBCurrentInProgress>
        <POSMessage>NEW_ITEM_PROMPT</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_OUT</TBCurrentInProgress>
        <POSMessage>TRXMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <!-- POS BUG (Start), when resuming a blank transaction cannot tender 0 to exit and cannot cancel transaction -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1_NOCASH</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
	<MapEntry> 
		<TBCurrentInProgress>TENDER_CASH_WAIT_PAYMENT</TBCurrentInProgress> 
		<POSMessage>PAYMENTMENU_DK1_NOCASH</POSMessage> 
		<TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress> 
		<TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode> 
	</MapEntry>
    <!-- POS BUG (End) when resuming a blank transaction cannot tender 0 to exit and cannot cancel transaction -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>TENDER_SELECTED</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{CASH}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>
    </MapEntry>  
	<MapEntry>
        <TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress>
        <POSMessage>DUMMY_DISPLAY_AFTER_NSC4</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>
    </MapEntry>    
	<MapEntry>
        <TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress>
        <POSMessage>NSC4_SCANNED</POSMessage>
        <TBNewInProgress>TENDER_SELECTED</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>
    </MapEntry>

<!-- POS189114 -->
<MapEntry>
        <TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON_ACTIVE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>
    </MapEntry>
<!-- e POS189114 -->
	<MapEntry>
        <!-- the customer could be swipe the card and insert cash at the same time -->
        <TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>
        <TBNewInProgress>TENDER_SELECTED</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}{CASH}</MethodParam>
    </MapEntry>
	<!-- TAR 370633 Begin -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress>
        <POSMessage>TENDER_ACCEPTED</POSMessage>
        <TBNewInProgress>TENDER_SELECTED</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{CASH}</MethodParam>
    </MapEntry>
	<MapEntry> <!-- POS293087 aab -->
		<TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress> 
		<POSMessage>WAITING_ON_PINPAD_ENTRY</POSMessage> 
		<TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress> 
		<TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F8}</MethodParam>  		
	</MapEntry>
	<MapEntry> <!-- TAR 366526 begin -->
		<TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress> 
		<POSMessage>WAITING_ON_PINPAD4</POSMessage> 
		<TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress> 
		<TBReturnCode>TB_IGNORE</TBReturnCode> 		
	</MapEntry>
	
	<!-- TAR 370633 End -->
	<MapEntry> <!-- TAR 366526 begin -->
		<TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress> 
		<POSMessage>WAITING_ON_PINPAD</POSMessage> 
		<TBNewInProgress>TENDER_CASH_WAIT_PAYMENT</TBNewInProgress> 
		<TBReturnCode>TB_IGNORE</TBReturnCode> 
		<TriggerMethod>msgSendSequence</TriggerMethod> 
		<MethodParam>{F8}</MethodParam> 
	</MapEntry> 
	<MapEntry> 
		<TBCurrentInProgress>TENDER_CASH_WAIT_PAYMENT</TBCurrentInProgress> 
		<POSMessage>PAYMENTMENU_DK1</POSMessage> 
		<TBNewInProgress>TENDER_SELECTED</TBNewInProgress> 
		<TBReturnCode>TB_IGNORE</TBReturnCode> 
		<TriggerMethod>msgSendSequence</TriggerMethod> 
		<MethodParam>{CASH}</MethodParam> 
	</MapEntry> <!-- TAR 366526 end -->    

        <!-- POS50538 50539 OTC Tender rrs -->
        <MapEntry>       
        	<TBCurrentInProgress>TENDER_CREDIT</TBCurrentInProgress>
        	<POSMessage>OTC_TENDER_SELECTED</POSMessage>
       	 <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
     	<TBReturnCode>TB_IGNORE</TBReturnCode>
	<TriggerMethod>msgSendSequence</TriggerMethod>
                <MethodParam>{F3}</MethodParam>
         </MapEntry>
        <MapEntry>       
        	<TBCurrentInProgress>TENDER_DEBIT</TBCurrentInProgress>
        	<POSMessage>OTC_TENDER_SELECTED</POSMessage>
       	 <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
     	<TBReturnCode>TB_IGNORE</TBReturnCode>
	<TriggerMethod>msgSendSequence</TriggerMethod>
                <MethodParam>{F3}</MethodParam>
         </MapEntry>   
        <MapEntry>       
        	<TBCurrentInProgress>TENDER_EBT</TBCurrentInProgress>
        	<POSMessage>OTC_TENDER_SELECTED</POSMessage>
       	 <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
     	<TBReturnCode>TB_IGNORE</TBReturnCode>
	<TriggerMethod>msgSendSequence</TriggerMethod>
                <MethodParam>{F3}</MethodParam>
         </MapEntry>   
        <MapEntry>       
        	<TBCurrentInProgress>TENDER_FOODSTAMPS</TBCurrentInProgress>
        	<POSMessage>OTC_TENDER_SELECTED</POSMessage>
       	 <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
     	<TBReturnCode>TB_IGNORE</TBReturnCode>
	<TriggerMethod>msgSendSequence</TriggerMethod>
                <MethodParam>{F3}</MethodParam>
         </MapEntry>   
        <MapEntry>       
        	<TBCurrentInProgress>TENDER_GIFTCARD</TBCurrentInProgress>
        	<POSMessage>OTC_TENDER_SELECTED</POSMessage>
       	 <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
     	<TBReturnCode>TB_IGNORE</TBReturnCode>
	<TriggerMethod>msgSendSequence</TriggerMethod>
                <MethodParam>{F3}</MethodParam>
         </MapEntry>   
         <!-- e POS50538 50539 OTC Tender rrs -->

    <MapEntry>
        <!-- TENDER_CREDIT credit flapi tender -->
        <TBCurrentInProgress>TENDER_CREDIT</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>TENDER_SELECTED</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F3}</MethodParam>
    </MapEntry>
    <MapEntry>
        <!-- TENDER_DEBIT debit flapi tender -->
        <TBCurrentInProgress>TENDER_DEBIT</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>TENDER_SELECTED</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F3}</MethodParam>
    </MapEntry>
    <MapEntry>
        <!-- TENDER_EBT debit flapi tender -->
        <TBCurrentInProgress>TENDER_EBT</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>TENDER_SELECTED</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F3}</MethodParam>
    </MapEntry>
    <MapEntry>
        <!-- TENDER_FOODSTAMPS debit flapi tender -->
        <TBCurrentInProgress>TENDER_FOODSTAMPS</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>TENDER_SELECTED</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F3}</MethodParam>
    </MapEntry>
    <MapEntry>
        <!-- TENDER_GIFTCARD debit flapi tender -->
        <TBCurrentInProgress>TENDER_GIFTCARD</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>TENDER_SELECTED_GIFTCARD</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F3}</MethodParam>
    </MapEntry>
	<MapEntry>
        <!-- TENDER_SELECTED Already -->
        <TBCurrentInProgress>TENDER_SELECTED</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_SELECTED_GIFTCARD</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F7}</MethodParam>
    </MapEntry>
    <!--reset tender if we go back to payment menu -->
    <MapEntry>        
        <TBCurrentInProgress>TENDER_EBT</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <!-- <TriggerMethod>msgDetermineIfTenderResetNeeded</TriggerMethod> -->
    </MapEntry>
    <MapEntry>        
        <TBCurrentInProgress>TENDER_FOODSTAMPS</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <!-- <TriggerMethod>msgDetermineIfTenderResetNeeded</TriggerMethod> --> 
    </MapEntry>
    <MapEntry>        
        <TBCurrentInProgress>TENDER_GIFTCARD</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <!-- <TriggerMethod>msgDetermineIfTenderResetNeeded</TriggerMethod> --> 
    </MapEntry>
    <MapEntry>        
        <TBCurrentInProgress>TENDER_CREDIT</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <!-- <TriggerMethod>msgDetermineIfTenderResetNeeded</TriggerMethod> --> 
    </MapEntry>
    <MapEntry>        
        <TBCurrentInProgress>TENDER_DEBIT</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <!-- <TriggerMethod>msgDetermineIfTenderResetNeeded</TriggerMethod> --> 
    </MapEntry>
    <MapEntry>
        <!-- TENDER_CREDIT credit flapi tender -->
        <TBCurrentInProgress>TENDER_CREDIT</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>
    </MapEntry>
    <MapEntry>
        <!-- TENDER_DEBIT debit flapi tender -->
        <TBCurrentInProgress>TENDER_DEBIT</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>
    </MapEntry> 
    <MapEntry>       
        <TBCurrentInProgress>TENDER_SELECTED</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgCMTenderingAmount</TriggerMethod>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>TENDER_SELECTED</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgEnterTenderedAmount</TriggerMethod>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>TENDER_SELECTED</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT_EBTFOOD</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgEnterTenderedAmount</TriggerMethod>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>TENDER_SELECTED</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT_EBTCASH</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgEnterTenderedAmount</TriggerMethod>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>PIN_REQUIRED_2</POSMessage>
        <TBNewInProgress>TENDER_RESET</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress></TBCurrentInProgress>
        <POSMessage>PIN_REQUIRED</POSMessage>
        <TBNewInProgress>TENDER_RESET</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>INVALID_TENDER_2</POSMessage>
        <TBNewInProgress>TENDER_RESET</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry> 
    <MapEntry>       
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>INVALID_TENDER_2</POSMessage>
        <TBNewInProgress>TENDER_RESET</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>INVALID_TENDER</POSMessage>
        <TBNewInProgress>TENDER_RESET</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry> 
    <MapEntry>       
        <TBCurrentInProgress>TENDER_RESET</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>PROCESSING</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry> 
    <MapEntry>       
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT_EBTFOOD</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry> 
    <MapEntry>       
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT_EBTCASH</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>ACCOUNT_NUMBER_ENTRY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    
    <MapEntry>
        <!-- this may be used with credit to play a "sign signature pad audio" -->
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>OPERATOR_PROMPT_APPROVED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>MESSAGE_449</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_TENDERDECLINED</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>WIC_BALANCE_EXCEEDED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgHandleWicBalanceExceeded</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_RETDN_cYES</TBCurrentInProgress>
        <POSMessage>WIC_BALANCE_EXCEEDED</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[Cancel]</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_RETDN_cNO</TBCurrentInProgress>
        <POSMessage>WIC_BALANCE_EXCEEDED</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_TENDER_CASH</TBCurrentInProgress>
        <POSMessage>SERVICE_DESK_BARCODE_REQUIRED</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>SERVICE_DESK_BARCODE_REQUIRED</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>DISABLE_MORE_BUTTON_DEPTMENU</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>DUMMY_DISPLAY_AFTER_NSC4</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_RETDN_cAssistMode</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>SERVICE_DESK_BARCODE_REQUIRED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
        <TriggerMethod>msgDontReturnTBNeedAsstIfInAsst</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>FMS_ITEM_MISSING</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>    
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>FMS_ITEM_MISSING</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAddLineToRAP</TriggerMethod>
        <MethodParam>[[OG_Guidance_Prop]]</MethodParam>
    </MapEntry>    
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>MESSAGE_300_2_DENIED</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_TENDERDECLINED</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
    <!-- <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>ZERO_AMT_ILLEGAL</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry> -->
  <!-- (+)POS297522 -->
  <MapEntry>
    <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
    <POSMessage>ZERO_AMT_ILLEGAL</POSMessage>
    <TBNewInProgress>TB_TENDER_PAYMENT_ZERO_ILLEGAL</TBNewInProgress>
    <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
    <TriggerMethod>msgDataNeeded</TriggerMethod>
    <MethodParam>ZeroAmountIllegal;</MethodParam>
  </MapEntry>

  <MapEntry>
    <TBCurrentInProgress>TB_TENDER_PAYMENT_ZERO_ILLEGAL_RETDN_cOk</TBCurrentInProgress>
    <POSMessage>ZERO_AMT_ILLEGAL</POSMessage>
    <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
    <TBReturnCode>TB_IGNORE</TBReturnCode>
    <TriggerMethod>msgSendSequence</TriggerMethod>
    <MethodParam>{F2}</MethodParam>
  </MapEntry>
  <!-- (-)POS297522 -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_SIG_TIMEOUT</TBCurrentInProgress>        
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>     
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_SIG_TIMEOUT</TBCurrentInProgress>        
        <POSMessage>TENDER_ACCEPTED</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>      
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_SIG_TIMEOUT</TBCurrentInProgress>        
        <POSMessage>EFT_COMPLETED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>EFTTimeout;</MethodParam>      
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_SIG_TIMEOUT_RETDN_cAssistMode</TBCurrentInProgress>        
        <POSMessage>EFT_COMPLETED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
	 <!-- POS275803 aab -->
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>EMV_CANCEL_FROM_DEVICE</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
    <!-- END POS275803-->
    <MapEntry>
        <TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress>
        <POSMessage>MESSAGE_300</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <!-- MESSAGE 300 can be anything: approved/declined/press f2/no press.... -->
        <!-- call a handler to figure it out-->
        <POSMessage>MESSAGE_300</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgMessage300</TriggerMethod>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>EFT_DENIED_DFLT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>CALL_REFERRAL</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>     
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>EFT_DENIED_DFLT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <!-- this is when insufficient re-occurred -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT</TBCurrentInProgress>
        <POSMessage>MESSAGE_300</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgMessage300</TriggerMethod>
    </MapEntry>
    <!-- +TAR 398031: Added explicit messge for EBT_INSUFFICIENT_FUND 
         because an entry was previously added for TENDER_PAYMENT_EBT/cPOS_ANY
         which just ignores the message and overrides the group matching -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT</TBCurrentInProgress>
        <POSMessage>EBT_INSUFFICIENT_FUND</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgMessage300</TriggerMethod>
    </MapEntry>
    <!-- -TAR398031 -->    
    <!-- disply insufficient fund -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT_BALANCE</TBCurrentInProgress>
        <POSMessage>PROMPT_APPLY_EBT_BALANCE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>EBTInsufficientFund;</MethodParam>
    </MapEntry>
    <!-- sometimes pos give pamentmenu_dk1 again while standby on insufficient prompt -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT_BALANCE</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>  
    </MapEntry>

<!-- POS40289 rrs -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT_RETDN_cCancel</TBCurrentInProgress>
        <POSMessage>PROMPT_APPLY_EBT_BALANCE</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT_RETDN_cCancel</TBCurrentInProgress>
        <POSMessage>PROMPT_APPLY_EBT_BALANCE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode> 
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsEBTTenderInsufficient;0;1</MethodParam>      
    </MapEntry>
    <!-- Handle the cancel button when customer swiping the card in the YES or NO screen -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT_BALANCE_RETDN_cCancel</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
	<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F7}</MethodParam>
	<TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsEBTTenderInsufficient;0;1</MethodParam>        
    </MapEntry>	 
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT_BALANCE_RETDN_cCancel</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
	<TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>        
    </MapEntry>	
<!-- e POS40289 rrs -->
  <!-- Go back to finish after pressing no button -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT_BALANCE_RETDN_cNO</TBCurrentInProgress>
        <POSMessage>PROMPT_APPLY_EBT_BALANCE</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT_BALANCE_RETDN_cNO</TBCurrentInProgress>
        <POSMessage>PROMPT_APPLY_EBT_BALANCE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode> 
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsEBTTenderInsufficient;0;1</MethodParam>      
    </MapEntry>
   <!-- prompt for keying the remaining balance -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT_BALANCE_RETDN_cYES</TBCurrentInProgress>
        <POSMessage>PROMPT_APPLY_EBT_BALANCE</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT_EBT</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>EnterEBTRemainingBalance;</MethodParam>
    </MapEntry>
   <!-- this is if card has been swipe without pressing yes -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT_BALANCE</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>EnterEBTRemainingBalance;</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT_BALANCE_RETDN</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT_EBT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>EBTBalance;[DATANEEDED_VALUE];0</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT_BALANCE_RETDN</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsReSwipeEBTCard;1;0</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT_BALANCE_RETDN</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>ReSwipeEBTCard;</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT_BALANCE_RETDN</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F3}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT_RETDN</TBCurrentInProgress>
        <POSMessage>PROMPT_APPLY_EBT_BALANCE</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT_EBT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>EBTBalance;[DATANEEDED_VALUE];0</MethodParam>
    </MapEntry>
	<MapEntry>
       <TBCurrentInProgress>TENDER_PAYMENT_EBT_RETDN</TBCurrentInProgress>
        <POSMessage>PROMPT_APPLY_EBT_BALANCE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsReSwipeEBTCard;1;0</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT_RETDN</TBCurrentInProgress>
        <POSMessage>PROMPT_APPLY_EBT_BALANCE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>ReSwipeEBTCard;</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F3}</MethodParam>
<!-- POS18539 -->
	<TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsEBTTenderInsufficient;0;1</MethodParam>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMCardProcessing</MethodParam>
<!-- e POS18539 -->
    </MapEntry>
<!-- POS18539 -->
     <MapEntry>
        <!-- Handle Situation where Customer in the EBT Balance and swipes an invalid card (phone card)" -->
        <TBCurrentInProgress>TENDER_PAYMENT_EBT</TBCurrentInProgress>
        <POSMessage>INVALID_CARD_NUMBER</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F7}</MethodParam>
    </MapEntry>
     <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT</TBCurrentInProgress>
        <POSMessage>INVALID_CARD_NUMBER</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9044;9043; ;0;0</MethodParam>
    </MapEntry>
<!-- e POS18539 -->

    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT_EBTFOOD</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[EBTBalance]{ENTER}</MethodParam>
    </MapEntry>    
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT_EBTCASH</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[EBTBalance]{ENTER}</MethodParam>
    </MapEntry>
    <MapEntry>
       <TBCurrentInProgress>TENDER_PAYMENT_EBT</TBCurrentInProgress>
        <POSMessage>ACCOUNT_NUMBER_ENTRY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsReSwipeEBTCard;1;0</MethodParam>
    </MapEntry>
   <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT</TBCurrentInProgress>
        <POSMessage>ACCOUNT_NUMBER_ENTRY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>ReSwipeEBTCard;</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT_CANCEL</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsEBTTenderInsufficient;0;1</MethodParam>  
       <!--  <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam> -->
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT</TBCurrentInProgress>
        <POSMessage>TENDER_ACCEPTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_TENDERACCEPTED</TBReturnCode>
        <TriggerMethod>msgDecideIfTenderAccepted</TriggerMethod>       
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT</TBCurrentInProgress>
        <POSMessage>TENDER_ACCEPTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode> 
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsEBTTenderInsufficient;0;1</MethodParam>      
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>EBT_INSUFFICIENT_ENDORSEMENT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgEBTSlipPrint</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT</TBCurrentInProgress>
        <POSMessage>PROCESSING</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>CardProcessing;</MethodParam>
    </MapEntry>
	<!-- SOTF 8767 RRS -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT</TBCurrentInProgress>
        <POSMessage>WIC_BALANCE_EXCEEDED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgHandleWicBalanceExceeded</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT_RETDN_cYES</TBCurrentInProgress>
        <POSMessage>WIC_BALANCE_EXCEEDED</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT_EBT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[Cancel]</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT_RETDN_cNO</TBCurrentInProgress>
        <POSMessage>WIC_BALANCE_EXCEEDED</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT_EBT</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry> 
	<!-- E SOTF 8767 RRS -->
 
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>TENDER_ACCEPTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_TENDERACCEPTED</TBReturnCode>
        <TriggerMethod>msgDecideIfTenderAccepted</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_OUT</TBCurrentInProgress>
        <POSMessage>TENDER_ACCEPTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_TENDERACCEPTED</TBReturnCode>
        <TriggerMethod>msgDecideIfTenderAccepted</TriggerMethod>
    </MapEntry>
	<!-- start TAR393544 -->
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_OUT</TBCurrentInProgress>
        <POSMessage>TENDER_ACCEPTED</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<!-- end TAR393544 -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>TENDER_ACCEPTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_TENDERACCEPTED</TBReturnCode>
        <TriggerMethod>msgDecideIfTenderAccepted</TriggerMethod>   
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>NEW_ITEM_PROMPT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_TENDERACCEPTED</TBReturnCode>
        <TriggerMethod>msgDecideIfTenderAccepted</TriggerMethod>   
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>       
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>POS_TRXEND</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgReturnCodeHandler</TriggerMethod>
        <MethodParam>TB_TRXEND</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress>
        <POSMessage>POS_TRXEND</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgReturnCodeHandler</TriggerMethod>
        <MethodParam>TB_TRXEND</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_EBT</TBCurrentInProgress>
        <POSMessage>POS_TRXEND</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgReturnCodeHandler</TriggerMethod>
        <MethodParam>TB_TRXEND</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>POS_TRXEND</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgReturnCodeHandler</TriggerMethod>
        <MethodParam>TB_TRXEND</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TRANSACTION_SUSPEND</TBCurrentInProgress>
        <POSMessage>POS_TRXEND</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgReturnCodeHandler</TriggerMethod>
        <MethodParam>TB_TRXEND</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>INVALID_SIGNATURE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>INVALID_SIGNATURE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9007;9008; ;0;1</MethodParam>
    </MapEntry>

    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>BAD_SWIPE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>BAD_SWIPE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9007;9009; ;0;1</MethodParam>
    </MapEntry>
     <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>
    </MapEntry>
     <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK2</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>
    </MapEntry>
   
    <MapEntry>
        <TBCurrentInProgress>TB_FINISH_FLAPI</TBCurrentInProgress>
        <POSMessage>POS_TRXEND</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>TB_FINISH_FLAPI</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_CLOSED</TBReturnCode>
        <TriggerMethod>msgAPI_Finish</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_FINISH_FLAPI</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_CLOSED</TBReturnCode>
        <TriggerMethod>msgAPI_Finish</TriggerMethod>
    </MapEntry>
	<MapEntry>
	    <!--TAR387302-->
        <TBCurrentInProgress>TB_FINISH_FLAPI</TBCurrentInProgress>
        <POSMessage>NEW_ITEM_PROMPT</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_CLOSED</TBReturnCode>
        <TriggerMethod>msgAPI_Finish</TriggerMethod>
    </MapEntry>
	
	<!-- POS290538 -->
	<MapEntry>
	    <TBCurrentInProgress>TB_FINISH_FLAPI</TBCurrentInProgress>
        <POSMessage>POS_RECEIPTCOMPLETED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_CLOSED</TBReturnCode>
        <TriggerMethod>msgAPI_Finish</TriggerMethod>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_OUT</TBCurrentInProgress>
        <POSMessage>POS_RECEIPTCOMPLETED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<!-- POS290538 -->
	
    <MapEntry>
        <TBCurrentInProgress>TB_FINISH_FLAPI</TBCurrentInProgress>
        <POSMessage>NCS4_CARD_SCANNED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_CLOSED</TBReturnCode>
        <TriggerMethod>msgAPI_Finish</TriggerMethod>
    </MapEntry>
    <MapEntry>        
        <TBCurrentInProgress>TAKECHANGE_TIMER_EXPIRED</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>TAKECHANGE_TIMER_EXPIRED_IP</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
        <MethodParam>TakeChangeTimeout;409</MethodParam>        
    </MapEntry>

   <!-- POS56079 don't go to TakeReceipt if the transaction is not ended -->
  <MapEntry>        
        <TBCurrentInProgress>TAKECHANGE_TIMER_EXPIRED_IP_RETDN</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>
    </MapEntry>
   <!-- e POS56079 don't go to TakeReceipt if the transaction is not ended -->

    <MapEntry>        
        <TBCurrentInProgress>TAKECHANGE_TIMER_EXPIRED_IP_RETDN</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMTakeReceipt</MethodParam>
    </MapEntry>
	<!-- +SSCOI-43034, Bug253150 -->
	<MapEntry>        
        <TBCurrentInProgress>TAKECHANGE_TIMER_EXPIRED_IP_RETDN</TBCurrentInProgress>
        <POSMessage>STORE_CLOSE_REQUESTED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMTakeReceipt</MethodParam>
    </MapEntry>
    <!-- -SSCOI-43034 -->
    <MapEntry>
        <TBCurrentInProgress>TAKECHANGE_TIMER_EXPIRED_IP</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TRXEND_DELAY_RECEIPT</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_REPRINTRECEIPT</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>ReleaseReceipt;0;0</MethodParam> 
    </MapEntry>
    <MapEntry>
	<TBCurrentInProgress>CANCEL_TENDER</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F8}</MethodParam>
    </MapEntry>
    <MapEntry>
	<TBCurrentInProgress>CANCEL_TENDER</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F7}</MethodParam>
    </MapEntry>
	<MapEntry>
	 <TBCurrentInProgress>CANCEL_TENDER</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F7}</MethodParam>
    </MapEntry>
	<MapEntry>
	 <TBCurrentInProgress>CANCEL_TENDER</TBCurrentInProgress>
        <POSMessage>WAITING_ON_PINPAD</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F8}</MethodParam>
    </MapEntry>
	<!-- +SOTF6583 -->
    <MapEntry>
        <TBCurrentInProgress>CANCEL_TENDER</TBCurrentInProgress>
        <POSMessage>ZERO_AMT_ILLEGAL</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
    <!-- -SOTF6583 -->	
    <MapEntry>
	    <TBCurrentInProgress>CANCEL_TENDER</TBCurrentInProgress>
        <POSMessage>VERIFY_SIGNATURE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_CANCELTRANSACTION_FLAPI</TBCurrentInProgress>
        <POSMessage>WAITING_ON_PINPAD</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F8}</MethodParam>
    </MapEntry> 
    <MapEntry>
        <!-- TB_CANCELTRANSACTION_FLAPI state is set by TBCancelTransaction before a manual TriggerMsgMap -->
        <TBCurrentInProgress>TB_CANCELTRANSACTION_FLAPI</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSayPhrase</TriggerMethod>
        <MethodParam>SetAllItemsAside.wma</MethodParam>
    </MapEntry> 
    <MapEntry>
        <!-- TB_CANCELTRANSACTION_FLAPI state is set by TBCancelTransaction before a manual TriggerMsgMap -->
        <TBCurrentInProgress>TB_CANCELTRANSACTION_FLAPI</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>TRANSACTION_CANCEL</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{TRANS}{F3}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TRANSACTION_CANCEL</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{TRANS}{F3}</MethodParam>
    </MapEntry>
    <MapEntry> 
        <TBCurrentInProgress>TRANSACTION_CANCEL</TBCurrentInProgress>
        <POSMessage>REALLY_CANCEL_TRX</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
     </MapEntry>
	 <MapEntry> 
        <TBCurrentInProgress>TRANSACTION_CANCEL</TBCurrentInProgress>
        <POSMessage>VOID_TRANSACTION</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>        
     </MapEntry>
	 <MapEntry> 
        <TBCurrentInProgress>TRANSACTION_CANCEL</TBCurrentInProgress>
        <POSMessage>POS_TRXEND</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>        
     </MapEntry>
     <MapEntry> 
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>REALLY_CANCEL_TRX</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_FINISH_FLAPI</TBCurrentInProgress>
        <POSMessage>REALLY_CANCEL_TRX</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry> 
        <TBCurrentInProgress>TRANSACTION_CANCEL</TBCurrentInProgress>
        <POSMessage>NEW_ITEM_PROMPT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	 <MapEntry> 
		<TBCurrentInProgress>TRANSACTION_CANCEL</TBCurrentInProgress>
        <POSMessage>TRXMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<MapEntry> 
		<TBCurrentInProgress>TRANSACTION_CANCEL</TBCurrentInProgress>
        <POSMessage>ITEMMENU</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>        
        <TBCurrentInProgress>TRANSACTION_CANCEL</TBCurrentInProgress>
        <POSMessage>DEACTIVATING_PHONE_GIFT_CARD</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMProcessing</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TRANSACTION_CANCEL</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>PrintGiftReceipt;0;1</MethodParam> 
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TRANSACTION_CANCEL</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendReturnStatusMsgs</TriggerMethod>
        <MethodParam>TB_TRXVOIDED;TB_TRXEND</MethodParam>
    </MapEntry>
    <MapEntry>
        <!-- POS19072: TB_ENTERING_WIC_FREE_ITEM_PHASE state is set by SMScanAndBag before a manual TriggerMsgMap -->
        <!-- POS25997: 'WIC Free Item' is softkey 7 on Item Menu's 3rd page -->
        <TBCurrentInProgress>TB_ENTERING_WIC_FREE_ITEM_PHASE</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}{F8}{F8}{F7}</MethodParam>
    </MapEntry>
    <MapEntry>
        <!-- POS19072: Move to SMScanAndBag state because the WIC Free Item phase is active -->
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>WIC_FREE_ITEM_PHASE_POSSTATE</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>
    </MapEntry>
    <MapEntry>
        <!-- POS27783 POS19072: Setup to display Assistance Needed invalid-promo-item message during WIC transaction -->
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>INVALID_WIC_FREE_ITEM</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
        <MethodParam>InvalidWICFreeItem;9302</MethodParam>
<!-- POS32142 remove this section as the key will be sent from SMRAPDataNeeded
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
-->
    </MapEntry>
    <!--
        PROMO COUPON HANDLERS - (START)
    -->
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>PROMOCOUPON_MEDIA</POSMessage>
        <TBNewInProgress>ITEMIZATION_GET_COUPON_IP</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgCheckForMediaCollection</TriggerMethod>
<!-- POS36319
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
        <MethodParam>GetCoupon;9146</MethodParam>
-->
    </MapEntry>
     <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>PROMOCOUPON_MEDIA_AT_PAYMENT</POSMessage>
        <TBNewInProgress>TENDER_GET_COUPON_IP</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgCheckForMediaCollection</TriggerMethod>
<!-- POS36319
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
        <MethodParam>GetCoupon;9146</MethodParam>
-->
    </MapEntry> 

    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>PROMOCOUPON_MEDIA</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_GET_COUPON_IP_ONCE</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>TENDER_GET_COUPON_IP</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgCheckIfCouponToBeCollectedAndDisplay</TriggerMethod>
<!-- POS36319
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
        <MethodParam>GetCoupon;9146</MethodParam>
-->
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_GET_COUPON_IP</TBCurrentInProgress>
        <POSMessage>PROMOCOUPON_MEDIA</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_GET_COUPON_IP</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_GET_COUPON_IP</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_GET_COUPON_IP</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_GET_COUPON_IP</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_GET_COUPON_IP</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_GET_COUPON_IP_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>PROMOCOUPON_MEDIA_AT_PAYMENT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>
    </MapEntry>    
    <MapEntry>
        <TBCurrentInProgress>TENDER_GET_COUPON_IP_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>TENDER_GET_COUPON_IP_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_GET_COUPON_IP_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>PROMOCOUPON_MEDIA</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEED_SCANANDBAG</TBReturnCode>
    </MapEntry>
<!-- POS 10178 Use MsgSetFLState instead of TB_NEED_SCANANDBAG RRS  -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_GET_COUPON_IP_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequenceWithWaits</TriggerMethod>
        <MethodParam>50;{ITEM};0</MethodParam>
    </MapEntry>    
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_GET_COUPON_IP_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>
    </MapEntry>    
<!-- E POS 10178 Use MsgSetFLState instead of TB_NEED_SCANANDBAG RRS  -->

    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_GET_COUPON_IP_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>PROMOCOUPON_MEDIA</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequenceWithWaits</TriggerMethod>
        <MethodParam>50;{ITEM};0</MethodParam>
    </MapEntry>
    <!--
        PROMO COUPON HANDLERS - (END)
    -->

 <!-- Green Dot Item -->	
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_GREEN_DOT_ITEM</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_GREEN_DOT_ITEM_RETDN_cAssistModeGreenDotItem</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>        
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_GREEN_DOT_ITEM_RETDN_cReturnGreenDotItem</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
	    <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>       
    </MapEntry>
	<!-- End of Green Dot item -->
   
<!-- POS36319 rrs bottle slip and coinstar -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>NEGATIVE_MEDIA_COLLECTION</POSMessage>
	<TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgCheckForMediaCollection</TriggerMethod>
    </MapEntry>

    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>NEGATIVE_MEDIA_COLLECTION</POSMessage>
        <TBNewInProgress>ITEMIZATION_NEGATIVE_ITEM</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendReturnStatusMsgs</TriggerMethod>
        <MethodParam>TB_LOG_NEGATIVE_MEDIA</MethodParam>
    </MapEntry>
    
    <MapEntry>
        <TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress>
        <POSMessage>NEGATIVE_MEDIA_AT_PAYMENT_COLLECTION</POSMessage>
        <TBNewInProgress>TENDER_NEGATIVE_ITEM</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress>
        <POSMessage>NEGATIVE_MEDIA_AT_PAYMENT_COLLECTION</POSMessage>
	<TBNewInProgress>TENDER_NEGATIVE_ITEM</TBNewInProgress>
	<TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgCheckForMediaCollection</TriggerMethod>
    </MapEntry>   

    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>NEGATIVE_MEDIA_AT_PAYMENT_COLLECTION</POSMessage>
	<TBNewInProgress>TENDER_NEGATIVE_ITEM</TBNewInProgress>
	<TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgCheckForMediaCollection</TriggerMethod>       
    </MapEntry> 
<!-- e POS36319 rrs -->
 
   <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>NEGATIVE_MEDIA</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
        <MethodParam>NegativeMedia;9070</MethodParam>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>NEGATIVE_MEDIA</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSayPhrase</TriggerMethod>
        <MethodParam>TakeCheckRefundsSlipsToCashier.wma</MethodParam>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>NEGATIVE_MEDIA</POSMessage>
        <TBNewInProgress>ITEMIZATION_NEGATIVE_ITEM</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendReturnStatusMsgs</TriggerMethod>
        <MethodParam>TB_LOG_NEGATIVE_MEDIA</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_NEGATIVE_ITEM</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
      <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>

     <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_NEGATIVE_ITEM_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
      <!-- needed to trigger a POS menu refresh, to get out of NEGATIVE_MEDIA POS state -->
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_NEGATIVE_ITEM_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>
    </MapEntry>     
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_NEGATIVE_ITEM_RETDN</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
		<TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
        <!-- pos 11273 <TriggerMethod>msgSendSequence</TriggerMethod> -->
	<TriggerMethod>msgCheckedIfDataIsScannedSequence</TriggerMethod> 
        <MethodParam>[DATANEEDED_VALUE]{ENTER}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>VOID_ITEM_SCAN</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{VOID}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>VOID_ITEM_SCAN</TBCurrentInProgress>
        <POSMessage>VOIDMENU_DK1</POSMessage>
        <TBNewInProgress>VOID_ITEM_SCAN_SENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgVoidScannedItem</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>VOID_ITEM_SCAN_SENT</TBCurrentInProgress>
        <POSMessage>ATTEMPT_VOID</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>   
    <MapEntry>
        <TBCurrentInProgress>VOID_ITEM_SCAN_SENT</TBCurrentInProgress>
        <POSMessage>ITEM_NEEDQTY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>VOID_ITEM_INVALID</TBCurrentInProgress>
        <POSMessage>VOIDMENU_DK1</POSMessage>
        <TBNewInProgress>VOID_ITEM_SCAN_SENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>VOID_ITEM_INVALID</TBCurrentInProgress>
        <POSMessage>INVALID_VOID_ITEM</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>VOID_ITEM_SCAN_SENT</TBCurrentInProgress>
        <POSMessage>INVALID_VOID_ITEM</POSMessage>
        <TBNewInProgress>VOID_ITEM_INVALID</TBNewInProgress>
        <TBReturnCode>TB_ITEMUNKNOWN</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>VOID_ITEM_SCAN_SENT</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <!-- Process Guest card & TMD card voiding start -->
<!-- POS96746 -->
   <MapEntry>
        <TBCurrentInProgress>VOID_ITEM_SCAN_SENT</TBCurrentInProgress>
        <POSMessage>GUEST_CARD_VOIDED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgVoidRewardLine</TriggerMethod>
        <MethodParam>[[NSC4MemberEntryID]]</MethodParam> 
    </MapEntry>
<!-- e POS96746 -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>GUEST_CARD_VOIDED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgVoidRewardLine</TriggerMethod>
        <MethodParam>[[NSC4MemberEntryID]]</MethodParam>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>GUEST_CARD_VOIDED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgVoidRewardLine</TriggerMethod>
        <MethodParam>[[NSC4MemberEntryID]]</MethodParam>        
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>TMD_CARD_VOIDED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgVoidRewardLine</TriggerMethod>
        <MethodParam>[[TMDMemberEntryID]]</MethodParam>        
    </MapEntry>    
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>TMD_CARD_VOIDED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgVoidRewardLine</TriggerMethod>
        <MethodParam>[[TMDMemberEntryID]]</MethodParam>        
    </MapEntry>
	<!-- Process Guest card & TMD card voiding end -->
    <MapEntry>
        <TBCurrentInProgress>TRANSACTION_SUSPEND</TBCurrentInProgress>
        <POSMessage>TRXMENU_DK2</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TRANSACTION_SUSPEND</TBCurrentInProgress>
        <POSMessage>RETURN_TENDERS</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAssistModeTenderInProgress</TriggerMethod>
        <MethodParam>0</MethodParam>         

    </MapEntry>	

    <!-- POS15386 rrs -->
    <MapEntry>
        <!-- state is set by TBSuspendTransaction  before a manual TriggerMsgMap -->
        <TBCurrentInProgress>TB_SUSPENDTRANSACTION_FLAPI</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON_PIN_ENTRY</POSMessage>
        <TBNewInProgress>TRANSACTION_SUSPEND</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F8}{TRANS}{F1}</MethodParam>
    </MapEntry>     
    <!-- e POS15386 rrs -->
     <!-- POS192621 aab -->
    <MapEntry>
        <TBCurrentInProgress>TB_SUSPENDTRANSACTION_FLAPI</TBCurrentInProgress>
        <POSMessage>HIGHVALUE_PROMO_CHOICE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam> <!-- cancel the prompt and it will continue the suspend operation with the -1 POSMessage below -->
    </MapEntry> 
    <MapEntry> 
        <TBCurrentInProgress>TB_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>HIGHVALUE_PROMO_CHOICE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>    
    <!-- e POS192621 aab -->
    <MapEntry>
        <!-- state is set by TBSuspendTransaction  before a manual TriggerMsgMap -->
        <TBCurrentInProgress>TB_SUSPENDTRANSACTION_FLAPI</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>TRANSACTION_SUSPEND</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{TRANS}{F1}</MethodParam>
    </MapEntry> 
    <MapEntry> 
        <!-- state is set by TBSuspendTransaction  before a manual TriggerMsgMap -->
        <TBCurrentInProgress>TRANSACTION_SUSPEND</TBCurrentInProgress>
        <POSMessage>NEW_ITEM_PROMPT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry> 
        <!-- state is set by TBSuspendTransaction  before a manual TriggerMsgMap -->
        <TBCurrentInProgress>TRANSACTION_SUSPEND</TBCurrentInProgress>
        <POSMessage>TRXMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <!-- state is set by TBSuspendTransaction  before a manual TriggerMsgMap -->
        <TBCurrentInProgress>TRANSACTION_SUSPEND</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <!-- ** causes double TB_TRXEND & TB_CLOSED and risk race condition with dbl receipt print 
        <TriggerMethod>msgSendReturnStatusMsgs</TriggerMethod>
        <MethodParam>TB_TRXSUSPENDED;TB_TRXEND</MethodParam>
        -->
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TRANSACTION_SUSPEND</TBCurrentInProgress>
        <POSMessage>ALL_TENDERS_VOIDED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_TENDERVOIDED</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>** All Tenders voided. Suspending transaction... please wait **;0</MethodParam>         
    </MapEntry>
    <!-- returning TB_TRXEND causes problems when voiding all tenders in assist mode
         It's forcing the transaction to end and it's not expected in some cases.-->
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_EXIT</TBCurrentInProgress>
        <POSMessage>ALL_TENDERS_VOIDED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <!--<TBReturnCode>TB_TRXEND</TBReturnCode>-->
    </MapEntry>
<!-- 386951 -MEIJER4.33.4: Out-of-sync SMInProgress while RetrievingReceipt, ChangeContext. 
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_OUT</TBCurrentInProgress>
        <POSMessage>NEW_ITEM_PROMPT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_TRXEND</TBReturnCode>
    </MapEntry> -->
    
    <!-- SOTF 8286 -->
    <MapEntry>
        <!-- We're exting AssistMode so put the POS back to item menu -->
        <TBCurrentInProgress>ASSISTMODE_EXIT</TBCurrentInProgress>
        <POSMessage>NEED_BIRTH_DATE_16_NEW</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <!-- We're exting AssistMode so put the POS back to item menu -->
        <TBCurrentInProgress>ASSISTMODE_EXIT</TBCurrentInProgress>
        <POSMessage>NEED_BIRTH_DATE_17_NEW</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <!-- We're exting AssistMode so put the POS back to item menu -->
        <TBCurrentInProgress>ASSISTMODE_EXIT</TBCurrentInProgress>
        <POSMessage>NEED_BIRTH_DATE_18_NEW</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <!-- We're exting AssistMode so put the POS back to item menu -->
        <TBCurrentInProgress>ASSISTMODE_EXIT</TBCurrentInProgress>
        <POSMessage>NEED_BIRTH_DATE_19_NEW</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <!-- We're exting AssistMode so put the POS back to item menu -->
        <TBCurrentInProgress>ASSISTMODE_EXIT</TBCurrentInProgress>
        <POSMessage>NEED_BIRTH_DATE_20_NEW</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <!-- We're exting AssistMode so put the POS back to item menu -->
        <TBCurrentInProgress>ASSISTMODE_EXIT</TBCurrentInProgress>
        <POSMessage>NEED_BIRTH_DATE_21_NEW</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <!-- E - SOTF 8286 -->
    
    <MapEntry>
        <!-- state is set by TBSetTrainingModeState  before a manual TriggerMsgMap -->
        <TBCurrentInProgress>TB_TRAININGMODE_IN_FLAPI</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ENTER_TRAINING_IP</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_SetTrainingModeIn</TriggerMethod>
    </MapEntry>
    

    <MapEntry>
        <!-- state is set by TBSetTrainingModeState  before a manual TriggerMsgMap -->
        <TBCurrentInProgress>ENTER_TRAINING_IP</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_ENTEREDTRAINING</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <!-- Sign out from MISC menu -->
        <TBCurrentInProgress>ENTER_TRAINING_IP</TBCurrentInProgress>
        <POSMessage>MISCMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
        <MapEntry>
        <!-- Sign on -->
        <TBCurrentInProgress>ENTER_TRAINING_IP</TBCurrentInProgress>
        <POSMessage>SIGNIN_MENU</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[OPERATOR_TRAIN]{ENTER}</MethodParam>
    </MapEntry>
    <MapEntry>
        <!-- Enter password  -->
        <TBCurrentInProgress>ENTER_TRAINING_IP</TBCurrentInProgress>
        <POSMessage>ENTER_PASSWORD</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[PASSWORD_TRAIN]{ENTER}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ENTER_TRAINING_IP</TBCurrentInProgress>
        <POSMessage>TRAINING_MODE_ENTRY</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_ENTEREDTRAINING</TBReturnCode>
    </MapEntry>
    <MapEntry> 
        <TBCurrentInProgress>ENTER_TRAINING_IP</TBCurrentInProgress>
        <POSMessage>INVALID_OPER_NUM</POSMessage>
        <TBNewInProgress>TB_OPENLANE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9013;9012; ;0;0</MethodParam>
    </MapEntry>
    <MapEntry> 
        <TBCurrentInProgress>ENTER_TRAINING_IP</TBCurrentInProgress>
        <POSMessage>INVALID_OPER_NUM</POSMessage>
        <TBNewInProgress>TB_OPENLANE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
    <MapEntry> 
        <TBCurrentInProgress>ENTER_TRAINING_IP</TBCurrentInProgress>
        <POSMessage>DUPLICATE_LOGIN</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry> 
        <TBCurrentInProgress>ENTER_TRAINING_IP</TBCurrentInProgress>
        <POSMessage>DUPLICATE_LOGIN_ALLOW</POSMessage>
        <TBNewInProgress>TB_OPENLANE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9015;9014; ;0;0</MethodParam>
    </MapEntry>
    <MapEntry> 
        <TBCurrentInProgress>ENTER_TRAINING_IP</TBCurrentInProgress>
        <POSMessage>DUPLICATE_LOGIN_ALLOW</POSMessage>
        <TBNewInProgress>TB_OPENLANE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
	<!--ds185043-->
		<!--Supervisor Approval-->
	<MapEntry>
	<TBCurrentInProgress>ENTER_TRAINING_IP</TBCurrentInProgress>
        <POSMessage>SUPERVISOR_OPERATOR_MESSAGE3</POSMessage>
        <TBNewInProgress>INTRAINING_SUPRNUM</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
	</MapEntry>
	<MapEntry>
        <TBCurrentInProgress>INTRAINING_SUPRNUM</TBCurrentInProgress>
        <POSMessage>SUPERVISOR_ID</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>TrainSupervisorNumber;</MethodParam>
	</MapEntry>
    <MapEntry>
        <TBCurrentInProgress>INTRAINING_SUPRNUM_AGAIN</TBCurrentInProgress>
        <POSMessage>SUPERVISOR_ID</POSMessage>
        <TBNewInProgress>INTRAINING_SUPRNUM</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>TrainSupervisorNumberInvalid;</MethodParam>
	</MapEntry>
	<MapEntry>
         <TBCurrentInProgress>INTRAINING_SUPRNUM_RETDN</TBCurrentInProgress>
         <POSMessage>SUPERVISOR_ID</POSMessage>
         <TBNewInProgress>INTRAINING_SUPRPSW</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
         <TriggerMethod>msgSendSequence</TriggerMethod>
         <MethodParam>[DATANEEDED_VALUE]{ENTER}</MethodParam>
	</MapEntry>
    <MapEntry>
         <TBCurrentInProgress>INTRAINING_SUPRPSW</TBCurrentInProgress>
         <POSMessage>SUPERVISOR_ID</POSMessage>
         <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
         <TBCurrentInProgress>INTRAINING_SUPRPSW</TBCurrentInProgress>
         <POSMessage>BAD_SUPERVISOR_ID</POSMessage>
         <TBNewInProgress>INTRAINING_SUPRNUM_AGAIN</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
         <TriggerMethod>msgSendSequenceWithWaits</TriggerMethod>
         <MethodParam>150;{CLEAR};0</MethodParam>
	</MapEntry>
	<MapEntry>
         <TBCurrentInProgress>INTRAINING_SUPRPSW</TBCurrentInProgress>
         <POSMessage>SUPERVISOR_PWD</POSMessage>
         <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
         <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>TrainSupervisorPassword;</MethodParam>
	</MapEntry>
    <MapEntry>
         <TBCurrentInProgress>INTRAINING_SUPRPSW_AGAIN</TBCurrentInProgress>
         <POSMessage>SUPERVISOR_ID</POSMessage>
         <TBNewInProgress>INTRAINING_SUPRNUM</TBNewInProgress>
         <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>TrainSupervisorPasswordInvalid;</MethodParam>
	</MapEntry>
	<MapEntry>
         <TBCurrentInProgress>INTRAINING_SUPRPSW_RETDN</TBCurrentInProgress>
         <POSMessage>SUPERVISOR_PWD</POSMessage>
         <TBNewInProgress>ENTER_TRAINING_IP</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
         <TriggerMethod>msgSendSequence</TriggerMethod>
         <MethodParam>[DATANEEDED_VALUE]{ENTER}</MethodParam>
	</MapEntry>
    <MapEntry>
         <TBCurrentInProgress>ENTER_TRAINING_IP</TBCurrentInProgress>
         <POSMessage>BAD_SUPERVISOR_PWD</POSMessage>
         <TBNewInProgress>INTRAINING_SUPRPSW_AGAIN</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
         <TriggerMethod>msgSendSequenceWithWaits</TriggerMethod>
         <MethodParam>150;{CLEAR};0</MethodParam>
	</MapEntry>
	<MapEntry>
        <TBCurrentInProgress>TB_TRAININGMODE_IN_FLAPI</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_SetTrainingModeIn</TriggerMethod>
    </MapEntry>
     <MapEntry>
        <TBCurrentInProgress>ENTER_TRAINING_IP</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_ENTEREDTRAINING</TBReturnCode>
    </MapEntry>
	<!--enter training done-->	
	<!--exit na pod-->
	<!--POS12376:Handle Supr prompt to exit training on POS Sign in-->
	<MapEntry>
	<TBCurrentInProgress>TERM_LANE_OPEN_PASSWORD</TBCurrentInProgress>
        <POSMessage>SUPERVISOR_OPERATOR_MESSAGE3</POSMessage>
        <TBNewInProgress>OUTTRAINING_SUPRNUM</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
	</MapEntry>
	<MapEntry>
	<TBCurrentInProgress>EXIT_TRAINING_IP</TBCurrentInProgress>
        <POSMessage>SUPERVISOR_OPERATOR_MESSAGE3</POSMessage>
        <TBNewInProgress>OUTTRAINING_SUPRNUM</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
	</MapEntry>
	<MapEntry>
        <TBCurrentInProgress>OUTTRAINING_SUPRNUM</TBCurrentInProgress>
        <POSMessage>SUPERVISOR_ID</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>TrainSupervisorNumber;</MethodParam>
	</MapEntry>
    <MapEntry>
        <TBCurrentInProgress>OUTTRAINING_SUPRNUM_AGAIN</TBCurrentInProgress>
        <POSMessage>SUPERVISOR_ID</POSMessage>
        <TBNewInProgress>OUTTRAINING_SUPRNUM</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>TrainSupervisorNumberInvalid;</MethodParam>
	</MapEntry>
	<MapEntry>
         <TBCurrentInProgress>OUTTRAINING_SUPRNUM_RETDN</TBCurrentInProgress>
         <POSMessage>SUPERVISOR_ID</POSMessage>
         <TBNewInProgress>OUTTRAINING_SUPRPSW</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
         <TriggerMethod>msgSendSequence</TriggerMethod>
         <MethodParam>[DATANEEDED_VALUE]{ENTER}</MethodParam>
	 </MapEntry>
     <MapEntry>
         <TBCurrentInProgress>EXIT_TRAINING_IP</TBCurrentInProgress>
         <POSMessage>BAD_SUPERVISOR_PWD</POSMessage>
         <TBNewInProgress>OUTTRAINING_SUPRPSW_AGAIN</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
         <TriggerMethod>msgSendSequenceWithWaits</TriggerMethod>
         <MethodParam>150;{CLEAR};0</MethodParam>
	</MapEntry>
    <MapEntry>
         <TBCurrentInProgress>OUTTRAINING_SUPRPSW</TBCurrentInProgress>
         <POSMessage>SUPERVISOR_ID</POSMessage>
         <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
         <TBCurrentInProgress>OUTTRAINING_SUPRPSW</TBCurrentInProgress>
         <POSMessage>BAD_SUPERVISOR_ID</POSMessage>
         <TBNewInProgress>OUTTRAINING_SUPRNUM_AGAIN</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
         <TriggerMethod>msgSendSequenceWithWaits</TriggerMethod>
         <MethodParam>150;{CLEAR};0</MethodParam>
	</MapEntry>
	<MapEntry>
         <TBCurrentInProgress>OUTTRAINING_SUPRPSW</TBCurrentInProgress>
         <POSMessage>SUPERVISOR_PWD</POSMessage>
         <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
         <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>TrainSupervisorPassword;</MethodParam>
	</MapEntry>
    <MapEntry>
         <TBCurrentInProgress>OUTTRAINING_SUPRPSW_AGAIN</TBCurrentInProgress>
         <POSMessage>SUPERVISOR_ID</POSMessage>
         <TBNewInProgress>OUTTRAINING_SUPRNUM</TBNewInProgress>
         <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>TrainSupervisorPasswordInvalid;</MethodParam>
	</MapEntry>
	<MapEntry>
         <TBCurrentInProgress>OUTTRAINING_SUPRPSW_RETDN</TBCurrentInProgress>
         <POSMessage>SUPERVISOR_PWD</POSMessage>
         <TBNewInProgress>EXIT_TRAINING_IP</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
         <TriggerMethod>msgSendSequence</TriggerMethod>
         <MethodParam>[DATANEEDED_VALUE]{ENTER}</MethodParam>
	 </MapEntry>
	<MapEntry>
          <TBCurrentInProgress>EXIT_TRAINING_IP</TBCurrentInProgress>
        <POSMessage>DUPLICATE_LOGIN</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
	         <TriggerMethod>msgSendSequence</TriggerMethod>
         <MethodParam>{F1}</MethodParam>
	  </MapEntry>
    <MapEntry>
          <TBCurrentInProgress>EXIT_TRAINING_IP</TBCurrentInProgress>
        <POSMessage>DUPLICATE_LOGIN_ALLOW</POSMessage>
         <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
         <MethodParam>{F1}</MethodParam>

    </MapEntry>
	
	<MapEntry>
	<TBCurrentInProgress>TB_TRAININGMODE_OUT_FLAPI</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>EXIT_TRAINING_IP</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <!--Commented out to avoid OOS when exiting from Training Mode(SSCOI-46999)
		<TriggerMethod>msgSendSequence</TriggerMethod>
		<MethodParam>{MISC}{F1}</MethodParam> 
		-->
	</MapEntry>
<!--til here-->

    <MapEntry>
        <!-- state is set by TBSetTrainingModeState  before a manual TriggerMsgMap -->
        <TBCurrentInProgress>TB_TRAININGMODE_OUT_FLAPI</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>EXIT_TRAINING_IP</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_SetTrainingModeOut</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <!-- Sign out from MISC menu -->
        <TBCurrentInProgress>EXIT_TRAINING_IP</TBCurrentInProgress>
        <POSMessage>MISCMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
 <MapEntry>
        <!-- state is set by TBSetTrainingModeState  before a manual TriggerMsgMap -->
        <TBCurrentInProgress>EXIT_TRAINING_IP</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_LEFTTRAINING</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <!-- Sign on -->
        <TBCurrentInProgress>EXIT_TRAINING_IP</TBCurrentInProgress>
        <POSMessage>SIGNIN_MENU</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[OPERATOR]{ENTER}</MethodParam>
    </MapEntry>
    <MapEntry>
        <!-- Enter password  -->
        <TBCurrentInProgress>EXIT_TRAINING_IP</TBCurrentInProgress>
        <POSMessage>ENTER_PASSWORD</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[PASSWORD]{ENTER}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>EXIT_TRAINING_IP</TBCurrentInProgress>
        <POSMessage>TRAINING_MODE_EXIT</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_LEFTTRAINING</TBReturnCode>
        <TriggerMethod>msgSendReturnStatusMsgs</TriggerMethod>
        <MethodParam>TB_COMPLETEPRINT</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>GIFT_REGISTRY_SCANNED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>[[NSC4Mnemonic]] -- [[NSC4Account]];0</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>GUEST_CARD_SCANNED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_LOYALTYCARD</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>[[NSC4Mnemonic]] -- [[NSC4Account]];0</MethodParam>
    </MapEntry>
     <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>TMD_CARD_SCANNED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
				<!-- Bug 106597 missing percent	-->
        <MethodParam>Team Member Discount Accepted. Rate=[[TMDDiscountPercent]]%%
		[[TMDMemberName]]     ACCT# [[TMDMemberNumber]];0</MethodParam>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>VOID_ITEM_SCAN_SENT</TBCurrentInProgress>
        <POSMessage>GIFT_REGISTRY_SCANNED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>[[NSC4Mnemonic]] -- [[NSC4Account]]</MethodParam>
    </MapEntry>	
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>GIFT_REGISTRY_SCANNED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>[[NSC4Mnemonic]] -- [[NSC4Account]]</MethodParam>
    </MapEntry>

    <MapEntry>
        <TBCurrentInProgress>VOID_ITEM_SCAN_SENT</TBCurrentInProgress>
        <POSMessage>GUEST_CARD_SCANNED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>[[NSC4Mnemonic]] -- [[NSC4Account]]</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>GUEST_CARD_SCANNED</POSMessage>
        <TBNewInProgress>ITEMIZATION_GET_COUPON_IP</TBNewInProgress>  <!-- POS36319 -->
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgCheckIfCouponToBeCollectedAndDisplay</TriggerMethod>
        <MethodParam></MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>NSC4_SCANNED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_LOYALTYCARD</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>[[NSC4Mnemonic]] -- [[NSC4Account]];0</MethodParam>
    </MapEntry>
   <!-- POS17261: Added MEIJER_REWARD_CARD_RESUMED, so resumed Meijer Reward Card gets displayed on e-receipt. -->
   <!-- POS17261: Change TBReturnCode from TB_LOYALTYCARD to TB_IGNORE. -->
   <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>MEIJER_REWARD_CARD_RESUMED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>[[NSC4Mnemonic]] -- [[NSC4Account]];0</MethodParam>
    </MapEntry>
   <!-- POS17261: Added MEIJER_REWARD_CARD_RESUMED, so resumed Meijer Reward Card gets displayed on Assist Mode e-receipt -->
   <!-- POS17261: Change TBReturnCode from TB_LOYALTYCARD to TB_IGNORE. -->
   <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>MEIJER_REWARD_CARD_RESUMED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>[[NSC4Mnemonic]] -- [[NSC4Account]];0</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>VOID_ITEM_SCAN_SENT</TBCurrentInProgress>
        <POSMessage>TMD_DISCOUNT_PERCENT</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
				<!-- Bug 106597 missing percent	-->
        <MethodParam>Team Member Discount Accepted. Rate=[[TMDDiscountPercent]]%%
		[[TMDMemberName]]     ACCT# [[TMDMemberNumber]]</MethodParam>        
    </MapEntry>
     <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_VOID</TBCurrentInProgress>
        <POSMessage>ATTEMPT_VOID</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetHookProperty</TriggerMethod>
        <MethodParam>SuppressAmountAudio;true</MethodParam>
     </MapEntry>
     <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>SENIOR_DISCOUNT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>[[DiscountRate]]% Senior Discount;0</MethodParam>
     </MapEntry>

     <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>PRICE_DISCREPANCY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgPriceDiscrepancy</TriggerMethod>
        <!-- <MethodParam>Original price       [[Orig_price_display]]</MethodParam>  -->
     </MapEntry>
     <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>TMD_CARD_SCANNED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
				<!-- Bug 106597 missing percent	-->
        <MethodParam>Team Member Discount Accepted. Rate=[[TMDDiscountPercent]]%%
		[[TMDMemberName]]     ACCT# [[TMDMemberNumber]]</MethodParam>        
     </MapEntry>
	 <!-- +POS320628 -->
     <MapEntry>
        <TBCurrentInProgress>TB_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>TMD_CARD_SCANNED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<!-- 105250 displaying TMD twice POS is always showing ITEMIZATION now so skip this
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>Team Member Discount Accepted. Rate=[[TMDDiscountPercent]]%%
		[[TMDMemberName]]     ACCT# [[TMDMemberNumber]]</MethodParam> 
		-->
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>		
     </MapEntry>
     <!-- -POS320628 -->
	 <MapEntry> <!-- +POS335706 -->
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PIN_ENTRY</TBCurrentInProgress>
        <POSMessage>TMD_DISCOUNT_PERCENT</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
     </MapEntry>
	 <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PROMPT</TBCurrentInProgress>
        <POSMessage>TMD_DISCOUNT_PERCENT</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
     </MapEntry> <!-- -POS335706 --> 
     <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>TMD_CARD_SCANNED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>Team Member Discount Accepted. Rate=[[TMDDiscountPercent]]%%
		[[TMDMemberName]]     ACCT# [[TMDMemberNumber]]</MethodParam>        
     </MapEntry>
     <!-- POS17261: Added TMD_CARD_RESUMED, so resumed TMD Card gets displayed on e-receipt -->
     <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>TMD_CARD_RESUMED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>Team Member Discount Accepted. Rate=[[TMDDiscountPercent]]%%
		[[TMDMemberName]]     ACCT# [[TMDMemberNumber]];0</MethodParam>        
     </MapEntry>
     <!-- POS17261: Added TMD_CARD_RESUMED, so resumed TMD Card gets displayed on Assist Mode e-receipt -->
     <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>TMD_CARD_RESUMED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>Team Member Discount Accepted. Rate=[[TMDDiscountPercent]]%%
		[[TMDMemberName]]     ACCT# [[TMDMemberNumber]];0</MethodParam>        
     </MapEntry>
	 <!-- Start CRD 238735 -->
	  <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>TMD_CARD_RESUMED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>Team Member Discount Accepted. Rate=[[TMDDiscountPercent]]%%
		[[TMDMemberName]]     ACCT# [[TMDMemberNumber]];0</MethodParam>        
     </MapEntry>
	 <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>TMD_CARD_SCANNED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>Team Member Discount Accepted. Rate=[[TMDDiscountPercent]]%%
		[[TMDMemberName]]     ACCT# [[TMDMemberNumber]];0</MethodParam>        
     </MapEntry>
	 <!-- End CRD 238735 -->
     <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>INVALID_DEPT_NUM</POSMessage>
        <TBNewInProgress>ITEMIZATION_CLEAR_OG_ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_ITEMUNKNOWN</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>    

	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>ITEM_UNKNOWN_MOBILE</POSMessage>
        <TBNewInProgress>ITEMIZATION_CLEAR_OG_ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_ITEMUNKNOWN</TBReturnCode>
       <!-- <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ENTER}</MethodParam>-->
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>ITEM_UNKNOWN</POSMessage>
        <TBNewInProgress>ITEMIZATION_CLEAR_OG_ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_ITEMUNKNOWN</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ENTER}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_CLEAR_OG_ITEMIZATION</TBCurrentInProgress>
        <POSMessage>ITEM_UNKNOWN</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_CLEAR_OG_ITEMIZATION</TBCurrentInProgress>
        <POSMessage>DEPARTMENT_NUMBER</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
    </MapEntry>  
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_CLEAR_OG_ITEMIZATION</TBCurrentInProgress>
        <POSMessage>INVALID_ITEM</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>INVALID_ITEM</POSMessage>
        <TBNewInProgress>ITEMIZATION_CLEAR_OG_ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_ITEMUNKNOWN</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ENTER}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_CLEAR_OG_ITEMIZATION</TBCurrentInProgress>
        <POSMessage>INVALID_ITEM_DATA</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>	
    <!-- POS65023: Added handling for RESUME_STARTED_NOIGNORE_MOBILE -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>RESUME_STARTED_NOIGNORE_MOBILE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>	
	<!--POS11024: Mobile Shopper:Start-->
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_CLEAR_OG_ITEMIZATION</TBCurrentInProgress>
        <POSMessage>RESUME_COMPLETE</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>	
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_CLEAR_OG_ITEMIZATION</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<!--POS11024:Created state for Bag Alone items that are followed by Price reqd items-->
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_CLEAR_OG_ITEMIZATION</TBCurrentInProgress>
        <POSMessage>PRICE_REQUIRED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <!-- Even though we return TB_NEEDPRICE, SSF passes the buck to RapDataNeeded -->
        <!-- So we expect to pick up using the Data Needed handler -->
        <TBReturnCode>TB_NEEDPRICE</TBReturnCode>
    </MapEntry>
    <!--POS11024: Mobile Shopper:End-->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>INVALID_ITEM_DATA</POSMessage>
        <TBNewInProgress>ITEMIZATION_CLEAR_OG_ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_ITEMUNKNOWN</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{CLEAR}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>ENTER_WEIGHT_KYBD</POSMessage>
        <TBNewInProgress>ITEMIZATION_NEEDWEIGHT</TBNewInProgress>
        <TBReturnCode>TB_NEEDWEIGHT</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>ENTER_WEIGHT_SCALE_KYBD</POSMessage>
        <TBNewInProgress>ITEMIZATION_NEEDWEIGHT</TBNewInProgress>
        <TBReturnCode>TB_NEEDWEIGHT</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_NEEDWEIGHT</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>RESTRICTED_ITEM_MOBILE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_TIMERESTRICTEDITEM</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>RESTRICTED_ITEM</POSMessage>
        <TBNewInProgress>ITEMIZATION_CLEAR_OG_ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_TIMERESTRICTEDITEM</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>OVERQTY_LIMIT</POSMessage>
        <TBNewInProgress>ITEMIZATION_CLEAR_OG_ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9016;9007; ;1;1</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>OVERQTY_LIMIT</POSMessage>
        <TBNewInProgress>ITEMIZATION_CLEAR_OG_ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_CLEAR_OG_ITEMIZATION</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>COUPON_VALIDATION_FAILED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>        
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9017;9018; ;1;1</MethodParam>
    </MapEntry>
    <!-- POS11024 Mobile Shopper change trigger from msgMessageScreen to msgBagAloneScreen -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>BAG_ITEM_ALONE_28</POSMessage>
        <TBNewInProgress>ITEMIZATION_CLEAR_OG_ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
		<TriggerMethod>msgBagAloneScreen</TriggerMethod>
		<MethodParam>9083;9084; ;0;1</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>MSR_NOT_AVAILABLE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>INVALID_ITEM_DATA</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{CLEAR}</MethodParam>
    </MapEntry>

    <!-- Drivers license scanning -->   
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>MESSAGE_300</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>ID_REQUIRED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode> 
        <TriggerMethod>msgSetProperty</TriggerMethod>
  	<MethodParam>IsDLScanning_Prop;1;0</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>ID_REQUIRED</POSMessage>
        <TBNewInProgress>ASSISTMODE_TENDER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>OHIO_DL_SCANNING_STATE</TBCurrentInProgress>
        <POSMessage>ID_REQUIRED</POSMessage>
        <TBNewInProgress>OHIO_DL_SCANNING_STATE_IP</TBNewInProgress>
	<TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[DL_First_Alpha]</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>OHIO_DL_SCANNING_STATE_IP</TBCurrentInProgress>
        <POSMessage>ID_REQUIRED</POSMessage>
        <TBNewInProgress>DL_SCANNING_STATE_IP</TBNewInProgress>
	<TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[DL_Second_Alpha]</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>DL_SCANNING_STATE</TBCurrentInProgress>
        <POSMessage>ID_REQUIRED</POSMessage>
        <TBNewInProgress>DL_SCANNING_STATE_IP</TBNewInProgress>
	<TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[DL_First_Alpha]</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>DL_SCANNING_STATE_IP</TBCurrentInProgress>
        <POSMessage>ID_REQUIRED</POSMessage>
        <TBNewInProgress>ASSISTMODE_TENDER</TBNewInProgress>
	<TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[DL_Numeric_Data]{ENTER}</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>ASSISTMODE_TENDER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1_NOCASH</POSMessage>
        <TBNewInProgress>ASSISTMODE_TENDER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>ENTER_STATE_ID</POSMessage>
        <TBNewInProgress>ASSISTMODE_TENDER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>CUSTOMER_ID_SELECTION</POSMessage>
        <TBNewInProgress>ASSISTMODE_TENDER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>ELECTRONIC_WARRANTY_REQUIRED</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>				
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>ITEMMENU</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
    <!-- POS41473: Added SERIAL_NUMBER_ENTRY so that RAP cashier can scan hard-to-scan Apple product serial number in assist mode -->
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>SERIAL_NUMBER_ENTRY</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
    <!-- CQ6184 Start -->
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>SUPERVISOR_ID</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
    <!-- CQ6184 End -->
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>LINKED_ITEM</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>NEGATIVE_MEDIA_AT_PAYMENT</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>	
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>NEGATIVE_MEDIA</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>	
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>VOIDMENU_DK1</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>RESTRICTED_ITEM_AGE</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>NEED_BIRTH_DATE_16_NEW</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>NEED_BIRTH_DATE_17_NEW</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>NEED_BIRTH_DATE_18_NEW</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>NEED_BIRTH_DATE_19_NEW</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>NEED_BIRTH_DATE_21_NEW</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>WEIGHT_REQUIRED</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_NEEDWEIGHT</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>WEIGHT_REQUIRED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendWeight</TriggerMethod>
        <MethodParam>[ItemWeight]</MethodParam>
    </MapEntry>
    <!-- SOTF 7626-->
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>ACCOUNT_NUMBER_ENTRY</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
    <!--sotf-->
    <!-- POS 10649 RRS -->
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>MEP_AVAILABLE</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
    <!-- E POS 10649 RRS -->

    <!-- POS85378: Added mapping for the MEP_AVAILABLE_NON_BAG POS state to support MEP in MobilePayStation -->
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>MEP_AVAILABLE_NON_BAG</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>

	<MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>ASSISTMODE_TENDER</TBCurrentInProgress>
        <POSMessage>VOID_TRANSACTION</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_TRXVOIDED</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>PrintGiftReceipt;0;1</MethodParam>         
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>STORE_CLOSE_REQUESTED</POSMessage>
        <TBNewInProgress>ASSISTMODE_STORE_CLOSE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>      
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>NINTENDO_WARRANTY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>   
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>SERIAL NUMBER -- [[NintendoSerialNum]];0</MethodParam>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>ASSISTMODE_STORE_CLOSE</TBCurrentInProgress>
        <POSMessage>SIGNIN_MENU</POSMessage>
        <TBNewInProgress>TB_CLOSELANE</TBNewInProgress>
        <TBReturnCode>TB_GETBUSINESSDATE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMLaneClosed</MethodParam>             
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>ASSISTMODE_STORE_CLOSE</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>      
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>ASSISTMODE_STORE_CLOSE</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>      
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>ASSISTMODE_TENDER</TBCurrentInProgress>
        <POSMessage>VOIDMENU_DK1</POSMessage>
        <TBNewInProgress>ASSISTMODE_VOID</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>      
    </MapEntry>
	<MapEntry>       
        <TBCurrentInProgress>ASSISTMODE_VOID</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>ASSISTMODE_TENDER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>      
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>ASSISTMODE_VOID</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1_NOCASH</POSMessage>
        <TBNewInProgress>ASSISTMODE_TENDER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>      
    </MapEntry>
	<MapEntry>       
        <TBCurrentInProgress>ASSISTMODE_VOID</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>
        <TBNewInProgress>ASSISTMODE_TENDER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>      
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_VOID</TBCurrentInProgress>
        <POSMessage>TENDER_ACCEPTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_TENDERVOIDED</TBReturnCode>
        <TriggerMethod>msgDecideIfTenderAccepted</TriggerMethod>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>VOIDMENU_DK1</POSMessage>
        <TBNewInProgress>ASSISTMODE_VOID</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>      
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>ASSISTMODE_VOID</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>      
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>ASSISTMODE_VOID</TBCurrentInProgress>
        <POSMessage>TRXMENU_DK1</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>      
    </MapEntry>    
    <MapEntry>       
        <TBCurrentInProgress>ASSISTMODE_VOID</TBCurrentInProgress>
        <POSMessage>SELECT_TAX_TABLE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>      
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>VOID_TRANSACTION</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_TRXVOIDED</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>PrintGiftReceipt;0;1</MethodParam>         
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>POS_TRXEND</POSMessage>
        <TBNewInProgress>ASSISTMODE_TRXEND</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsResumeTrxInProgress;0;1</MethodParam>     
        <TriggerMethod>msgAssistModeTrxEnd</TriggerMethod>
    </MapEntry>
<!--    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_TRXEND</TBCurrentInProgress>
        <POSMessage>NEW_ITEM_PROMPT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgCheckAMTrxEndPrint</TriggerMethod>
    </MapEntry> -->
    <!--SOTF 6226 -->
     <MapEntry>
        <TBCurrentInProgress>CANCEL_AGE_RESTRICTED_ITEM</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <!-- sotf -->
    <MapEntry>
        <TBCurrentInProgress>CANCEL_AGE_RESTRICTED_ITEM</TBCurrentInProgress>
        <POSMessage>RESTRICTED_ITEM_AGE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
	<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>CANCEL_AGE_RESTRICTED_ITEM</TBCurrentInProgress>
        <POSMessage>AGE_RESTRICTED_CANCELED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>   
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_OUT</TBCurrentInProgress>
        <POSMessage>AGE_RESTRICTED_CANCELED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>   

    <!-- we need to have an entry for each restricted age here because Grouping here won't work
         due to the msgPreserveAssistModeState entry below -->  
    <MapEntry> 
         <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
         <POSMessage>RESTRICTED_ITEM_AGE</POSMessage>
         <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
         <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsRestricted_Prop;0;1</MethodParam>         
     </MapEntry>
     <MapEntry> 
         <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
         <POSMessage>RESTRICTED_ITEM_AGE</POSMessage>
         <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
         <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>RestrictedAge_Prop;0;1</MethodParam>         
     </MapEntry>
     <MapEntry> 
         <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
         <POSMessage>NEED_BIRTH_DATE_17</POSMessage>
         <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
         <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsRestricted_Prop;0;1</MethodParam>         
     </MapEntry>
     <MapEntry> 
         <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
         <POSMessage>NEED_BIRTH_DATE_17</POSMessage>
         <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
         <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>RestrictedAge_Prop;0;1</MethodParam>         
     </MapEntry>
     <MapEntry> 
         <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
         <POSMessage>NEED_BIRTH_DATE_18</POSMessage>
         <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
         <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsRestricted_Prop;0;1</MethodParam>         
     </MapEntry>
     <MapEntry> 
         <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
         <POSMessage>NEED_BIRTH_DATE_18</POSMessage>
         <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
         <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>RestrictedAge_Prop;0;1</MethodParam>         
     </MapEntry>
     <MapEntry> 
         <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
         <POSMessage>NEED_BIRTH_DATE_19</POSMessage>
         <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
         <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsRestricted_Prop;0;1</MethodParam>         
     </MapEntry>
     <MapEntry> 
         <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
         <POSMessage>NEED_BIRTH_DATE_19</POSMessage>
         <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
         <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>RestrictedAge_Prop;0;1</MethodParam>         
     </MapEntry>
     <MapEntry> 
         <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
         <POSMessage>NEED_BIRTH_DATE_21</POSMessage>
         <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
         <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsRestricted_Prop;0;1</MethodParam>         
     </MapEntry>
     <MapEntry> 
         <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
         <POSMessage>NEED_BIRTH_DATE_21</POSMessage>
         <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
         <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>RestrictedAge_Prop;0;1</MethodParam>         
     </MapEntry>
    <MapEntry>
        <!-- In AssistMode don't do any trigger of the map let Assistmode drive it -->
        <TBCurrentInProgress>ASSISTMODE_VOID</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgPreserveAssistModeState</TriggerMethod>
        <MethodParam>ASSISTMODE_VOID</MethodParam>
    </MapEntry>

<!-- POS208800 rrs POS moved the ABORT button to Page 2-->
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_TRXEND</TBCurrentInProgress>
        <POSMessage>BAL_INQUIRY_DEST2</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F8}{F1}{ITEM}</MethodParam> 
    </MapEntry>
    <!-- SOTF 7626 -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>BAL_INQUIRY_DEST2</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F8}{F1}{ITEM}</MethodParam> 
    </MapEntry>
    <!-- sotf  -->
<!-- POS208800 rrs -->
    

    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_TRXEND</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_TRXEND</TBReturnCode>
        <TriggerMethod>msgAMCancelRebateReceipt</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_TRXEND</TBCurrentInProgress>
        <POSMessage>TRXMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam> 
    </MapEntry>

    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_TRXEND</TBCurrentInProgress>
        <POSMessage>REQUEST_GIFT_RECEIPT</POSMessage>
        <TBNewInProgress>PRINT_GIFTRECEIPT_IP</TBNewInProgress>
        <TBReturnCode>TB_TRXEND</TBReturnCode>
        <TriggerMethod>msgOnGiftReceipt</TriggerMethod>
        <MethodParam>0</MethodParam> 
    </MapEntry>
    <MapEntry>
        <!-- In AssistMode don't do any trigger of the map let Assistmode drive it -->
        <TBCurrentInProgress>ASSISTMODE_TRXEND</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgPreserveAssistModeState</TriggerMethod>
        <MethodParam>ASSISTMODE_TRXEND</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_TENDER</TBCurrentInProgress>
        <POSMessage>POS_TRXEND</POSMessage>
        <TBNewInProgress>ASSISTMODE_TRXEND</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsResumeTrxInProgress;0;1</MethodParam>
        <TriggerMethod>msgAssistModeTrxEnd</TriggerMethod>
    </MapEntry>
     <MapEntry>
        <!-- We're exiting AssistMode while the POS is in Payment -->
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>ASSISTMODE_TENDER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <!-- We're exiting AssistMode while the POS is in Payment -->
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1_NOCASH</POSMessage>
        <TBNewInProgress>ASSISTMODE_TENDER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <!-- We're exiting AssistMode while the POS is in Payment -->
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>ASSISTMODE_TENDER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <!-- Synchronize TB AM states to match Payment with Payment -->
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>WAITING_ON_PINPAD</POSMessage>
        <TBNewInProgress>ASSISTMODE_TENDER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <!-- Synchronize TB AM states to match Payment with Payment -->
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>WAITING_ON_PINPAD2</POSMessage>
        <TBNewInProgress>ASSISTMODE_TENDER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <!-- Synchronize TB AM states to match Payment with Payment -->
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>PAYMENT_AMOUNT</POSMessage>
        <TBNewInProgress>ASSISTMODE_TENDER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>

    <!-- SOTF 8723 RRS -->
    <MapEntry>
        <!-- Synchronize TB AM states to match Payment with Payment -->
        <TBCurrentInProgress>ASSISTMODE_TENDER</TBCurrentInProgress>
        <POSMessage>ECHECK_RETURNCHECK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
	<TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsECheckTender;1;0</MethodParam>
    </MapEntry>
   <!-- E SOTF 8723 RRS --> 
     <MapEntry>
        <!-- In AssistMode don't do any trigger of the map let Assistmode drive it -->
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgPreserveAssistModeState</TriggerMethod>
        <MethodParam>ASSISTMODE_ENTER</MethodParam>
    </MapEntry>
    <MapEntry> 
            <!-- In AssistMode don't do any trigger of the map let Assistmode drive it -->
        <TBCurrentInProgress>ASSISTMODE_TENDER</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgPreserveAssistModeState</TriggerMethod>
        <MethodParam>ASSISTMODE_TENDER</MethodParam>
    </MapEntry> 
    <MapEntry>
        <!-- We're exting AssistMode.  If we're not signed in on the POS
             go back to lane closed -->
        <TBCurrentInProgress>ASSISTMODE_EXIT</TBCurrentInProgress>
        <POSMessage>SIGNIN_MENU</POSMessage>
        <TBNewInProgress>TB_CLOSELANE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMLaneClosed</MethodParam>
    </MapEntry>
    <MapEntry>
        <!-- We're exting AssistMode.  If we're not signed in on the POS
             go back to lane closed -->
        <TBCurrentInProgress>ASSISTMODE_EXIT</TBCurrentInProgress>
        <POSMessage>SIGNIN_MENU_TRAINING</POSMessage>
        <TBNewInProgress>TB_CLOSELANE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMLaneClosed</MethodParam>
    </MapEntry>

    <!-- POS31050 Mobile Enhancement START  -->
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_EXIT</TBCurrentInProgress>
        <POSMessage>MOBILE_TRANSACTION_ASSISTANCE</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>

    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_EXIT</TBCurrentInProgress>
        <POSMessage>PRICE_REQUIRED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>

    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>MOBILE_STREAMLINE_ITEM_INFO</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>number_of_sold_item;[[tb_long]];1</MethodParam>	
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>transaction_subtotal_mobile_item;[[transaction_subtotal_from_tb_int]];1</MethodParam>	
    </MapEntry>

    <!-- e POS31050 Mobile Enhancement START -->   

    <MapEntry>
        <!-- We're exting AssistMode so put the POS back to item menu -->
        <TBCurrentInProgress>ASSISTMODE_EXIT</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAssistModeExit</TriggerMethod>
    </MapEntry>
	
	<!-- (+) POS259997 -->
    <MapEntry>
        <!-- We're exting AssistMode so put the POS back to item menu -->
        <TBCurrentInProgress>ASSISTMODE_EXIT</TBCurrentInProgress>
        <POSMessage>HIGHVALUE_PROMO_CHOICE</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9332;9331; ;0;0</MethodParam>         
    </MapEntry>
    <!-- (-) POS259997 -->
    <!-- (+) VSTS149725 -->
    <!-- CRD 297752 - return TB_NEEDASSISTMODE when ShiptBarcode is scanned-->
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>SHIPTBARCODE_SCANNED_LVL3</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
        <!--<TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
	<MethodParam>9375; ;1;1;0</MethodParam>
	<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>-->
    </MapEntry>
	    <!-- CRD 297752 - return TB_NEEDASSISTMODE when ShiptBarcode is scanned-->
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>SHIPTBARCODE_SCANNED_LVL1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>        
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
	<MethodParam>9375; ;1;1;0</MethodParam>
	<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>HOMEDLVRY_TRANS_MPERKS_NOT_ALLOWED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>        
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
		<MethodParam>9377; ;1;1;0</MethodParam>
    </MapEntry>
	<!-- Start CRD 313052 -->
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>SHIPT_MEIJERCOM_SCANNED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>        
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>MeijerComPrompt;</MethodParam>  
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_ORDERVERIFIED</TBCurrentInProgress>
        <POSMessage>SHIPT_MEIJERCOM_SCANNED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
		<TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
		<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>MeijerComPrintNote;</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_SHOPPERNOTPRESENT</TBCurrentInProgress>
        <POSMessage>SHIPT_MEIJERCOM_SCANNED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
		<TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_SHOPPERNOTPRESENT</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
		<TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}{F6}{F1}</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_ORDERVERIFIED_RETDN_cCOLLECTSHIPTNOTE</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}{F6}{F1}</MethodParam>
    </MapEntry>
	<!-- End CRD 313052 -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>SHIPTBARCODE_ALREADY_SCANNED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
	<MethodParam>9376; ;1;1;0</MethodParam>
	<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>SHIPTBARCODE_SCANNED_NOTALLOW_MPERKS</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
	<MethodParam>9377; ;1;1;0</MethodParam>
	<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
    <!-- (-) VSTS149725 -->	
	
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_FINISH_FLAPI</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_CLOSED</TBReturnCode>
        <TriggerMethod>msgAPI_Finish</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_FINISH_FLAPI</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER_TRAINING_IP</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_ENTEREDTRAINING</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER_TRAINING_IP</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_EXIT_TRAINING_IP</TBCurrentInProgress>
        <POSMessage>TRAINING_MODE_EXIT</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_LEFTTRAINING</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>TRAINING_MODE_EXIT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_LEFTTRAINING</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TERM_LANE_OPEN_PASSWORD</TBCurrentInProgress>
        <POSMessage>TRAINING_MODE_EXIT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_LEFTTRAINING</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_EXIT_TRAINING_IP</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>    
    </MapEntry>
	<!-- This needed after the CASHIER_TENDER posstate with a previous cash inserted. -->
	<MapEntry>
        <TBCurrentInProgress>TENDER_SELECTED</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>    
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_TENDER_CASH_SENT</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_TENDERACCEPTED</TBReturnCode>
        <TriggerMethod>msgAssistModeTenderInProgress</TriggerMethod>
        <MethodParam>0</MethodParam>         
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_TENDER_CASH_SENT</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1_NOCASH</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode> <!-- CRD 238473 -->
        <TriggerMethod>msgAssistModeTenderInProgress</TriggerMethod>
        <MethodParam>0</MethodParam>         
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_TENDER_CASH_SENT</TBCurrentInProgress>
        <POSMessage>POS_TRXEND</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAssistModeTenderInProgress</TriggerMethod>
        <MethodParam>0</MethodParam>         
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ASSISTMODE_TENDER_CASH_SENT</TBCurrentInProgress>
        <POSMessage>POS_TRXEND</POSMessage>
        <TBNewInProgress>ASSISTMODE_TRXEND</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAssistModeTrxEnd</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_TENDER</TBCurrentInProgress>
        <POSMessage>ALL_TENDERS_VOIDED</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_TENDERVOIDED</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>*** ALL TENDERS VOIDED ***;0</MethodParam>         
    </MapEntry>
    <!-- SOTF 8054 -->
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>ALL_TENDERS_VOIDED</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_TENDERVOIDED</TBReturnCode>
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>*** ALL TENDERS VOIDED ***;0</MethodParam>         
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>ALL_TENDERS_VOIDED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <!-- sotf -->
     <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_TENDER_CASH_SENT</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_TENDER_CASH</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>ASSISTMODE_TENDER_CASH_SENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAssistModeTenderInProgress</TriggerMethod>
        <MethodParam>1</MethodParam>
    </MapEntry>     
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>SUPERVISOR_ID</POSMessage>
        <TBNewInProgress>SUPERVISOR_NEEDED</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>SupervisorApproval;</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>SUPERVISOR_NEEDED_RETDN_cAssistMode</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>OFFLINE</POSMessage>
        <TBNewInProgress>OFFLINE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>Offline;</MethodParam>     
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>OFFLINE_RETDN_cOk</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>OFFLINE_ACK_CLEARED</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>

    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>ERROR_CONTEXT_CLEAR</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>

    <MapEntry> 
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
         <POSMessage>TARE_TOO_LARGE</POSMessage>
         <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
         <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
         <TriggerMethod>msgSendWeight</TriggerMethod>
         <MethodParam>0</MethodParam> 
  </MapEntry>
     <!-- Handle age restricted/recalled items (start) -->      
      <MapEntry> 
         <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
         <POSMessage>RECALLED_ITEM</POSMessage>
         <TBNewInProgress>ITEMIZATION_CLEAR_OG_ITEMIZATION</TBNewInProgress>
         <TBReturnCode>TB_ITEMRECALLED</TBReturnCode>
     </MapEntry>
	 <!-- POS11024:Commented out autoclick of button so that F2 can be sent from code-->
	 <!--Mobile Shopper fix so that recalled message stays for customer to hit OK-->
	 <!--
     <MapEntry> 
         <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
         <POSMessage>RECALLED_ITEM</POSMessage>
         <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
     </MapEntry>
	-->
     <!-- SOTF 6226 -->
     <MapEntry> 
         <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
         <POSMessage>RESTRICTED_ITEM_AGE</POSMessage>
         <TBNewInProgress>ITEMIZATION_AGE</TBNewInProgress>
         <TBReturnCode>TB_NEEDIMMEDATEAGECHECK</TBReturnCode>
		 <TriggerMethod>msgImmediateOrDelayedIntervention</TriggerMethod>
     </MapEntry>
	 <!--POS11024:Mobile Shopper-->
	 <MapEntry> 
         <TBCurrentInProgress>ITEMIZATION_CLEAR_OG_ITEMIZATION</TBCurrentInProgress>
         <POSMessage>RESTRICTED_ITEM_AGE</POSMessage>
         <TBNewInProgress>ITEMIZATION_AGE</TBNewInProgress>
         <TBReturnCode>TB_NEEDIMMEDATEAGECHECK</TBReturnCode>
         <TriggerMethod>msgImmediateOrDelayedIntervention</TriggerMethod>
	</MapEntry>
     <MapEntry> 
         <TBCurrentInProgress>ITEMIZATION_AGE</TBCurrentInProgress>
         <POSMessage>RECALLED_ITEM</POSMessage>
         <TBNewInProgress>ITEMIZATION_CLEAR_OG_ITEMIZATION</TBNewInProgress>
         <TBReturnCode>TB_ITEMRECALLED</TBReturnCode>
     </MapEntry>
     <MapEntry> 
         <TBCurrentInProgress>ITEMIZATION_AGE</TBCurrentInProgress>
         <POSMessage>RECALLED_ITEM</POSMessage>
         <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
     </MapEntry>
	 <MapEntry>
        <TBCurrentInProgress>TB_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>RESTRICTED_ITEM_AGE</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
    <!-- This state can occur after completing an age verify screen OR when
         getting back to back resume restricted items.  In the first case 
         we do nothing, in the latter we need to reprompt for age -->
    <MapEntry> 
         <TBCurrentInProgress>ITEMIZATION_AGE</TBCurrentInProgress>
         <POSMessage>RESTRICTED_ITEM_AGE</POSMessage>
         <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgDetectAndHandleNewRestrictedItem</TriggerMethod>
     </MapEntry>
    <MapEntry> 
         <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
         <POSMessage>RESTRICTED_ITEM_AGE</POSMessage>
         <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
     </MapEntry>
	 <MapEntry> 
         <TBCurrentInProgress>ITEMIZATION_AGE</TBCurrentInProgress>
         <POSMessage>ITEMMENU_DK1</POSMessage>
         <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
     </MapEntry>
     <!-- Handle age restricted/recalled items (end) -->          
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>INVALID_STATE_ID</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>InvalidStateID;</MethodParam>
    </MapEntry>
	<MapEntry> 
         <TBCurrentInProgress>ITEMIZATION_RETDN_INVALID_ID_OK</TBCurrentInProgress>
         <POSMessage>INVALID_STATE_ID</POSMessage>
         <TBNewInProgress>ITEMIZATION</TBNewInProgress>
	     <TBReturnCode>TB_IGNORE</TBReturnCode>
         <TriggerMethod>msgSendSequence</TriggerMethod>
         <MethodParam>{F2}</MethodParam>
     </MapEntry>
	<MapEntry> 
         <TBCurrentInProgress>ITEMIZATION_RETDN_INVALID_ID_OK</TBCurrentInProgress>
         <POSMessage>INVALID_STATE_ID</POSMessage>
         <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
	     <TBReturnCode>TB_IGNORE</TBReturnCode>
         <TriggerMethod>msgSetFLState</TriggerMethod>
         <MethodParam>SMSmEnterBirthdate</MethodParam> 
     </MapEntry>
     <MapEntry> 
         <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
         <POSMessage>UNDER_RESTRICTED_AGELIMIT</POSMessage>
         <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
     </MapEntry>
     <MapEntry> 
         <TBCurrentInProgress>ITEMIZATION_AGE</TBCurrentInProgress>
         <POSMessage>UNDER_RESTRICTED_AGELIMIT</POSMessage>
         <TBNewInProgress>ITEMIZATION</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
         <TriggerMethod>msgSendSequence</TriggerMethod>
         <MethodParam>{F2}</MethodParam>
     </MapEntry>
     <!-- +SOTF 6518 -->
     <MapEntry> 
         <TBCurrentInProgress>TB_ENTERTENDERSTATE_OUT</TBCurrentInProgress>
         <POSMessage>UNDER_RESTRICTED_AGELIMIT</POSMessage>
         <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
         <TriggerMethod>msgSendSequence</TriggerMethod>
         <MethodParam>{F2}</MethodParam>
     </MapEntry>     
     <!-- -SOTF 6518 -->
     <MapEntry> 
         <TBCurrentInProgress>ITEMIZATION_IP</TBCurrentInProgress>
         <POSMessage>ITEMMENU_DK1</POSMessage>
         <TBNewInProgress>ITEMIZATION</TBNewInProgress>
         <TBReturnCode>TB_NEED_SCANANDBAG</TBReturnCode>
     </MapEntry>
     <MapEntry>
        <TBCurrentInProgress>FORCE_LOAD_RETDN_cOk</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>FORCE_LOAD_RETDN_cOk</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgRestartFastlane</TriggerMethod>
    </MapEntry>
    
    <MapEntry>
        <TBCurrentInProgress>FORCE_LOAD_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>FORCE_LOAD_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMAttract</MethodParam>    
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>CMOS_RESET</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>WARNING_SUSPENDED_TRANSACTION</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>NONE_UNEXPECTED</POSMessage>
        <TBNewInProgress>TERM_INIT_LANE_CLOSED</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendReturnStatusMsgs</TriggerMethod>
        <MethodParam>TB_TRXVOIDED;TB_TRXEND</MethodParam>
    </MapEntry> 
    
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>OFFLINE_APPROVE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendKeyIfNotInAssist</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <!--handle the case where the POS decides to sign out--> 
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>EXIT_SECURE_MODE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendKeyIfNotInAssist</TriggerMethod>
        <MethodParam>[PASSWORD]{ENTER}</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>TERM_INIT_LANE_OPEN</TBCurrentInProgress>
        <POSMessage>ERROR_CONTEXT_CLEAR</POSMessage>
        <TBNewInProgress>TB_OPENLANE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{CLEAR}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TERM_INIT_LANE_OPEN</TBCurrentInProgress>
        <POSMessage>SIGN_ON_OFFLINE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9029;9030; ;0;0</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TERM_INIT_LANE_OPEN</TBCurrentInProgress>
        <POSMessage>SIGN_ON_OFFLINE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
 <!--    <MapEntry>
        <TBCurrentInProgress>TERM_INIT_LANE_OPEN</TBCurrentInProgress>
        <POSMessage>SIGN_ON_OFFLINE_REJECTED</POSMessage>
        <TBNewInProgress>TERM_DISABLED</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>-->
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>SIGN_OFF_OFFLINE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>PLEASE_SIGN_OUT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
        <TriggerMethod>msgDontReturnTBNeedAsstIfInAsst</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_FINISH_FLAPI</TBCurrentInProgress>
        <POSMessage>STORE_CLOSE_REQUESTED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_CLOSED</TBReturnCode>
        <TriggerMethod>msgAPI_Finish</TriggerMethod>
    <!--    <TriggerMethod>msgSendSequence</TriggerMethod> --> <!-- POS207283  -->
    <!--    <MethodParam>{F1}</MethodParam> --> <!-- commented for SSCOI-43034 (Bug253150) and handle it in SMThankYou -->
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_FINISH_FLAPI</TBCurrentInProgress>
        <POSMessage>FORCE_LOAD</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_CLOSED</TBReturnCode>
        <TriggerMethod>msgAPI_Finish</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_FINISH_FLAPI</TBCurrentInProgress>
        <POSMessage>NEXT_DAY_SEPARATE_MEDIA</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_CLOSED</TBReturnCode>
        <TriggerMethod>msgAPI_Finish</TriggerMethod>
    </MapEntry>

    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_OUT</TBCurrentInProgress>
        <POSMessage>STORE_CLOSE_REQUESTED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_OUT</TBCurrentInProgress>
        <POSMessage>FORCE_LOAD</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_OUT</TBCurrentInProgress>
        <POSMessage>NEXT_DAY_SEPARATE_MEDIA</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>FORCE_LOAD</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>FORCE_LOAD</TBCurrentInProgress>
        <POSMessage>FORCE_LOAD</POSMessage>
        <TBNewInProgress>FORCE_LOAD</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>ForceLoad;</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>FORCE_LOAD</POSMessage>
        <TBNewInProgress>FORCE_LOAD</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>ForceLoad;</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>STORE_CLOSE_REQUESTED</TBCurrentInProgress>
        <POSMessage>STORE_CLOSE_REQUESTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>      
    </MapEntry>
	<!-- +CRD185924 -->
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>DISCONNECTED_QUICK_RESTART</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_POS_RESTARTING</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_FINISH_FLAPI</TBCurrentInProgress>
        <POSMessage>SIGNIN_MENU</POSMessage>
        <TBNewInProgress>TB_CLOSELANE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMLaneClosed</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ASSISTMODE_POS_QUICK_RESTART</TBCurrentInProgress>
        <POSMessage>SIGNIN_MENU</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_POS_RESTART_COMPLETE</TBReturnCode>
    </MapEntry>
	<!-- -CRD185924 -->
    <MapEntry>
        <TBCurrentInProgress>SEPARATE_MEDIA</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsFromSeparateMediaState;1;0</MethodParam>    
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>SEPARATE_MEDIA</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>SEPARATE_MEDIA_ALL_BUT_LAST_TRXN</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>        
    </MapEntry>  
	<!-- +CRD185924  --> 
    <MapEntry> 
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>NEW_POS_SOFTWARE_AVAILABLE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_POS_NEED_RESTART</TBReturnCode>     
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>TERM_INIT_DISCONNECTED</TBCurrentInProgress>
        <POSMessage>NEW_POS_SOFTWARE_AVAILABLE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry> 
    <!-- -CRD185924  --> 	
    <MapEntry> 
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>STORE_CLOSE_REQUESTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>     <!-- VSTS 172859  --> 
    </MapEntry>  
   <!-- -VSTS-156794 -->   
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_ENDORSEMENT_IP</TBCurrentInProgress>
        <POSMessage>STORE_CLOSE_REQUESTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_TRXEND</TBReturnCode>
    </MapEntry>
    <!-- -VSTS-156787 -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_ENDORSEMENT_IP</TBCurrentInProgress>
        <POSMessage>STORE_CLOSE_REQUESTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_TRXEND</TBReturnCode>
    </MapEntry>
    <!-- -VSTS-156787 -->
    <MapEntry>
        <TBCurrentInProgress>TB_CLOSELANE</TBCurrentInProgress>
        <POSMessage>STORE_CLOSE_REQUESTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_CLOSELANE</TBCurrentInProgress>
        <POSMessage>PLEASE_SIGN_OUT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_GETBUSINESSDATE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TERM_LANE_OPEN_PASSWORD</TBCurrentInProgress>
        <POSMessage>NEXT_DAY_SEPARATE_MEDIA</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9064;9065; ;0;0</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TERM_LANE_OPEN_PASSWORD</TBCurrentInProgress>
        <POSMessage>NEXT_DAY_SEPARATE_MEDIA</POSMessage>
        <TBNewInProgress>TERM_DISABLED</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>


    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>PRICE_EMBED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgPriceEmbed</TriggerMethod>
        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TERM_INIT_LANE_OPEN</TBCurrentInProgress>
        <POSMessage>ADMSG_LOAD_FAIL</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9048;9049; ;0;0</MethodParam> 
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TERM_INIT_LANE_OPEN</TBCurrentInProgress>
        <POSMessage>ADMSG_LOAD_FAIL</POSMessage>
        <TBNewInProgress>TERM_DISABLED</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TERM_INIT_DISCONNECTED</TBCurrentInProgress>
        <POSMessage>ADMSG_LOAD_FAIL</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9048;9049; ;0;0</MethodParam> 
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TERM_INIT_DISCONNECTED</TBCurrentInProgress>
        <POSMessage>ADMSG_LOAD_FAIL</POSMessage>
        <TBNewInProgress>TERM_DISABLED</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>ADMSG_LOAD_FAIL</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9048;9049; ;0;0</MethodParam> 
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>ADMSG_LOAD_FAIL</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TERM_INIT_LANE_OPEN</TBCurrentInProgress>
        <POSMessage>TERMINAL_DISABLED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9032;9033; ;0;0</MethodParam> 
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TERM_INIT_LANE_OPEN</TBCurrentInProgress>
        <POSMessage>TERMINAL_DISABLED</POSMessage>
        <TBNewInProgress>TERM_DISABLED</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
        </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TERM_DISABLED</TBCurrentInProgress>
        <POSMessage>SIGNIN_MENU</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    <!--    <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9032;9033; ;0;0</MethodParam>  -->
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>RESTART_FASTLANE</TBCurrentInProgress>
        <POSMessage>SIGNIN_MENU</POSMessage>
        <TBNewInProgress>TERM_INIT_READY</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry> 
	<MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>SPENT_DISPLAY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
	 </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>SPENT_DISPLAY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_CANCEL_ITEM</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>  
    </MapEntry>  
	<!-- Start Everseen 
		CRD 313027
			328681
			344902-->
	<!-- miss scans -->
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>MISS_SCAN_ALERT</POSMessage>
        <TBNewInProgress>EVERSEEN_MISS_SCAN_ALERT</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>MiscanPrompt;</MethodParam>    
    </MapEntry>  
	<MapEntry>
        <TBCurrentInProgress>EVERSEEN_MISS_SCAN_ALERT</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>EVERSEEN_MISS_SCAN_ALERT_RETDN</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
        <TriggerMethod>msgCheckedIfDataIsScannedSequence</TriggerMethod> 
        <MethodParam>[DATANEEDED_VALUE]{ENTER}</MethodParam>
    </MapEntry> 	
	<MapEntry>
        <TBCurrentInProgress>EVERSEEN_MISS_SCAN_ALERT_RETDN_cPLUEntry</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>EVERSEEN_MISS_SCAN_ALERT</TBNewInProgress>
         <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>PLUEntry;</MethodParam>  
    </MapEntry> 	
	<MapEntry>
        <TBCurrentInProgress>EVERSEEN_MISS_SCAN_ALERT_RETDN_cPLUEntryCancel</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>EVERSEEN_MISS_SCAN_ALERT</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>MiscanPrompt;</MethodParam>    
    </MapEntry>  
	<!-- ticket switch -->
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>PRODUCT_SWITCH_ALERT</POSMessage>
        <TBNewInProgress>EVERSEEN_PRODUCT_SWITCH_ALERT</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>ProductSwitchPrompt;</MethodParam>    
    </MapEntry>  
	<MapEntry>
        <TBCurrentInProgress>EVERSEEN_PRODUCT_SWITCH_ALERT</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>EVERSEEN_PRODUCT_SWITCH_ALERT_RETDN</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
        <TriggerMethod>msgCheckedIfDataIsScannedSequence</TriggerMethod> 
        <MethodParam>[DATANEEDED_VALUE]{ENTER}</MethodParam>
    </MapEntry> 	
	<MapEntry>
        <TBCurrentInProgress>EVERSEEN_PRODUCT_SWITCH_ALERT_RETDN_cPLUEntry</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>EVERSEEN_PRODUCT_SWITCH_ALERT</TBNewInProgress>
         <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>PLUEntry;</MethodParam>  
    </MapEntry> 	
	<MapEntry>
        <TBCurrentInProgress>EVERSEEN_PRODUCT_SWITCH_ALERT_RETDN_cPLUEntryCancel</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>EVERSEEN_PRODUCT_SWITCH_ALERT</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>ProductSwitchPrompt;</MethodParam>    
    </MapEntry>  
	<!-- basket loss -->
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>BASKET_LOSS_ALERT</POSMessage>
        <TBNewInProgress>EVERSEEN_BASKET_LOSS_ALERT</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>BasketLossPrompt;</MethodParam>    
    </MapEntry>  
	<MapEntry>
        <TBCurrentInProgress>EVERSEEN_BASKET_LOSS_ALERT</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>EVERSEEN_BASKET_LOSS_ALERT_RETDN</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
        <TriggerMethod>msgCheckedIfDataIsScannedSequence</TriggerMethod> 
        <MethodParam>[DATANEEDED_VALUE]{ENTER}</MethodParam>
    </MapEntry> 	
	<MapEntry>
        <TBCurrentInProgress>EVERSEEN_BASKET_LOSS_ALERT_RETDN_cPLUEntry</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>EVERSEEN_BASKET_LOSS_ALERT</TBNewInProgress>
         <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>PLUEntry;</MethodParam>  
    </MapEntry> 	
	<MapEntry>
        <TBCurrentInProgress>EVERSEEN_BASKET_LOSS_ALERT_RETDN_cPLUEntryCancel</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>EVERSEEN_PRODUCT_SWITCH_ALERT</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>BasketLossPrompt;</MethodParam>    
    </MapEntry>
	<!-- ignore everseen alerts outside ITEMIZATION -->
	<MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>MISS_SCAN_ALERT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>    
  </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>PRODUCT_SWITCH_ALERT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>    
  </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>BASKET_LOSS_ALERT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>    
  </MapEntry>
	<!-- End Everseen CRD 313027 -->
	<!-- Start CRD 335964 -->
	<MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>COUPON_992_FAMILY_CODE</POSMessage>
        <TBNewInProgress>COUPON_992_FAMILY_CODE_PROMPT</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>992FamilyCoupon;;SUMMARYINSTRUCTION=[[OG_Guidance_Prop]]</MethodParam>    	
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>COUPON_992_FAMILY_CODE_PROMPT_RETDN_cOK</TBCurrentInProgress>
        <POSMessage>COUPON_992_FAMILY_CODE</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam> 
		<TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>  		
    </MapEntry>
	<!-- End CRD 335964 -->
	<!-- End Everseen 
		CRD 313027
			328681
			344902-->
    <!-- POS78133: Added MOB_SHOP_ORDER_NOT_FOUND_AT_NONMOBILEPAYSTATION POS state which is handled like the UNHANDLED_OG POS state. -->
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>MOB_SHOP_ORDER_NOT_FOUND_AT_NONMOBILEPAYSTATION</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
        <TriggerMethod>msgDontReturnTBNeedAsstIfInAsst</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>UNHANDLED_OG</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
        <TriggerMethod>msgDontReturnTBNeedAsstIfInAsst</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>NEED_MICR</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMICR</TBReturnCode>
        <TriggerMethod>msgNeedMICR</TriggerMethod>
        <MethodParam>1</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_TENDER</TBCurrentInProgress>
        <POSMessage>NEED_MICR</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMICR</TBReturnCode>
        <TriggerMethod>msgNeedMICR</TriggerMethod>
        <MethodParam>1</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_VOID</TBCurrentInProgress>
        <POSMessage>NEED_MICR</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMICR</TBReturnCode>
        <TriggerMethod>msgNeedMICR</TriggerMethod>
        <MethodParam>1</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_TENDER</TBCurrentInProgress>
        <POSMessage>TENDER_ACCEPTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_TENDERACCEPTED</TBReturnCode>
        <TriggerMethod>msgDecideIfTenderAccepted</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_TENDER_CASH_SENT</TBCurrentInProgress>
        <POSMessage>TENDER_ACCEPTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgDecideIfTenderAccepted</TriggerMethod>       
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>TENDER_ACCEPTED</POSMessage>
        <TBNewInProgress>ASSISTMODE_TENDER</TBNewInProgress>
        <TBReturnCode>TB_TENDERACCEPTED</TBReturnCode>
        <TriggerMethod>msgDecideIfTenderAccepted</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>COUPON_CHANGED_PRICE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDCOUPONCHANGE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
        <POSMessage>COUPON_CHANGED_PRICE_VARIANT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDCOUPONCHANGE</TBReturnCode>
    </MapEntry>
<!-- POS33561 rrs -->
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PIN_ENTRY</TBCurrentInProgress>
        <POSMessage>COUPON_CHANGED_PRICE_VARIANT</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
	<TriggerMethod>msgSetProperty</TriggerMethod>		
        <MethodParam>DigitalCouponActive;1;0</MethodParam>
    </MapEntry>
<!-- e POS33561 -->

    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>DISCONNECTED_UNEXPECTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgRestartFastlane</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>CORRUPTED_PASSWORD</POSMessage>
        <TBNewInProgress>POS_EXIT_FASTLANE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
	<TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
        <MethodParam>PasswordCorrupted;9123</MethodParam>     
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_SELECTED</TBCurrentInProgress>
        <POSMessage>ERROR_PIN_INPUT</POSMessage>
        <TBNewInProgress>TENDER_ERR_PIN</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>ErrorPin;</MethodParam>    
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>ERROR_PIN_INPUT</POSMessage>
        <TBNewInProgress>TENDER_ERR_PIN</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>ErrorPin;</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>ERROR_PIN_INPUT</POSMessage>
        <TBNewInProgress>TENDER_ERR_PIN</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>ErrorPin;</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_ERR_PIN_RETDN_cOk</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_ERR_PIN_RETDN_cOk</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_TENDERCANCELLED</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>WIC_BALANCE_EXCEEDED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgHandleWicBalanceExceeded</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_RETDN_cYES</TBCurrentInProgress>
        <POSMessage>WIC_BALANCE_EXCEEDED</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[Cancel]</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_RETDN_cNO</TBCurrentInProgress>
        <POSMessage>WIC_BALANCE_EXCEEDED</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>POS_EXIT_FASTLANE_RETDN_cOk</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>        
        <TriggerMethod>msgRestartFastlane</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_TENDER</TBCurrentInProgress>
        <POSMessage>REMOVE_CHECK_NO_ENDORSE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<!-- +vsts-137989 -->
	<MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_ENDORSEMENT</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_TRXEND</TBReturnCode>
    </MapEntry>
	<!-- -vsts-137989 -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_ENDORSEMENT</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_TRXEND</TBReturnCode>
    </MapEntry>
	<!-- -vsts-137989 -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_ENDORSEMENT</TBCurrentInProgress>
        <POSMessage>POS_TRXEND</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>DispenseAnyChangeAtLane;1;0</MethodParam> 
    </MapEntry>    
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_ENDORSEMENT</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_ENDORSEMENT_IP</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_ENDORSEMENT_IP</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgReturnCodeHandler</TriggerMethod>
        <MethodParam>TB_TRXEND</MethodParam>
    </MapEntry>
	<MapEntry>
        <!--This is triggered by SMFinish, when PrintGiftReceipt button is pressed -->
        <TBCurrentInProgress>GIFTRECEIPT_FLAGGED</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgOnGiftReceipt</TriggerMethod>
        <MethodParam>1</MethodParam> 
    </MapEntry>    
    <MapEntry>
        <TBCurrentInProgress>GIFTRECEIPT_FLAGGED</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9051;9050;GiftReceiptPrintAtEnd_TouchOK.wma;0;0</MethodParam> 
    </MapEntry>
    <MapEntry>
        <!--This is triggered by SMScanAndBag, when PrintGiftReceipt button is pressed -->
        <TBCurrentInProgress>GIFTRECEIPT_FLAGGED</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgOnGiftReceipt</TriggerMethod>
        <MethodParam>1</MethodParam> 
    </MapEntry>    
    <MapEntry>
        <TBCurrentInProgress>GIFTRECEIPT_FLAGGED</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9051;9050;GiftReceiptPrintAtEnd_TouchOK.wma;0;0</MethodParam> 
    </MapEntry>
    <MapEntry>
        <!--This is triggered by SMScanAndBag, when PrintGiftReceipt button is pressed -->
        <TBCurrentInProgress>GIFTRECEIPT_FLAGGED</TBCurrentInProgress>
        <POSMessage>PROCESSING</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgOnGiftReceipt</TriggerMethod>
        <MethodParam>1</MethodParam> 
    </MapEntry>    
    <MapEntry>
        <TBCurrentInProgress>GIFTRECEIPT_FLAGGED</TBCurrentInProgress>
        <POSMessage>PROCESSING</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9051;9050;GiftReceiptPrintAtEnd_TouchOK.wma;0;0</MethodParam> 
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>REQUEST_GIFT_RECEIPT</POSMessage>
        <TBNewInProgress>PRINT_GIFTRECEIPT_IP</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgOnGiftReceipt</TriggerMethod>
        <MethodParam>0</MethodParam> 
    </MapEntry>

<!-- SOTF 8666 RRS -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT_ENDORSEMENT</TBCurrentInProgress>
        <POSMessage>REQUEST_GIFT_RECEIPT</POSMessage>
        <TBNewInProgress>AT_ENDORSEMENT_PRINT_GIFTRECEIPT_IP</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgOnGiftReceipt</TriggerMethod>
        <MethodParam>0</MethodParam> 
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>AT_ENDORSEMENT_PRINT_GIFTRECEIPT_IP</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
	<TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>  
    <MapEntry>
        <TBCurrentInProgress>AT_ENDORSEMENT_PRINT_GIFTRECEIPT_IP</TBCurrentInProgress>
        <POSMessage>TRXMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>AT_ENDORSEMENT_PRINT_GIFTRECEIPT_IP</TBCurrentInProgress>
        <POSMessage>GIFT_PRINT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
<!-- E SOTF 8666 RRS -->
    
    <MapEntry>
        <TBCurrentInProgress>PRINT_GIFTRECEIPT_IP</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_CLOSED</TBReturnCode>
        <TriggerMethod>msgAPI_Finish</TriggerMethod>
    </MapEntry>   
    <MapEntry>
        <TBCurrentInProgress>PRINT_GIFTRECEIPT_IP</TBCurrentInProgress>
        <POSMessage>TRXMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <!-- +SOTF 8362 -->    
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>GIFT_PRINT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_COMPLETEPRINTANDCUT</TBReturnCode>
    </MapEntry>
    <!-- -SOTF 8362 -->

    <!-- Following entry is required to avoid kicking off the watchdog
         timer when printing many rebate and gift receipts -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>TRXMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>REBATEITEM</TBCurrentInProgress>
        <POSMessage>DUPLICATE_REBATE_RECEIPT_AMOUNT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>RebateReceiptQty;</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>REBATEITEM_RETDN</TBCurrentInProgress>
        <POSMessage>DUPLICATE_REBATE_RECEIPT_AMOUNT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[DATANEEDED_VALUE]{ENTER}</MethodParam>
   </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>REBATEITEM_RETDN</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9055;9053;RebateReceiptPrintAtEnd_TouchOK.wma;0;1;</MethodParam> 
   </MapEntry>
   <MapEntry>
        <TBCurrentInProgress>REBATEITEM_RETDN</TBCurrentInProgress>
        <POSMessage>DUPLICATE_REBATE_RECEIPT_TOOMANY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>RebateReceiptOverQty;</MethodParam> 
   </MapEntry>
   <MapEntry>
        <TBCurrentInProgress>REBATEITEM_RETDN_RETDN_cOK</TBCurrentInProgress>
        <POSMessage>DUPLICATE_REBATE_RECEIPT_TOOMANY</POSMessage>
        <TBNewInProgress>REBATEITEM</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>  
   </MapEntry>  
    <MapEntry>
        <TBCurrentInProgress>REBATEITEM</TBCurrentInProgress>
        <POSMessage>REBATE_NOT_ALLOWED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam> 
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>REBATEITEM</TBCurrentInProgress>
        <POSMessage>BAG_ITEM_ALONE_28</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam> 
    </MapEntry> 
    <MapEntry>
        <!--This is a dummy RebateItem state to avoid continually sending keys to ACS -->
        <TBCurrentInProgress>REBATEITEM</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry> 
    <MapEntry>
        <!--This is triggered by SMRebateItem, when PrintRebateItem button is pressed -->
        <TBCurrentInProgress>TAG_REBATEITEM</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>REBATEITEM</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F8}{F8}{F3}</MethodParam> 
    </MapEntry>
    <MapEntry>
        <!--This is triggered by SMRebateItem, when PrintRebateItem button is pressed -->
        <TBCurrentInProgress>TAG_REBATEITEM</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>RebateReceiptRequested;1;1</MethodParam> 
    </MapEntry>
    <MapEntry>
        <!--This is triggered by SMRebateItem, when PrintRebateItem button is pressed -->
        <TBCurrentInProgress>TAG_REBATEITEM</TBCurrentInProgress>
        <POSMessage>PROCESSING</POSMessage>
        <TBNewInProgress>REBATEITEM</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F8}{F8}{F3}</MethodParam> 
    </MapEntry>
    <MapEntry>
        <!--This is triggered by SMRebateItem, when PrintRebateItem button is pressed -->
        <TBCurrentInProgress>TAG_REBATEITEM</TBCurrentInProgress>
        <POSMessage>PROCESSING</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>RebateReceiptRequested;1;1</MethodParam> 
    </MapEntry>
    <MapEntry>
        <!-- RebateItem Message Screen -->
        <TBCurrentInProgress>REBATEITEM_MSG</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9055;9053;RebateReceiptPrintAtEnd_TouchOK.wma;0;0</MethodParam> 
    </MapEntry>
    <MapEntry>
        <!-- RebateItem No Messgae Return -->
        <TBCurrentInProgress>REBATEITEM_NOMSG</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <!-- <MapEntry>
        <TBCurrentInProgress>TB_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>FOID_ITEM</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9004; ;AssistanceNeeded.wma;0;0</MethodParam> 
    </MapEntry> -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>FOID_ITEM</POSMessage>
        <TBNewInProgress>FOID_APPROVAL_NEEDED</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>FOIDApproval;</MethodParam>
    </MapEntry>
	<!-- Start CRD 237814 -->
	<MapEntry>
        <TBCurrentInProgress>TB_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>RESUME_ERROR</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<!-- End CRD 237814 -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>RESUME_ERROR</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
        <MethodParam>ResumeError;9139</MethodParam>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_cAssistMode</TBCurrentInProgress>
        <POSMessage>RESUME_ERROR</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode> 
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>FOID_APPROVAL_NEEDED_RETDN_cAssistMode</TBCurrentInProgress>
        <POSMessage>FOID_ITEM</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode> 
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>RESUME_TRX_CONFIRM</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>        
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>RESUME_STARTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>RESUME_STARTED_NOIGNORE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<MapEntry> 
	<!--Madz 377139-->
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>RESUME_STARTED_NOIGNORE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>RESUME_COMPLETE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>RESUME_COMPLETE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>FOID_DISPLAY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>  
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>FOID Exp. [[Foidmonth]]/[[Foidday]]/[[Foidyear]]         [[FoidID]]</MethodParam>
    </MapEntry> 
    <MapEntry>
            <!-- Handle Situation where Customer inserts cash, swipes card, then  touches "Pay with card" -->
            <TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress>
            <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
            <TBNewInProgress>TENDER_SELECTED</TBNewInProgress>
            <TBReturnCode>TB_IGNORE</TBReturnCode>
            <TriggerMethod>msgSendSequence</TriggerMethod>
            <MethodParam>{PAYMENT}{CASH}</MethodParam>
    </MapEntry>
    <MapEntry>
            <!-- Handle Situation where Customer inserts cash, swipes card, then  touches "Pay with card" -->
            <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
            <POSMessage>CASHIER_TENDER</POSMessage>
            <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
            <TBReturnCode>TB_IGNORE</TBReturnCode>
            <TriggerMethod>msgSendSequence</TriggerMethod>
            <MethodParam>{F1}</MethodParam>
    </MapEntry>
	<!-- +POS312463 -->
	<MapEntry>
            <TBCurrentInProgress>ASSISTMODE_TENDER_CASH_SENT</TBCurrentInProgress>
            <POSMessage>CASHIER_TENDER</POSMessage>
            <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
            <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<!-- -POS312463 -->
	<MapEntry>
            <!-- Handle Situation where Customer inserts cash, swipes card, then  touches "Pay with card" -->
			<!-- It's ok to use the cSTATE_ANY after the changes in BaseMsgMap to ignore multiple handling of it" -->
            <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
            <POSMessage>CASHIER_TENDER</POSMessage>
            <TBNewInProgress>TENDER_SELECTED</TBNewInProgress>
            <TBReturnCode>TB_IGNORE</TBReturnCode>
            <TriggerMethod>msgSendSequence</TriggerMethod>
            <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
            <!-- This match occurs after the one above, so just ignore it" -->
            <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
            <POSMessage>CASHIER_TENDER</POSMessage>
            <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
            <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
            <!-- Handle Situation where Customer inserts cash, pre-swipes an invalid card (phone card)" -->
            <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
            <POSMessage>INVALID_CARD_NUMBER</POSMessage>
            <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
            <TBReturnCode>TB_IGNORE</TBReturnCode>
            <TriggerMethod>msgSendSequence</TriggerMethod>
            <MethodParam>{F7}</MethodParam>
    </MapEntry>
    <MapEntry>
            <!-- Handle Situation where Customer inserts cash, pre-swipes an invalid card (phone card)" -->
            <TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress>
            <POSMessage>INVALID_CARD_NUMBER</POSMessage>
            <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
            <TBReturnCode>TB_IGNORE</TBReturnCode>
            <TriggerMethod>msgSendSequence</TriggerMethod>
            <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
            <TBCurrentInProgress>ASSISTMODE_ENTER</TBCurrentInProgress>
            <POSMessage>WEIGHT_REQUIRED</POSMessage>
            <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
            <TBReturnCode>TB_NEEDWEIGHT</TBReturnCode>
    </MapEntry>

    <MapEntry>
        <!-- TENDER_CASH cash flapi tender -->
        <TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress>
        <POSMessage>PROCESSING</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{PAYMENT}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress>
        <POSMessage>WIC_BALANCE_EXCEEDED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgHandleWicBalanceExceeded</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_CASH_RETDN_cYES</TBCurrentInProgress>
        <POSMessage>WIC_BALANCE_EXCEEDED</POSMessage>
        <TBNewInProgress>TENDER_CASH</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[Cancel]</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TENDER_CASH_RETDN_cNO</TBCurrentInProgress>
        <POSMessage>WIC_BALANCE_EXCEEDED</POSMessage>
        <TBNewInProgress>TENDER_CASH</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>MICR_ERROR</POSMessage>
            <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
            <TBReturnCode>TB_NEEDMICR</TBReturnCode>
        <TriggerMethod>msgNeedMICR</TriggerMethod>
        <MethodParam>0</MethodParam>
    </MapEntry>
    <MapEntry>
            <TBCurrentInProgress>ASSISTMODE_WAIT_SIGSLIP</TBCurrentInProgress>
            <POSMessage>POS_TRXEND</POSMessage>
            <TBNewInProgress>ASSISTMODE_TRXEND_SIGSLIP</TBNewInProgress>
            <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
            <TBCurrentInProgress>ASSISTMODE_TRXEND_SIGSLIP</TBCurrentInProgress>
            <POSMessage>ITEMMENU_DK1</POSMessage>
            <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
            <TBReturnCode>TB_IGNORE</TBReturnCode>
            <TriggerMethod>msgAMCancelRebateReceipt</TriggerMethod>
    </MapEntry>
    <MapEntry>
        <!-- In AssistMode don't do any trigger of the map let Assistmode drive it -->
            <TBCurrentInProgress>ASSISTMODE_TRXEND_SIGSLIP</TBCurrentInProgress>
            <POSMessage>-1</POSMessage>
            <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
            <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgPreserveAssistModeState</TriggerMethod>
        <MethodParam>ASSISTMODE_TRXEND_SIGSLIP</MethodParam>
    </MapEntry>
    <MapEntry>
        <!-- In AssistMode don't do any trigger of the map let Assistmode drive it -->
            <TBCurrentInProgress>ASSISTMODE_WAIT_SIGSLIP</TBCurrentInProgress>
            <POSMessage>-1</POSMessage>
            <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
            <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgPreserveAssistModeState</TriggerMethod>
        <MethodParam>ASSISTMODE_WAIT_SIGSLIP</MethodParam>
    </MapEntry>	
    <!-- SOTF 7718 -->
    <MapEntry>
        <TBCurrentInProgress>NO_SALE_STATE_IP</TBCurrentInProgress>
        <POSMessage>END_TRXN</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_CANCEL_ITEM</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}{TRANS}{F3}{F1}{MISC}{F3}</MethodParam>
    </MapEntry>
   <MapEntry>
        <TBCurrentInProgress>NO_SALE_STATE_IP</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <!-- sotf 7718 -->  

    <MapEntry>
        <TBCurrentInProgress>NO_SALE_STATE_END</TBCurrentInProgress>
        <POSMessage>NO_SALE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>NoSaleInProgress;1;0</MethodParam>
    </MapEntry>
        
	<MapEntry>
        <TBCurrentInProgress>NO_SALE_STATE_END</TBCurrentInProgress>
        <POSMessage>NO_SALE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>NO_SALE_STATE_END</TBCurrentInProgress>
        <POSMessage>NO_SALE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgCashDrawerSetCloseImmediate</TriggerMethod>
        <MethodParam>1</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>NO_SALE_STATE_END</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgReturnCodeHandler</TriggerMethod>
        <MethodParam>TB_TRXEND</MethodParam>
    </MapEntry>
    <!-- SOTF 7718 -->
    <MapEntry>
        <TBCurrentInProgress>NO_SALE_STATE_END</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>        
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>NO_SALE_STATE</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_SALE_STATE_IP</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{MISC}{F3}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>PROCESSING</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>SET_PIN_PROP</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>NEXT_DAY_SEPARATE_MEDIA</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>       
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <!-- This state causes linked item flag to be set in Items message -->
        <!-- No message map handling necessary -->
        <POSMessage>LINKED_ITEM</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>  
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>EFT_COMPLETED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>CM_PROMO_LINKEDITEM</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>DUMMY_DISPLAY_AFTER_NSC4</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>FOOD_STAMP_CHANGE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>   
    </MapEntry>
	<MapEntry>
	 <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>WAITING_ON_PINPAD</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>REBATE_NOT_ALLOWED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>   
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>IGNORE_POSSTATE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>   
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TRANSACTION_SUSPEND</TBCurrentInProgress>
        <POSMessage>VOID_PREPAID_CARDS</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
	</MapEntry>
	<MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>TENDER_FINISH</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_ENABLE_ASSISTMODE</TBReturnCode>
	</MapEntry>
  <!-- (Start) 5803/6203 Modified restricted use coupon cases outside of phone promo
       to also display a customer screen in certain cases -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>RESTRICTED_USE_COUPON_ASSIST</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
      	<TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>RESTRICTED_USE_COUPON_CONDITION_NOT_MET</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>
    <!-- POS27359: Use new customer message 319, instead of 246 for RESTRICTED_USE_COUPON_ALREADY_USED -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>RESTRICTED_USE_COUPON_ALREADY_USED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9319;9161; ;1;1</MethodParam> 
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>RESTRICTED_USE_COUPON_INVALID</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9017;9161; ;1;1</MethodParam> 
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
<!-- (End) 5803/6203 Modified restricted use coupon cases outside of phone promo
       to also display a customer screen in certain cases -->    
    <!-- POS27359: Added RESTRICTED_USE_COUPON_ACCEPTED mapping it to customer message 317 -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>RESTRICTED_USE_COUPON_ACCEPTED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_INSERT_MEDIA_ITEM</TBReturnCode>   <!-- POS55714 rrs -->
		<TriggerMethod>msgSendSequence</TriggerMethod> <!-- START CRD 526835 to avoid TB OutOfSync after scanning a restricted coupon-->
		<MethodParam>{F1}</MethodParam> <!-- END CRD 526835 -->		
<!--
       <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9317;9161; ;1;1</MethodParam> 
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
-->
    </MapEntry>
    <!-- POS27359: Added RESTRICTED_USE_COUPON_ALREADY_APPLIED_TO_TRX mapping it to customer message 318 -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>RESTRICTED_USE_COUPON_ALREADY_APPLIED_TO_TRX</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9318;9161; ;1;1</MethodParam> 
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
   
    <!-- POS31050 Mobile Enhancement START -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>MOBILE_TRANSACTION_ASSISTANCE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>    
	<!-- CRD 223409 -->
	<MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>MOBILE_TRANSACTION_ASSISTANCE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
    </MapEntry>   
     

    <!-- POS11024 Mobile Shopper Audit START -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>MOBILE_TRANSACTION_VERIFICATION_NEEDED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry> 
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>MOBILE_AUDIT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>   <!-- POS31051 Handle new audit rrs -->
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>   
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>MOBILE_AUDIT</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
    <MapEntry> 
        <TBCurrentInProgress>MOBILE_AUDIT_PROCESS_RETDN_cDone</TBCurrentInProgress>
        <POSMessage>ITEM_NOT_FOUND_IN_MOBILE_ORDER</POSMessage>
        <TBNewInProgress>MOBILE_AUDIT_PROCESS</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>   
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>

    <!-- POS31051 handling mobile audit with plu rrs -->
    <MapEntry> 
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>MOBILE_AUDIT_WITH_PLU</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>   <!-- POS31051 Handle new audit rrs -->
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>   
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>MOBILE_AUDIT_WITH_PLU</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
    <!-- e POS31051 rrs -->

    <!-- E POS11024 Mobile Shopper Audit-->    
    <!-- POS19073: FRAUDULENT_COUPON added.  -->
    <!-- POS24909: Changed MethodParam from F1 to F2 so that Cancel-press is sent to sales app to clear error.  -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>FRAUDULENT_COUPON</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9297;9161; ;1;1</MethodParam>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
    <!-- SOTF 7852 -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>ONCE_AND_DONE_COUPON_UNRECOGNIZED_PROMOTION</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>        
    </MapEntry>
    <!-- SOTF 8428 -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>ONCE_AND_DONE_COUPON_CONDITION_NOT_MET</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9271;9161; ;1;1</MethodParam> 
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>        
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>ONCE_AND_DONE_COUPON_PREVIOUSLY_REDEEMED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9272;9161; ;1;1</MethodParam> 
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>ONCE_AND_DONE_PROMOTION_EXPIRED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9161;9161; ;1;1</MethodParam> 
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <!-- END SOTF 8428 -->
    <!-- END SOTF 7852 -->

    <!-- POS24632 rrs -->
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PENDING</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <!-- e POS24632 -->
	<!-- POS296302 aab -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_SKIPBAGGING_IP</TBCurrentInProgress>
        <POSMessage>DO_YOU_WANT_MPERKS</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_SKIPBAGGING_IP</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <!-- e POS296302 -->
    <!-- SOTF6400 -->
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>TB_DIGITAL_COUPON_IP</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}{F8}{F8}{F6}</MethodParam>        
    </MapEntry>

    <!-- POS39158 fail safe if the POS goes to Meijer Coupon -->
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_IP</TBCurrentInProgress>
        <POSMessage>MEIJER_COUPON</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}{F8}{F8}{F6}</MethodParam>        
    </MapEntry>

    <MapEntry>        
        <TBCurrentInProgress>TB_ENTERITEM_FLAPI</TBCurrentInProgress>       
        <POSMessage>MEIJER_COUPON</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
    </MapEntry>   
    <!-- e POS39158 -->


    <MapEntry> 
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON</POSMessage>
        <TBNewInProgress>TB_DIGITAL_COUPON_IP</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>   
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>DigitalCoupon;</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_IP</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>   
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>DigitalCoupon;</MethodParam>
    </MapEntry>

    <!-- POS14806 POS DIGITAL COUPON PIN ENTRY-->
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_IP</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON_PIN_ENTRY</POSMessage>
        <TBNewInProgress>TB_DIGITAL_COUPON_PIN_ENTRY</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>   
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>DigitalCouponPINEntry;</MethodParam>
    </MapEntry>
    <!-- e POS14806 DIGITAL COUPON PIN ENTRY -->

   <!-- POS84328/80904 mPerks Resume -->
   <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON_PIN_ENTRY</POSMessage>
        <TBNewInProgress>TB_DIGITAL_COUPON_PIN_ENTRY</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>   
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>DigitalCouponPINEntry;</MethodParam>
    </MapEntry>
   <!-- POS84328/80904 mPerks Resume -->
    <!--POS11024:Mobile Shopper -->
    <!--If PIN entry is OFF-->
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_IP</TBCurrentInProgress>
        <POSMessage>MOB_SHOP_ORDER_PENDING_MSG</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
      	<TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
	<TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>MobileShopperOrderPending;</MethodParam>      
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_IP_RETDN_cNO</TBCurrentInProgress>
        <POSMessage>MOB_SHOP_ORDER_PENDING_MSG</POSMessage>
        <TBNewInProgress>TB_DIGITAL_COUPON_IP</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
	    <TriggerMethod>msgSetHookProperty</TriggerMethod> <!-- POS31050 rrs -->
        <MethodParam>PropMobShopOrderPrompt;0</MethodParam> <!-- POS31050 rrs -->
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_IP_RETDN_cYES</TBCurrentInProgress>
        <POSMessage>MOB_SHOP_ORDER_PENDING_MSG</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
	    <TriggerMethod>msgSetHookProperty</TriggerMethod> <!-- POS31050 rrs -->
        <MethodParam>PropMobShopOrderPrompt;1</MethodParam> <!-- POS31050 rrs -->
    </MapEntry>
    <!--If PIN entry is ON-->
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>MOB_SHOP_ORDER_PENDING_MSG</POSMessage>
        <TBNewInProgress>TB_DIGITAL_COUPON_PIN_ENTRY</TBNewInProgress>
      	<TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
		<TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>MobileShopperOrderPending;</MethodParam>      
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PIN_ENTRY</TBCurrentInProgress>
        <POSMessage>MOB_SHOP_ORDER_PENDING_MSG</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
      	<TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
	<TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>MobileShopperOrderPending;</MethodParam>      
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PIN_ENTRY_RETDN_cNO</TBCurrentInProgress>
        <POSMessage>MOB_SHOP_ORDER_PENDING_MSG</POSMessage>
        <TBNewInProgress>TB_DIGITAL_COUPON_IP</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PIN_ENTRY_RETDN_cYES</TBCurrentInProgress>
        <POSMessage>MOB_SHOP_ORDER_PENDING_MSG</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>

   <!-- POS106936 mperks prompt cc -->
   <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_OUT</TBCurrentInProgress>
        <POSMessage>DO_YOU_WANT_MPERKS</POSMessage>
        <TBNewInProgress>TB_DIGITAL_COUPON_PROMPT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
		<TriggerMethod>msgSetHookProperty</TriggerMethod> <!-- POS323036 -->
        <MethodParam>IsGoingBackToItemMenu;1</MethodParam>			
    </MapEntry>
    <!-- <MapEntry> pos291641
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>DO_YOU_WANT_MPERKS</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>      
    </MapEntry> -->
	<MapEntry>
        <TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress>
        <POSMessage>DO_YOU_WANT_MPERKS</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>      
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>DO_YOU_WANT_MPERKS</POSMessage>
        <TBNewInProgress>TB_DIGITAL_COUPON_PROMPT</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>MPerksPrompt;;SUMMARYINSTRUCTION=[[OG_Guidance_Prop]];</MethodParam>      
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PROMPT_RETDN_cNO</TBCurrentInProgress>
        <POSMessage>DO_YOU_WANT_MPERKS</POSMessage>
<!-- 259199        <TBNewInProgress>TB_DIGITAL_COUPON_PROMPT</TBNewInProgress> -->
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsFromMPerksPrompt;1;0</MethodParam>
<!-- POS259199-264013
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam>  
rs e POS259199-264013 --> 
    </MapEntry>

<!-- 259199 rrs -->
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PROMPT_RETDN_cNO</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress> <!--POS290569 -->
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsFromMPerksPrompt;1;0</MethodParam>
    </MapEntry>
	<!-- placeholder for 259199 
     <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PROMPT_RETDN_cYES</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON_ACTIVE</POSMessage>
		<TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>DigitalCouponActive;1;0</MethodParam>       
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>mPerks # [[DigitalCouponAccountNo]]</MethodParam>        
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PROMPT_RETDN_cYES</TBCurrentInProgress>
        <POSMessage>HIGHVALUE_PROMO_CHOICE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9332;9331; ;0;0</MethodParam>         
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PROMPT_RETDN_cYES</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>
    </MapEntry>	
	-->
	<MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>        
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_IP</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>  <!-- POS324301 -->          
    </MapEntry>
<!-- e 259199 rrs -->

<!-- POS192618 -->
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PROMPT</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam> 
    </MapEntry>
<!-- POS192618 -->

<!-- +POS273636 - aab --> 
    <MapEntry>
            <TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress>
            <POSMessage>FSCARD_ENTERED</POSMessage>
            <TBNewInProgress>TENDER_SELECTED</TBNewInProgress>
            <TBReturnCode>TB_IGNORE</TBReturnCode>
            <TriggerMethod>msgSendSequence</TriggerMethod>
            <MethodParam>{PAYMENT}{CASH}</MethodParam>
    </MapEntry>
    <!-- -POS287563 - aab -->
    <MapEntry> 
         <TBCurrentInProgress>TB_DIGITAL_COUPON_PROMPT_RETDN_cNO</TBCurrentInProgress>
         <POSMessage>ITEMMENU_DK1</POSMessage>
         <TBNewInProgress>ITEMIZATION</TBNewInProgress>
         <TBReturnCode>TB_NEED_SCANANDBAG</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PROMPT_RETDN_cNO</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMCardProcessing</MethodParam> <!-- POS290569 -->
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsFromMPerksPrompt;1;0</MethodParam> 
    </MapEntry>
	<!-- -POS273636 - aab -->
	
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PROMPT_RETDN_cYES</TBCurrentInProgress>
        <POSMessage>DO_YOU_WANT_MPERKS</POSMessage>
	<!-- placeholder 259199 <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress> -->
        <TBNewInProgress>TB_DIGITAL_COUPON_PROMPT</TBNewInProgress> 
        <TBReturnCode>TB_IGNORE</TBReturnCode> 
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>        
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsFromMPerksPrompt;1;0</MethodParam>  		
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PROMPT</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PROMPT</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>         
    </MapEntry>

<!-- POS214059 -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>         
    </MapEntry>
<!-- e POS214059 -->

    <!-- The mPerks entry after swipe card can cause HIGHVALUE_PROMO_CHOICE  -->
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PROMPT</TBCurrentInProgress>
        <POSMessage>HIGHVALUE_PROMO_CHOICE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9332;9331; ;0;0</MethodParam>         
    </MapEntry>
    <!-- The mPerks entry after swipe card can cause HIGHVALUE_PROMO_CHOICE  -->
   <!-- POS106936 mperks prompt cc -->
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PROMPT</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsFromMPerksPrompt;1;0</MethodParam> 
    </MapEntry>
	<!-- +POS320628 -->
	<!-- change to 1 for POS323946 -->
    <!-- +VSTS-153390  
	<MapEntry>         
        <TBCurrentInProgress>TB_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>HIGHVALUE_PROMO_CHOICE</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9332;9331; ;1;0</MethodParam>           
    </MapEntry>
   -->
	<!-- -VSTS-153390 -->
	<!-- -POS320628 -->
    <!--POS37397:Mobile ReResume -->
	<!--POS53849:Correct MethodParam 9346 -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>MOB_SHOP_ORDER_RE_RESUME_MSG</POSMessage>
        <TBNewInProgress>TB_DIGITAL_COUPON_IP</TBNewInProgress>
      	<TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
	<TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
        <MethodParam>MobileShopperOrderInProgress;9346</MethodParam>      
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_IP_RETDN_cNO</TBCurrentInProgress>
        <POSMessage>MOB_SHOP_ORDER_RE_RESUME_MSG</POSMessage>
        <TBNewInProgress>TB_DIGITAL_COUPON_IP</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
	    <TriggerMethod>msgSetHookProperty</TriggerMethod> 
        <MethodParam>PropMobShopOrderPrompt;0</MethodParam> 
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_IP_RETDN_cYES</TBCurrentInProgress>
        <POSMessage>MOB_SHOP_ORDER_RE_RESUME_MSG</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
	<TriggerMethod>msgSetHookProperty</TriggerMethod> 
        <MethodParam>PropMobShopOrderPrompt;1</MethodParam> 
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMProcessing</MethodParam>
    </MapEntry>
    <!--e POS37397:Mobile ReResume -->

<!-- POS48277 MobilePayStation -->
     <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PIN_ENTRY</TBCurrentInProgress>
        <POSMessage>MOB_SHOP_ORDER_NOT_FOUND</POSMessage>
        <TBNewInProgress>TB_MOBILE_TRAN_NOT_FOUND</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
       <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>MobileShopperOrderNotFound;</MethodParam>      
    </MapEntry>
   <MapEntry> 
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PIN_ENTRY</TBCurrentInProgress>
        <POSMessage>MOBILE_AUDIT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>   <!-- POS31051 Handle new audit rrs -->
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>   
    </MapEntry>
   <MapEntry> 
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PIN_ENTRY</TBCurrentInProgress>
        <POSMessage>MOBILE_AUDIT_WITH_PLU</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>   <!-- POS31051 Handle new audit rrs -->
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>   
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_MOBILE_TRAN_NOT_FOUND_RETDN_cOK</TBCurrentInProgress>
        <POSMessage>MOB_SHOP_ORDER_NOT_FOUND</POSMessage>
        <TBNewInProgress>TRANSACTION_CANCEL</TBNewInProgress>  <!-- POS77770 change TBSTATE to TRANSACTION_CANCEL to not print the receipt -->
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
   <MapEntry>
        <TBCurrentInProgress>TB_FINISH_FLAPI</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON_LOOKUP_FAILED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>        
    </MapEntry>
    <!-- POS77584 rrs -->
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PIN_ENTRY</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>
    </MapEntry>
    <!-- e POS77584 rrs -->
<!-- e POS48277 MobilePayStation -->

    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>MOB_SHOP_EAS_DEACT</POSMessage>
        <TBNewInProgress>MOB_SHOP_EAS_VALIDATION</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
	<TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
        <MethodParam>MobileShopperEasDeact;9312</MethodParam>
    </MapEntry>
    <MapEntry> 
        <TBCurrentInProgress>MOB_SHOP_EAS_VALIDATION_RETDN</TBCurrentInProgress>
        <POSMessage>MOB_SHOP_EAS_DEACT</POSMessage>
        <TBNewInProgress>MOB_SHOP_EAS_VALIDATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>   
        <TriggerMethod>msgCheckedIfDataIsScannedSequence</TriggerMethod>
        <MethodParam>[DATANEEDED_VALUE]{ENTER}</MethodParam>
    </MapEntry>
    <MapEntry> 
        <TBCurrentInProgress>MOB_SHOP_EAS_VALIDATION</TBCurrentInProgress>
        <POSMessage>MOB_SHOP_EAS_DEACT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>   
        <TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
        <MethodParam>MobileShopperEasDeact;9312</MethodParam>      
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>MOB_SHOP_EAS_VALIDATION_RETDN_cDone</TBCurrentInProgress>
        <POSMessage>MOB_SHOP_EAS_DEACT</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>MOB_SHOP_SCAN_AND_COLLECT</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
    <!--POS11024:Mobile Shopper End-->

    <!--POS31050:Mobile Shopper Enhancement handling scan data in scan and collect -->
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>MOB_SHOP_EAS_DEACT</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
    <!--POS31050:Mobile Shopper Enhancement  End-->

    <!-- POS15434 INVALID MPERKS PIN ENTRY -->   
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PIN_ENTRY</TBCurrentInProgress>
        <POSMessage>PROCESSING</POSMessage>
        <TBNewInProgress>TB_DIGITAL_COUPON_IP</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>   
	<TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMProcessing</MethodParam>    
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PIN_ENTRY</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_NEED_SCANANDBAG</TBReturnCode>
<!-- POS33297 don't set the digitalcouponactive during mperks pin entry
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>DigitalCouponActive;1;0</MethodParam>        
e POS33297 rrs -->
    </MapEntry>	
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PIN_ENTRY</TBCurrentInProgress>
        <POSMessage>MEP_AVAILABLE</POSMessage>
<!-- POS36317 rrs -->
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_NEED_SCANANDBAG</TBReturnCode>
<!-- e POS36317 rrs -->
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PIN_ENTRY</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK2</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PIN_ENTRY</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK3</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PIN_ENTRY_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON_PIN_ENTRY</POSMessage>
        <TBNewInProgress>TB_DIGITAL_COUPON_CANCELLED</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F8}</MethodParam>    
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress> <!-- cSTATE_ANY for POS291625 -->
        <POSMessage>MESSAGE_300_2_INVALID_MPERKS_PIN</POSMessage>
        <TBNewInProgress>TB_DIGITAL_COUPON_INVALID_PIN_ENTRY</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>   
	<TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>DigitalCouponInvalidPINEntry;</MethodParam>
    </MapEntry>
    
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_INVALID_PIN_ENTRY_RETDN_cOk</TBCurrentInProgress>
        <POSMessage>MESSAGE_300_2_INVALID_MPERKS_PIN</POSMessage>
        <TBNewInProgress>TB_DIGITAL_COUPON_IP</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>    
    </MapEntry>
	<!-- +POS310458 / SSCOI-47888 /SSCOI-48305  -->
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>MESSAGE_300_2_INVALID_MPERKS_PIN</POSMessage>
        <TBNewInProgress>TB_DIGITAL_COUPON_INVALID_PIN_ENTRY</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>   
		<TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>DigitalCouponInvalidPINEntry;</MethodParam>
    </MapEntry>
	<!-- -POS310458 / SSCOI-47888 /SSCOI-48305  -->
    <!-- e POS15434 INVALID MPERKS PIN ENTRY -->   


    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_IP_RETDN_cReturn</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON</POSMessage>
        <TBNewInProgress>TB_DIGITAL_COUPON_CANCELLED</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_CANCELLED</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_NEED_SCANANDBAG</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_IP</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_NEED_SCANANDBAG</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>DigitalCouponActive;1;0</MethodParam>        
    </MapEntry>
    <!--POS291204 -aab -->
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_IP</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>        
    </MapEntry>
    <MapEntry>       
        <TBCurrentInProgress>TB_DIGITAL_COUPON_IP_RETDN</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON</POSMessage>
        <TBNewInProgress>TB_DIGITAL_COUPON_IP</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>   
	<TriggerMethod>msgFormatPromoNumber</TriggerMethod> 
        <MethodParam>[DATANEEDED_VALUE]</MethodParam>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>[DigitalCouponCustomerNumber]{ENTER}</MethodParam>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMProcessing</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON_ACTIVE</POSMessage>
	<TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>DigitalCouponActive;1;0</MethodParam>       
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>mPerks # [[DigitalCouponAccountNo]]</MethodParam>        
    </MapEntry>
	<!-- SSCOI-58809 This will tell SCO to go to ScanAndBag -->
	<MapEntry>
		<TBCurrentInProgress>TB_DIGITAL_COUPON_PIN_ENTRY</TBCurrentInProgress>
		<POSMessage>DIGITAL_COUPON_ACTIVE</POSMessage>
		<TBNewInProgress>ITEMIZATION</TBNewInProgress>
		<TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSetFLState</TriggerMethod>
		<MethodParam>SMScanAndBag</MethodParam>
	</MapEntry>
	<!-- SSCOI-58809 -->		
	<!-- (+) CRD 139942 -->
	<MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON_LOOKUP_ENABLED_TRAININGMODE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEED_SCANANDBAG</TBReturnCode>
		<TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>DigitalCouponActive;1;0</MethodParam>
		<TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>mPerks # XXXXXX1234</MethodParam> 
    </MapEntry>
	<!-- (-) CRD 139942 -->
	<!-- +bug265521 -->
	<MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>FSCARD_ENTERED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>DigitalCouponActive;1;0</MethodParam>       
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>mPerks # [[FSCardAccountNo]]</MethodParam>        
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>MPERKS_ENROLLMENT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>   
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>FSCARD_SCANNED</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>DigitalCouponActive;1;0</MethodParam>       
        <TriggerMethod>msgAddRewardLine</TriggerMethod>
        <MethodParam>mPerks Card Scanned</MethodParam>        
    </MapEntry>
	<!-- -bug265521 -->
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON_ALREADY_IN_TRANSACTION</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgDynamicCustomerDigitalCouponMessageScreen</TriggerMethod>
        <MethodParam>[[OG_Guidance_Prop]]</MethodParam> 
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
	<!-- Start CRD 241533 -->
	<MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON_INVALID_BARCODE_STOREMODE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
	</MapEntry>
	<!-- End CRD 241533 -->
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON_INVALID_BARCODE</POSMessage>
		<TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9256;9161; ;1;1</MethodParam> 
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
	<!-- Start CRD 241533 -->
	<MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON_NOT_A_MEMBER_STOREMODE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
	</MapEntry>
	<!-- End CRD 241533 -->
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON_NOT_A_MEMBER</POSMessage>
		<TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9258;9161; ;1;1</MethodParam> 		
    </MapEntry>
	
	<!-- Start CRD 241533 -->
	<MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON_NO_PROMOTION_STOREMODE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
	</MapEntry>
	<!-- End CRD 241533 -->
	
	<!-- Start CRD 265301 -->
	<MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>SAS_TIMEOUT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
	</MapEntry>
	<!-- End CRD 265301 -->
	
	
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON_NO_PROMOTION</POSMessage>
		<TBNewInProgress>ITEMIZATION</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9240;9161; ;1;1</MethodParam>         
    </MapEntry>

    <!-- (+) POS112107: 4.56.8 : FL did not register money inserted at lane -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON_NO_PROMOTION</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>  

    <!-- (-) POS112107: 4.56.8 : FL did not register money inserted at lane -->


    <!-- POS39475: The item entry after mPerks entry can cause HIGHVALUE_PROMO_CHOICE -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>HIGHVALUE_PROMO_CHOICE</POSMessage>
      <!--  <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress> -->
	    <TBNewInProgress>TB_DIGITAL_COUPON_IP</TBNewInProgress> <!-- Bug 244609 -->
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9332;9331; ;0;0</MethodParam>
		<TriggerMethod>msgSetHookProperty</TriggerMethod> <!-- POS323036 -->
        <MethodParam>IsGoingBackToItemMenu;0</MethodParam>
    </MapEntry>
	<MapEntry> <!-- POS250985 aab -->
        <TBCurrentInProgress>TB_DIGITAL_COUPON_IP</TBCurrentInProgress>
        <POSMessage>B2B_HIGHVALUE_PROMO_CHOICE</POSMessage>
      <!--  <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress> -->
	    <TBNewInProgress>TB_DIGITAL_COUPON_IP</TBNewInProgress> <!-- Bug 244609 -->
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9332;9331; ;0;0</MethodParam>         
    </MapEntry>
	<!-- Bug 244609 -->
	<MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_IP</TBCurrentInProgress>
        <POSMessage>HIGHVALUE_PROMO_CHOICE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	
    <!-- POS39475: The mPerks entry after item entry can cause HIGHVALUE_PROMO_CHOICE  -->
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PIN_ENTRY</TBCurrentInProgress>
        <POSMessage>HIGHVALUE_PROMO_CHOICE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9332;9331; ;0;0</MethodParam>         
    </MapEntry>
    <!-- POS39475: The tender entry can cause HIGHVALUE_PROMO_CHOICE -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_SELECTED</TBCurrentInProgress>
        <POSMessage>HIGHVALUE_PROMO_CHOICE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9332;9331; ;0;0</MethodParam>         
    </MapEntry>
    <!-- POS50102: A HIGHVALUE_PROMO_CHOICE can occur when completing Mobile Intervention & Audit and transitioning into TB_ENTERTENDERSTATE_IN state  -->
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>HIGHVALUE_PROMO_CHOICE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9332;9331; ;0;0</MethodParam>         
    </MapEntry>
    <!-- POS93791: A HIGHVALUE_PROMO_CHOICE can occur after selling phone or gift card  -->
   <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT</TBCurrentInProgress>
        <POSMessage>HIGHVALUE_PROMO_CHOICE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9332;9331; ;0;0</MethodParam>         
    </MapEntry>
    <MapEntry> <!-- POS296290 -->
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>HIGHVALUE_PROMO_CHOICE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9332;9331; ;0;0</MethodParam>         
    </MapEntry>
    <!-- POS33020: The coupon entry after mPerks entry can cause VENDOR_COUPON_CHOICE -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>VENDOR_COUPON_CHOICE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9334;9333; ;0;0</MethodParam>         
    </MapEntry>
    <!-- POS33020: The mPerks entry after coupon entry can cause VENDOR_COUPON_CHOICE  -->
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PIN_ENTRY</TBCurrentInProgress>
        <POSMessage>VENDOR_COUPON_CHOICE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9334;9333; ;0;0</MethodParam>         
    </MapEntry>
    <!-- POS33020: The tender entry can potentially cause VENDOR_COUPON_CHOICE -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_SELECTED</TBCurrentInProgress>
        <POSMessage>VENDOR_COUPON_CHOICE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9334;9333; ;0;0</MethodParam>         
    </MapEntry>

    <!-- POS93791: A VENDOR_COUPON_CHOICE can occur after selling phone or gift card  -->
   <MapEntry>
        <TBCurrentInProgress>ITEMIZATION_PHONE_GIFT</TBCurrentInProgress>
        <POSMessage>VENDOR_COUPON_CHOICE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9334;9333; ;0;0</MethodParam>         
    </MapEntry>


<!-- (+)   POS192736                   -->
<MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PROMPT</TBCurrentInProgress>
        <POSMessage>VENDOR_COUPON_CHOICE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9334;9333; ;0;0</MethodParam>         
    </MapEntry>

    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_PROMPT</TBCurrentInProgress>
        <POSMessage>COUPON_CHANGED_PRICE_VARIANT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
<!-- (-)   POS192736                   -->


    <!-- POS33020: Handle 'Return vendor coupon to customer' apmsg -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>RETURN_COUPON</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
        <MethodParam>ReturnCoupon;9341</MethodParam>            
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON_LOOKUP_FAILED</POSMessage>
	    <TBNewInProgress>ITEMIZATION</TBNewInProgress>
		<TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
		<TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>DigitalCouponAppliedOffline;1;0</MethodParam>        
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9257;9161; ;1;1</MethodParam> 
    </MapEntry>
	<!-- Start CRD 241533 -->
	<MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON_LOOKUP_FAILED_STOREMODE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
	</MapEntry>
	<!-- End CRD 241533 -->
    <!-- SOTF6400 END -->
	<!-- (+)POS317537 / SSCOI-49078: Handle the mPerks Retry limit OP message, need operator intervention -->
	<MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>MPERKS_RETRY_LIMIT_EXCEEDED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
	</MapEntry>
	<!-- (-) POS317537 / SSCOI-49078 -->
    <!-- +SOTF6469 Timing condition, screens below may flash during transition to PHONE
         PROMO DF and should be ignored while processing phone promo event. 
    -->
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_IP</TBCurrentInProgress>
        <POSMessage>MEP_AVAILABLE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_IP</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK2</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_DIGITAL_COUPON_IP</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK3</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <!-- -SOTF6469 -->    
    <!-- SOTF 6226 -->
     <MapEntry>
        <TBCurrentInProgress>OPERATOR_VOID_RESTRICTED_ITEM_ENTER</TBCurrentInProgress>
        <POSMessage>-1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>PROMPT_CUSTOMER_LEGAL_AGE</TBCurrentInProgress>
        <POSMessage>RESTRICTED_ITEM_AGE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
         <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>PromptCustomerLegalAge;</MethodParam>
    </MapEntry> 
    <MapEntry>
        <TBCurrentInProgress>PROMPT_CUSTOMER_LEGAL_AGE_RETDN_cYes</TBCurrentInProgress>
        <POSMessage>RESTRICTED_ITEM_AGE</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
         <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F3}</MethodParam>
    </MapEntry>      
    <MapEntry>
        <TBCurrentInProgress>PROMPT_CUSTOMER_LEGAL_AGE_RETDN_cNo</TBCurrentInProgress>
        <POSMessage>RESTRICTED_ITEM_AGE</POSMessage>
        <TBNewInProgress>OPERATOR_ASSIST_CUSTOMER_AGE_ITEM</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>RetrieveAgeRestrictedItem</MethodParam> 
    </MapEntry>
     <MapEntry>
        <TBCurrentInProgress>OPERATOR_ASSIST_CUSTOMER_AGE_ITEM_RETDN_cOk</TBCurrentInProgress>
        <POSMessage>RESTRICTED_ITEM_AGE</POSMessage>
        <TBNewInProgress>CANCEL_AGE_RESTRICTED_ITEM</TBNewInProgress>
        <TBReturnCode>TB_CANCEL_ITEM</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMScanAndBag</MethodParam> 
    </MapEntry>   
    <!-- END SOTF 6226 -->
	<!-- BEGIN SOTF8850 -->
	<MapEntry>
		<TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
		<POSMessage>CSBR_SLIP_NOT_FROM_STORE</POSMessage>
		<TBNewInProgress>CSBR_SLIP_NOT_FROM_STORE</TBNewInProgress>
		<TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
		<TriggerMethod>msgDataNeededWithCustomerScreen</TriggerMethod>
		<MethodParam>CSBRSlipNotFromStore;9286</MethodParam>
	</MapEntry>
	<MapEntry>
		<TBCurrentInProgress>CSBR_SLIP_NOT_FROM_STORE_RETDN_cOk</TBCurrentInProgress>
		<POSMessage>CSBR_SLIP_NOT_FROM_STORE</POSMessage>
		<TBNewInProgress>ITEMIZATION</TBNewInProgress>
		<TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSendSequence</TriggerMethod>
		<MethodParam>{F1}</MethodParam>
		<TriggerMethod>msgSetFLState</TriggerMethod>
		<MethodParam>SMScanAndBag</MethodParam>
	</MapEntry>
	<MapEntry>
		<TBCurrentInProgress>CSBR_SLIP_NOT_FROM_STORE_RETDN_cCancel</TBCurrentInProgress>
		<POSMessage>CSBR_SLIP_NOT_FROM_STORE</POSMessage>
		<TBNewInProgress>ITEMIZATION</TBNewInProgress>
		<TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSendSequence</TriggerMethod>
		<MethodParam>{F2}</MethodParam>
		<TriggerMethod>msgSetFLState</TriggerMethod>
		<MethodParam>SMScanAndBag</MethodParam>
	</MapEntry>
	<MapEntry>
		<TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
		<POSMessage>CSBR_SLIP_NOT_VALID</POSMessage>
		<TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
		<TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
		<TriggerMethod>msgMessageScreen</TriggerMethod>
		<MethodParam>9280;9281; ;1;1</MethodParam>
		<TriggerMethod>msgSendSequence</TriggerMethod>
		<MethodParam>{F2}</MethodParam>
	</MapEntry>
	<MapEntry>
		<TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
		<POSMessage>CSBR_SLIP_EXPIRED</POSMessage>
		<TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
		<TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
<!-- POS10275 comment it out this portion so that it will force the attendant to go to AM - rrs
		<TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
		<TriggerMethod>msgMessageScreen</TriggerMethod>
		<MethodParam>9282;9283; ;1;1</MethodParam>
		<TriggerMethod>msgSendSequence</TriggerMethod>
		<MethodParam>{F2}</MethodParam>
e POS10275 -->
	</MapEntry>
	<MapEntry>
		<TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
		<POSMessage>CSBR_PREVIOUSLY_REDEEMED</POSMessage>
		<TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
		<TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
		<TriggerMethod>msgMessageScreen</TriggerMethod>
		<MethodParam>9284;9285; ;1;1</MethodParam>
		<TriggerMethod>msgSendSequence</TriggerMethod>
		<MethodParam>{F2}</MethodParam>
	</MapEntry>
	<!-- END SOTF8850 -->
    <!-- BEGIN SOTF8854 -->
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>CCM_FULL_APPROVAL</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>[[OG_Guidance_Prop]];9292; ;1;1;1</MethodParam>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>CCM_PARTIAL_APPROVAL</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>[[OG_Guidance_Prop]];9292; ;1;1;1</MethodParam>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <!-- END SOTF8854-->

    <!-- POS42533 RRS -->
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>MESSAGE_300_1_PARTIAL_OTC</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry>
    <!-- END POS42533-->

    <!--- POS 6135 rrs -->
    <MapEntry>
        <TBCurrentInProgress>TB_POS_RELOAD_OPTION</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK1</POSMessage>
        <TBNewInProgress>TB_POS_RELOAD_OPTION_START</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{MISC}{F5}{F8}{F3}</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_POS_RELOAD_OPTION_START</TBCurrentInProgress>
        <POSMessage>MISCMENU_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_POS_RELOAD_OPTION_START</TBCurrentInProgress>
        <POSMessage>POS_RELOAD_OPTION_START</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_POS_RELOAD_OPTION_START</TBCurrentInProgress>
        <POSMessage>POS_RELOAD_OPTION_END</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>TB_POS_RELOAD_OPTION_START</TBCurrentInProgress>
        <POSMessage>NEW_ITEM_PROMPT</POSMessage>
        <TBNewInProgress>ITEMIZATION</TBNewInProgress>
	<TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
    </MapEntry>
	<!-- +SSCOI-47253 -->
	<MapEntry>
        <TBCurrentInProgress>TB_POS_RELOAD_OPTION</TBCurrentInProgress>
        <POSMessage>PRICEINQUIRY_MENU</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}{MISC}{F5}{F8}{F3}</MethodParam>
    </MapEntry>
	<!-- -SSCOI-47253 -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>DISREGARD_OG</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
    <!--- POS 6135 rrs -->

    <!--- POS55609: Added PRICE_REQUIRED_INVALID_AMOUNT to allow transitioning of states so that price-required amount entries are not ignored -->
    <!-- +SSCOI-46770 -->
	<!--MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>PRICE_REQUIRED_INVALID_AMOUNT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F1}</MethodParam>
    </MapEntry -->	
	<MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>PRICE_REQUIRED_INVALID_AMOUNT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
		<MethodParam>9372;9373; ;1;1</MethodParam>
    </MapEntry>
	<!-- -SSCOI-46770 -->

<!-- (+)  POS101707    -->
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>COUPON_PRICE_VALIDATION</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
      	<TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>        
    </MapEntry>

<!-- (-)  POS101707    -->

<!--  (+) POS138630 DG59 - Online WIC Changes  -->

     <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>WIC_CUSTOMER_CONFIRMATION1</POSMessage>
        <TBNewInProgress>TB_WIC_CONFIRMATION</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>WICConfirmation;</MethodParam>
       <TriggerMethod>msgSetHookProperty</TriggerMethod> 	<!-- POS154826 -->	
        <MethodParam>WICItemList;1</MethodParam>
    </MapEntry>



  <MapEntry>
        <TBCurrentInProgress>TENDER_CASH</TBCurrentInProgress>
        <POSMessage>WIC_CUSTOMER_CONFIRMATION1</POSMessage>
        <TBNewInProgress>TB_WIC_CONFIRMATION_CASHINSERTED</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>WICConfirmation;</MethodParam>
    </MapEntry>

     <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>WIC_CUSTOMER_CONFIRMATION2</POSMessage>
       <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_NEEDASSISTMODE</TBReturnCode>
       <TriggerMethod>msgSetHookProperty</TriggerMethod> 	<!-- POS154826 -->
        <MethodParam>WICItemList;0</MethodParam> 
    </MapEntry>

    <MapEntry>
        <TBCurrentInProgress>TB_WIC_CONFIRMATION</TBCurrentInProgress>
        <POSMessage>TENDER_ACCEPTED</POSMessage>
        <TBNewInProgress>TB_WIC_TENDERACCEPTED</TBNewInProgress>	<!-- POS154789 -->
        <TBReturnCode>TB_TENDERACCEPTED</TBReturnCode>
		<TriggerMethod>msgSetProperty</TriggerMethod>       <!-- POS296865 -->
        <MethodParam>IsWICTenderAccepted;1;0</MethodParam>    <!-- POS296865 --> 
    </MapEntry>


<!-- (+) POS154789 -->
<MapEntry>
        <TBCurrentInProgress>TB_WIC_TENDERACCEPTED</TBCurrentInProgress>
        <POSMessage>POS_TRXEND</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgReturnCodeHandler</TriggerMethod>
        <MethodParam>TB_TRXEND</MethodParam>
    </MapEntry>

<MapEntry>
        <TBCurrentInProgress>TB_WIC_TENDERACCEPTED</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>
    </MapEntry>

<!-- (-) POS154789 -->

    <MapEntry>
        <TBCurrentInProgress>TB_WIC_CONFIRMATION_CASHINSERTED</TBCurrentInProgress>
        <POSMessage>TENDER_ACCEPTED</POSMessage>
        <TBNewInProgress>TENDER_CASH</TBNewInProgress>
        <TBReturnCode>TB_TENDERACCEPTED</TBReturnCode>
    </MapEntry>

<!--  (-) POS138630 DG59 - Online WIC Changes  -->

<!--  (+) POS149583       -->

    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>WIC_CONFIRM_RECEIPT_DONE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_COMPLETEPRINTANDCUT</TBReturnCode>
    </MapEntry>

<!--  (-) POS149583       -->

<!-- POS180969 -->
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>SW_ID_PRINT</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_COMPLETEPRINTANDCUT</TBReturnCode>
    </MapEntry>
<!-- POS180969 -->

<!-- (+) POS198270 -->
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_EXIT</TBCurrentInProgress>
        <POSMessage>POS_TRXEND</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgReturnCodeHandler</TriggerMethod>
        <MethodParam>TB_TRXEND</MethodParam>
    </MapEntry>
<!-- (-) POS198270 -->

<!-- POS223750-261569 EMV rrs -->
<!--
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>CHIPCARD_DETECTED</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9369;; ;0;0</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBNewInProgress>
        <POSMessage>EMV_PROCESSING</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMCardProcessing</MethodParam>
    </MapEntry>    
-->

<!-- 258550 -->
    <MapEntry>
        <TBCurrentInProgress>TENDER_PAYMENT</TBCurrentInProgress>
        <POSMessage>CARD_REMOVED_765</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>   
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>     
    </MapEntry>    
<!-- e  258550 -->

<!-- POS273548 -->
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress> <!-- +-POS303376-->
        <POSMessage>EMV_PLEASE_REMOVE_CARD</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9371;9370; ;0;1</MethodParam>           
    </MapEntry>    
	  
	  <!--<MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>EMV_PLEASE_REMOVE_CARD</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9371;9370; ;0;0</MethodParam>           
    </MapEntry> -->
    <!-- -POS303376-->
	 <!-- (+) SSCOI-49124: Remove the extra MapEntry end tag below that was included in SSCOI-49004 changes
	 </MapEntry>    -->
	 <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_OUT</TBCurrentInProgress>
        <POSMessage>EMV_PLEASE_REMOVE_CARD</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9371;9370; ;0;0</MethodParam>           
    </MapEntry>
<!-- e  POS273548 -->

    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>CHIPCARD_DETECTED</POSMessage>
        <TBNewInProgress>CHIPCARD_DETECTED</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>ChipCardEnabled;</MethodParam>        
        <TriggerMethod>msgSendSequenceWithWaits</TriggerMethod>
        <MethodParam>1000;{F2};0</MethodParam>
    </MapEntry>
	
	<!-- POS291972 rrs -->
	<MapEntry>
        <TBCurrentInProgress>TENDER_NEGATIVE_ITEM</TBCurrentInProgress>
        <POSMessage>CHIPCARD_DETECTED</POSMessage>
        <TBNewInProgress>CHIPCARD_DETECTED</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>ChipCardEnabled;</MethodParam>        
        <TriggerMethod>msgSendSequenceWithWaits</TriggerMethod>
        <MethodParam>1000;{F2};0</MethodParam>
    </MapEntry>
	<!-- e POS291972 rrs -->
	
    <!-- POS287468 pilot store311 chipcard detected issue -->
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>CHIPCARD_DETECTED</POSMessage>
        <TBNewInProgress>CHIPCARD_DETECTED</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>ChipCardEnabled;</MethodParam>        
        <TriggerMethod>msgSendSequenceWithWaits</TriggerMethod>
        <MethodParam>1000;{F2};0</MethodParam>
    </MapEntry>
	<!-- POS287468 pilot store311 chipcard detected issue rs -->
    <MapEntry>
        <TBCurrentInProgress>CHIPCARD_DETECTED</TBCurrentInProgress>
        <POSMessage>PAYMENTMENU_DK1</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>  <!-- POS291972 rrs -->
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<!-- +POS294487/294724 aab -->
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>WAITING_ON_PINPAD4</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMCardProcessing</MethodParam>
    </MapEntry>
	 <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>WAITING_ON_PINPAD4</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMCardProcessing</MethodParam>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress> <!-- The TENDER_PAYMENT redundant. The original entry far above has TENDER_PAYMENT already -->
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>
    </MapEntry>
    <!-- -POS294487/294724 -->
    <!-- +POS294602 -->
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>WAITING_ON_PINPAD_ENTRY</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>  <!-- POS293857/273125/291972 aab -->
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<!-- +POS294487 aab -->
    <MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>WAITING_ON_PINPAD4</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMCardProcessing</MethodParam>
    </MapEntry>
    <!-- -POS294602 -->
   <!-- <MapEntry> comment for 296369. duplicate to the entry above.
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>
    </MapEntry> -->
    <!-- -POS294487 -->
    <!-- +POS294602 -->
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>WAITING_ON_PINPAD_ENTRY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMCardProcessing</MethodParam>
    </MapEntry>
    <!-- -POS294602 -->
    <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>CHIPCARD_DETECTED</POSMessage>
        <TBNewInProgress>CHIPCARD_DETECTED</TBNewInProgress>
        <TBReturnCode>TB_NEEDMOREDATA</TBReturnCode>
        <TriggerMethod>msgDataNeeded</TriggerMethod>
        <MethodParam>ChipCardEnabled;</MethodParam>        
    </MapEntry>
	<!-- POS272079 rs -->
    <MapEntry>
        <TBCurrentInProgress>CHIPCARD_DETECTED</TBCurrentInProgress> <!-- POS273906 - Changes for 275803 broke the behaviour of the normal EMV, so remove the changes made for 275803 rrs -->
        <POSMessage>WAITING_ON_PINPAD4</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMCardProcessing</MethodParam>
    </MapEntry>
	<!-- Start CRD 154382 -->
    <MapEntry>
        <TBCurrentInProgress>TRANSACTION_CANCEL</TBCurrentInProgress>
        <POSMessage>QUICKCHIP_REMOVED_AT_PAYMENTMENU</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>		 
    </MapEntry>
	<!-- End CRD 154382 -->

	<MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>QUICKCHIP_REMOVED_AT_PAYMENTMENU</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgOverridePOSState</TriggerMethod> 
        <MethodParam>PAYMENTMENU_DK1</MethodParam> <!-- multiple logics are dependent on POSState, so lets restore it -->
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>		 
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>WAITING_ON_PINPAD_QUICK_CHIP_INSERTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgOverridePOSState</TriggerMethod>
        <MethodParam>PAYMENTMENU_DK1</MethodParam>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMCardProcessing</MethodParam>		 
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBCurrentInProgress>
        <POSMessage>WAITING_ON_PINPAD_QUICK_CHIP_WAS_INSERTED</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgOverridePOSState</TriggerMethod>
        <MethodParam>PAYMENTMENU_DK1</MethodParam>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMCardProcessing</MethodParam>		 
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>TB_ENTERTENDERSTATE_IN</TBCurrentInProgress>
        <POSMessage>WAITING_ON_PINPAD_QUICK_CHIP_WAS_INSERTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgOverridePOSState</TriggerMethod>
        <MethodParam>PAYMENTMENU_DK1</MethodParam>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMCardProcessing</MethodParam>		
    </MapEntry>
	<!-- e POS272079 rs -->
    <MapEntry>
        <TBCurrentInProgress>CHIPCARD_DETECTED</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>TENDER_PAYMENT</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetFLState</TriggerMethod>
        <MethodParam>SMFinish</MethodParam>
    </MapEntry>
    <MapEntry>
        <TBCurrentInProgress>CHIPCARD_DETECTED_RETDN_cOk</TBCurrentInProgress>
        <POSMessage>CHIPCARD_DETECTED</POSMessage>
        <TBNewInProgress>TB_ENTERTENDERSTATE_IN_DRIVE_FL</TBNewInProgress>
        <TBReturnCode>TB_CANCEL_ITEM</TBReturnCode>
        <TriggerMethod>msgSendKeyIfNotInAssist</TriggerMethod>
        <MethodParam>{F2}</MethodParam>       
    </MapEntry>

<!-- e POS223750 - 265169 EMV rrs -->
<!-- (+)POS266877-->
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_CLEAR_OG_ITEMIZATION</TBCurrentInProgress>
        <POSMessage>HIGHVALUE_PROMO_CHOICE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9332;9331; ;0;0</MethodParam>         
    </MapEntry>
<!-- (-)POS266877 -->

 <!-- (+) DL POS251563-->
 <!--  start RFQ 9554 -->
 <!-- (+)CRD136007 -->
    <MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>DELAYED_AGE_VERIFY_WHILE_RECALLING_ITEMS</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F4}</MethodParam>
    </MapEntry>
<!-- (-)CRD136007 -->
 <!-- RFQ 9554 -->
 
	<!-- Start CRD 155433 -->
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>DELAYED_AGE_VERIFY</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F4}</MethodParam>
    </MapEntry>
	<!-- End CRD 155433 -->
	
	<!-- Start CRD 157372 -->
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>DELAYED_AGE_VERIFY_SND</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
      	<TBReturnCode>TB_IGNORE</TBReturnCode>  
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsTriggeredByTB;1;0</MethodParam>		
        <TriggerMethod>msgSetFLState</TriggerMethod>
		<!-- Navigating to SMWaitForApproval instead of directly to Assistmode in order for
		     for the existing implementation on the RAP that tells the attendant to assist the customer on lane will still work -->
        <MethodParam>SMWaitForApproval</MethodParam>		
    </MapEntry>
<!-- End CRD 157372 -->

	<MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>AGE_VERIFY_DK1</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
      	<TBReturnCode>TB_IGNORE</TBReturnCode>  
        <TriggerMethod>msgSetProperty</TriggerMethod>
        <MethodParam>IsTriggeredByTB;1;0</MethodParam>		
        <TriggerMethod>msgSetFLState</TriggerMethod>
		<!-- Navigating to SMWaitForApproval instead of directly to Assistmode in order for
		     for the existing implementation on the RAP that tells the attendant to assist the customer on lane will still work -->
        <MethodParam>SMWaitForApproval</MethodParam>		
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>AGE_VERIFY_SCAN_DL</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>AGE_VERIFY_SELECT_STATE</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>	 
    </MapEntry>
  <!-- (-) DL POS251563-->
  <!-- (+) POS243714-->  
    <MapEntry>
        <TBCurrentInProgress>TENDER_PIP_GENERIC</TBCurrentInProgress>
        <POSMessage>CUSTOMER_TENDER_SELECTED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F3}</MethodParam>
    </MapEntry> 
   <!-- (-) POS243714-->   
   <!-- (+)POS252892 -->
    <MapEntry>
        <TBCurrentInProgress>TB_FINISH_FLAPI</TBCurrentInProgress>
        <POSMessage>DIGITAL_COUPON</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F8}</MethodParam>
	</MapEntry>
   <!-- (-)POS252892 -->
   <!-- +POS291625 -->
   <MapEntry>
        <TBCurrentInProgress>cSTATE_ANY</TBCurrentInProgress>
        <POSMessage>ENTER_MPERKS_PASSPORT_PIN</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9372;149; ;1;1</MethodParam>         
    </MapEntry>
    <!-- -POS291625 -->	
	<!-- +SSCOI-46756: This is to handle scanning selling of item when POS is in ITEMMENU_DK2 -->
    <MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK2</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
	<MapEntry>
        <TBCurrentInProgress>ASSISTMODE_ENTERITEM_FLAPI</TBCurrentInProgress>
        <POSMessage>ITEMMENU_DK3</POSMessage>
        <TBNewInProgress>ASSISTMODE_ENTER</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
		<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{ITEM}</MethodParam>
        <TriggerMethod>msgAPI_EnterItem</TriggerMethod>
    </MapEntry>
	<!-- -SSCOI-46756 -->	
	<MapEntry>
        <TBCurrentInProgress>ITEMIZATION_RETDN_cOk</TBCurrentInProgress>
        <POSMessage>MESSAGE_300_2_INVALID_MPERKS_PIN</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>    
    </MapEntry>
	<MapEntry> 
        <TBCurrentInProgress> TB_ENTERTENDERSTATE_OUT </TBCurrentInProgress>
        <POSMessage>HIGHVALUE_PROMO_CHOICE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9332;9331; ;0;0</MethodParam>         
    </MapEntry>
	<MapEntry> 
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>RESUME_TRANS_NOTALLOWED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_MESSAGESCREEN</TBReturnCode>
	<TriggerMethod>msgSendSequence</TriggerMethod>
        <MethodParam>{F2}</MethodParam>
        <TriggerMethod>msgMessageScreen</TriggerMethod>
        <MethodParam>9392; ; ;1;1</MethodParam>         
    </MapEntry>

	<!-- Start CRD 130212 -->
	<!--<MapEntry> 
        <TBCurrentInProgress> ITEMIZATION </TBCurrentInProgress>
        <POSMessage>EAS_ITEM</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
        <TriggerMethod>msgSetProperty</TriggerMethod>
		<MethodParam>EASItemEntryID;[[tb_long]];0</MethodParam>   
		 <TriggerMethod>msgEASGenericDelayed</TriggerMethod>
		<MethodParam>0</MethodParam> 
    </MapEntry>-->
	<MapEntry>       
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>EAS_ITEM</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<MapEntry>       
        <TBCurrentInProgress>ITEMIZATION</TBCurrentInProgress>
        <POSMessage>MOBILE_GENERIC_DELAYED</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_IGNORE</TBReturnCode>
    </MapEntry>
	<!-- End CRD 130212 -->
	<MapEntry> 
        <TBCurrentInProgress>TB_CLOSELANE</TBCurrentInProgress>
        <POSMessage>SIGNIN_MENU_TOMORROWMODE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_SENDEODCASHREPORT</TBReturnCode>
    </MapEntry>
	<MapEntry> 
        <TBCurrentInProgress>SIGNOUT_COMPLETE</TBCurrentInProgress>
        <POSMessage>SIGNIN_MENU_TOMORROWMODE</POSMessage>
        <TBNewInProgress>NO_STATE_CHANGE</TBNewInProgress>
        <TBReturnCode>TB_SENDEODCASHREPORT</TBReturnCode>
    </MapEntry>
</MapEntries>

